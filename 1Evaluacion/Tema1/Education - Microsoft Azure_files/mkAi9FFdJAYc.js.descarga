define("FxInternal/Controls/Accordion",["require","exports","Fx/Controls/Validations","FxInternal/Controls/Base/Base"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=t.ViewModel=void 0;var a=MsPortalFx.initObservable,i=function(e){function t(t,n){var r=e.call(this,t)||this;(r.controlType=127,r.canExpandMultipleSections=n.canExpandMultipleSections,r.canCollapseAllSections=n.canCollapseAllSections,r.disabled=a(n.disabled,!1),r.visible=a(n.visible,!0),r.cssClass=a(n.cssClass,""),r.ariaLabel=a(n.ariaLabel,""),r.noFxPadding=a(n.noFxPadding,!1),r.sections=MsPortalFx.initObservableArray(n.sections),r.valid=ko.observable(!0),r.dirty=ko.observable(!1),r.validationState=ko.observable(0),r.validators=ko.observableArray([{}]),n.canCollapseAllSections)||r.sections().every((function(e){return!e.expanded()}))&&r.sections().length&&r.sections()[0].expanded(!0);if(!n.canExpandMultipleSections){var i=!0;r.sections().filter((function(e){return!!e.expanded()})).forEach((function(e){i?i=!1:e.expanded(!1)}))}return r}return __extends(t,e),t}(r.ViewModel);t.ViewModel=i;var o=function(e,t){this.dirty=ko.observable(!1),this.validationState=ko.observable(0),this.expanded=a(t&&t.expanded,!1),this.title=a(t&&t.title),Q.isPromiseAlike(t.content)?(this.content=ko.observable(null),t.content.then(this.content)):ko.isObservable(t.content)?this.content=t.content:this.content=ko.observable(t.content)};t.Section=o})),
define("Fx/Controls/Accordion",["require","exports","FxInternal/Controls/Accordion"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSection=t.create=void 0,t.create=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.ViewModel(e,t)})),r},t.createSection=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.Section(e,t)})),r}})),
define("FxInternal/Controls/HierarchicalDropDown",["require","exports","FxInternal/Controls/DropDown"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;var r=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this;return a.itemLoadingComplete=MsPortalFx.initObservable(!1),a.filterableProperties=n.filterableProperties||[],a}return __extends(t,e),t}(n.ViewModel);t.ViewModel=r})),
define("FxInternal/Controls/ManagementGroupDropDown",["require","exports","Fx/Ajax","FxInternal/Controls/HierarchicalDropDown","FxInternal/Resources/ManagementGroupDropDown","FxInternal"],(function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=t.ArgResourceType=void 0;var o,s=MsPortalFx.Base,l=s.Security,c=s.Diagnostics.createLog(e),u=MsPortalFx.Resources.Strings.Azure.ManagmenetGroups.DropDown,d=s.Promises.makeCancelable,p="".concat(n.getEndpoints().arm,"providers/Microsoft.ResourceGraph/resources?api-version=2021-03-01"),m="ResourceContainers| where type =~ 'microsoft.management/managementGroups'| project ResourceId = name, DisplayName = tostring(properties.displayName), ParentDisplayName = tostring(properties.details.parent.displayName), HierarchyLevel = array_length(properties.details.managementGroupAncestorsChain), ParentId = tostring(properties.details.parent.name), type, tenantId| extend hasDirectAccess = 1| join kind=fullouter (resourcecontainers| where type == 'microsoft.management/managementgroups'| project tenantId, type, original = properties.details.managementGroupAncestorsChain, mgChain = properties.details.managementGroupAncestorsChain| mv-expand with_itemindex= MGIndex mgChain| project ResourceId = tostring(mgChain.name), DisplayName = tostring(mgChain.displayName), tenantId, HierarchyLevel = array_length(original) - MGIndex - 1, ParentId = tostring(original[MGIndex + 1].name), ParentDisplayName = tostring(original[MGIndex + 1].displayName)| summarize DisplayName = any(DisplayName), tenantId = any(tenantId), HierarchyLevel = any(HierarchyLevel), ParentId = any(ParentId), ParentDisplayName = any(ParentDisplayName) by ResourceId) on ResourceId| project ResourceId = iff(isempty(ResourceId), ResourceId1, ResourceId), DisplayName = iff(isempty(DisplayName), DisplayName1, DisplayName),ParentDisplayName = iff(isempty(ParentDisplayName), ParentDisplayName1, ParentDisplayName),HierarchyLevel = iff(isempty(HierarchyLevel), HierarchyLevel1, HierarchyLevel), ParentId = iff(isempty(ParentId), ParentId1, ParentId),hasDirectAccess = iff(isnull(hasDirectAccess), int(null), 1),type, tenantId| join kind=fullouter (Resourcecontainers| where type == 'microsoft.resources/subscriptions'| extend selfAsMg = pack_array(pack('displayName', name, 'name', subscriptionId))| project id, type, tenantId, mgChain = array_concat(selfAsMg, properties.managementGroupAncestorsChain)| extend original = mgChain| mv-expand with_itemindex=MGIndex mgChain| extend IsImmediateChild = (MGIndex == 1)| extend HierarchyLevel = array_length(original) - MGIndex - 1, ResourceId = tostring(mgChain.name), DisplayName = tostring(mgChain.displayName), ParentId = tostring(original[MGIndex + 1].name), ParentDisplayName = tostring(original[MGIndex + 1].displayName)| summarize totalSubCount = countif(MGIndex > 0), immediateChildSubCount = countif(IsImmediateChild), HierarchyLevel = any(HierarchyLevel), ParentId = any(ParentId), type = anyif(type, MGIndex == 0), DisplayName = any(DisplayName), ParentDisplayName = any(ParentDisplayName), hasDirectAccess = anyif(1, MGIndex == 0), tenantId = any(tenantId) by ResourceId) on ResourceId| project ResourceId = iff(isempty(ResourceId), ResourceId1, ResourceId), DisplayName = iff(isempty(DisplayName), DisplayName1, DisplayName), HierarchyLevel = iff(isnull(HierarchyLevel), HierarchyLevel1, HierarchyLevel), ParentId = iff(isempty(ParentId), ParentId1, ParentId), ParentDisplayName = iff(isempty(ParentDisplayName), ParentDisplayName1, ParentDisplayName), totalSubCount = iff(isnull(totalSubCount), 0, totalSubCount), immediateChildSubCount = iff(isnull(immediateChildSubCount), 0, immediateChildSubCount), type = iff(isempty(type), iff(isempty(type1), 'microsoft.management/managementGroups', type1), type), hasDirectAccess = iff(isnull(hasDirectAccess) and isnull(hasDirectAccess1) , 'false', 'true'), tenantId = iff(isempty(tenantId), tenantId1, tenantId)";!function(e){e.ManagementGroup="microsoft.management/managementgroups",e.Subscription="microsoft.resources/subscriptions"}(o||(t.ArgResourceType=o={}));var f=function(e){function t(t,n){var r=e.call(this,t,{multiselect:null==n?void 0:n.multiSelect,selectAll:!0,filter:!0,filterableProperties:["displayName","id"],loading:MsPortalFx.initObservable(!0),placeholder:u.placeHolder,ariaLabel:(null==n?void 0:n.ariaLabel)||a.ManagementGroupDropDown.ariaLabel,multiItemDisplayText:a.ManagementGroupDropDown.xSelected,validations:null==n?void 0:n.validations})||this;return r.value=ko.observable(null),r.fetchedValues=ko.observableArray(),r._fetchedValues=[],r._itemsMap={},r._rootMgId=ko.observable(""),r._cancellationToken=new s.Promises.CancelationToken,r.controlType=210,r.items([MsPortalFx.clone(r._itemsMap[r._rootMgId()],!0)]),r._disableItem=n.disableItem,t.registerForDispose((function(){r._cancellationToken.cancel()})),l.getUserInfo().then((function(e){r._rootMgId(e.directoryId),r._fetch(r._rootMgId(),1).then((function(){r._processDisabledItems().then((function(){r.items([MsPortalFx.clone(r._itemsMap[r._rootMgId()],!0)])}))})).catch((function(e){if(!(e instanceof MsPortalFx.Errors.CanceledError))throw e})).finally((function(){r.fetchedValues(r._fetchedValues),r.loading(!1),r.itemLoadingComplete(!0)}))})),r}return __extends(t,e),t.prototype._processDisabledItems=function(){return __awaiter(this,void 0,void 0,(function(){var e,t=this;return __generator(this,(function(n){switch(n.label){case 0:return this._disableItem?(e=[],(0,i.forEachKey)(this._itemsMap,(function(n){var r=t._itemsMap[n];e.push(t._disableItem(r.value).then((function(e){var t;null!==(t=r.disabled)&&void 0!==t||(r.disabled=ko.observable(e))})))})),[4,Promise.all(e).then((function(){t.items([MsPortalFx.clone(t._itemsMap[t._rootMgId()],!0)])}))]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype._fetch=function(e,t){var r=this;return d(function(e){return __awaiter(this,arguments,void 0,(function(e,t,r){var a,i,o,s,l,c,u,d,f,y;return void 0===t&&(t=1),__generator(this,(function(v){switch(v.label){case 0:return a="".concat(m," ").concat((null==r?void 0:r.length)?"| where DisplayName has '".concat(r,"' or ResourceId has '").concat(r,"'"):""," | order by HierarchyLevel asc, ResourceId | extend rowNum = row_number() | where rowNum >= ").concat(t),[4,n.batch({type:"POST",uri:p,setTelemetryHeader:"Microsoft_Azure_ManagementGroups.",requestHeaderDictionary:{"x-ms-command-name":["Microsoft_Azure_ManagementGroups."]},content:{query:a,managementGroups:[e]}})];case 1:return i=v.sent(),o=null!==(c=null===(l=null==i?void 0:i.content)||void 0===l?void 0:l.totalRecords)&&void 0!==c?c:0,s=null!==(d=null===(u=null==i?void 0:i.content)||void 0===u?void 0:u.count)&&void 0!==d?d:0,[2,{data:null!==(y=null===(f=null==i?void 0:i.content)||void 0===f?void 0:f.data)&&void 0!==y?y:[],partialResult:o>s}]}}))}))}(e,t),this._cancellationToken).then((function(n){if(r._buildMGTree(n.data),1===t&&n.partialResult&&r._processDisabledItems().then((function(){r.items([r._itemsMap[r._rootMgId()]]),r.loading(!1)})),n.partialResult)return r._fetch(e,t+1e3);r.loading(!1)}))},t.prototype._buildMGTree=function(e){var t=this,n=[],r=function(e,n){var r,a;return null!==(r=(a=t._itemsMap)[e])&&void 0!==r?r:a[e]={text:n,children:[],value:null,depth:0,expanded:ko.observable(!1)}};(e||[]).forEach((function(e){if(e.type&&e.type.toLocaleLowerCase()!==o.ManagementGroup){if(e.type.toLocaleLowerCase()===o.Subscription){if(e.ParentDisplayName)(a=r(e.ParentId,e.ParentDisplayName)).value&&a.value.childSubscriptionIds&&a.value.childSubscriptionIds.push(e.ResourceId);else n.push(e.ResourceId)}}else{var a,i=r(e.ResourceId,e.DisplayName);if(i.value={id:e.ResourceId,displayName:e.DisplayName,parentId:e.ParentId,childManagementGroupIds:[],childSubscriptionIds:[]},t._fetchedValues.push(i.value),i.depth=e.HierarchyLevel,e.ParentId)(a=r(e.ParentId,e.ParentDisplayName)).children.push(i),a.value.childManagementGroupIds.push(i.value.id),a.expanded(!0)}})),n.length&&c.warning("Subscriptions without parent MGs: [".concat(n.join(", "),"]"))},t}(r.ViewModel);t.ViewModel=f})),
define("Fx/Controls/ManagementGroupDropDown",["require","exports","FxInternal/Controls/ManagementGroupDropDown"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.ViewModel(e,t)})),r}})),
define("FxInternal/Controls/SearchBox",["require","exports","FxInternal/Controls/Base/Base"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;var r=function(e){function t(t,n){var r=e.call(this,t)||this;return r._msPortalFxValue=ko.observable(),n=n||{update:function(){return Q(0)}},r.controlType=93,r.defaultText="",r.submit=n.submit,r.update=n.update,r.hideSuggestions=MsPortalFx.initObservable(n.hideSuggestions,!1),r.placeHolderText=MsPortalFx.initObservable(n.placeHolderText,MsPortalFx.Resources.Strings.ViewModels.Controls.search),r.placeholder=r.placeHolderText,r.valueUpdateTimeout=MsPortalFx.initValue(n.valueUpdateTimeout,400),r.updateFrequency=r.valueUpdateTimeout,r.resultLimit=MsPortalFx.initObservable(n.resultLimit,5),r.disabled=MsPortalFx.initObservable(n.disabled,!1),r.ariaLabel=MsPortalFx.initObservable(n.ariaLabel,""),r.suppressSearchResultsAnnouncements=MsPortalFx.initObservable(n.suppressSearchResultsAnnouncements,!1),r._msPortalFxresetTrigger=MsPortalFx.initObservable(),r}return __extends(t,e),t.prototype.updateValue=function(e){this._msPortalFxValue(e)},t.prototype.reset=function(){var e=this._msPortalFxresetTrigger;return e()?e()():Q()},t}(n.ViewModel);t.ViewModel=r})),
define("Fx/Controls/SearchBox",["require","exports","FxInternal/Controls/SearchBox"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.ViewModel(e,t)})),r}})),
define("FxInternal/Controls/Splitter2",["require","exports","FxInternal/Controls/Base/Base"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pane=t.ViewModel=void 0;var r=MsPortalFx.initObservable,a=function(e){function t(t,n){var a=e.call(this,t)||this;return a.controlType=207,a.orientation=r(n&&n.orientation,0),a.primaryPane=r(n&&n.primaryPane),a.secondaryPane=r(n&&n.secondaryPane),a.primaryPaneSize=r(n&&n.primaryPaneSize,"50%"),a.primaryPane().collapsed.subscribeAndRun(a.lifetimeManager,(function(e){e&&a.secondaryPane().collapsed()&&a.secondaryPane().collapsed(!1)})),a.secondaryPane().collapsed.subscribeAndRun(a.lifetimeManager,(function(e){e&&a.primaryPane().collapsed()&&a.primaryPane().collapsed(!1)})),a}return __extends(t,e),t}(n.ViewModel);t.ViewModel=a;var i=function(e,t){var n=this;this.loading=ko.observable(!1),this.minSize=r(t&&t.minSize,0),this.ariaLabel=r(t&&t.ariaLabel,""),this.collapsible=r(t&&t.collapsible,!1),this.collapsed=r(t&&t.collapsed,!1),Q.isPromiseAlike(t.content)?(this.loading(!0),this.content=ko.observable(null),t.content.then(this.content).then((function(){return n.loading(!1)}))):ko.isObservable(t.content)?this.content=t.content:this.content=ko.observable(t.content)};t.Pane=i})),
define("Fx/Controls/Splitter2",["require","exports","FxInternal/Controls/Splitter2"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPane=t.create=void 0,t.create=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.ViewModel(e,t)})),r},t.createPane=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.Pane(e,t)})),r}})),
define("FxInternal/Controls/Toggle",["require","exports","FxInternal/Controls/Base/FormsBase"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;var r=MsPortalFx.initObservable,a=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.controlType=205,a.value=r(n.value,!1),a.valueText=r(n.valueText,null),a}return __extends(t,e),t}(n.ViewModel);t.ViewModel=a})),
define("Fx/Controls/Toggle",["require","exports","FxInternal/Controls/Toggle"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t){var r;return ko.ignoreDependencies((function(){r=new n.ViewModel(e,t)})),r}})),
define("Fx/Controls/TreeView",["require","exports","FxInternal/Controls/TreeView"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t){return n.create(e,t)}})),
define("FxHubs/Common/BrowseCuration",["require","exports","FxHubs/RpcEndPoints","Fx"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMergedAssetTypes=t.getResourceTypesCategorization=void 0;var a=MsPortalFx.Base.Constants,i=(0,r.memoizePromise)((function(){return Q(n.Curation.getSharedCurationEndpoint.invoke(FxImpl.Rpc.client,a.Shell,void 0))}));t.getResourceTypesCategorization=(0,r.memoizePromise)((function(){return Q(n.Curation.getResourceTypesCategorizationEndPoint.invoke(FxImpl.Rpc.client,a.Shell,null))})),t.getMergedAssetTypes=(0,r.memoizePromise)((function(){return e=function(e){return e.mergedAssetTypes||[]},Q(MsPortalFx.retryPromise((function(){return i().then(e)}),10,1e3));var e}))}));