define("@microsoft/azureportal-reactview/internal/SharedFormContext",["require","exports","@microsoft/azureportal-reactview/internal/ContextUtilities","@microsoft/azureportal-reactview/internal/ReactView"],(function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormStateExtractor=e.FormStepContext=void 0,e.FormStepContext=(0,a.createContext)(null,"FormStepContext");class o{constructor(){this._initialize(),r.ReactView.getInstance().onDispose((()=>{this._initialize()}))}static getInstance(){return o._instance||(o._instance=new o),o._instance}registerStatusBarError(t){this._formState.statusBarError=t}registerFormScopeState(t,e){this._formState.scope=t,this._formState.valueMapping=e}registerFormLabelState(t,e){this._formState.labelsGetMetadata[t]=e}registerStepState(t){this._formState.formTabMetadata=t}getFormState(){const t=this._getBladeInfo(),e=this._formState.formTabMetadata,a=this._getAllVisibleFormFieldsForCurrentTab();return{bladeInfo:t.bladeInfo,scope:t.scope,allTabs:e,allFormLabels:a}}_initialize(){this._formState={statusBarError:void 0,scope:void 0,formTabMetadata:[],labelsGetMetadata:{},valueMapping:{}}}_getAllVisibleFormFieldsForCurrentTab(){const t=[];return Object.getOwnPropertyNames(this._formState.labelsGetMetadata).forEach((e=>{const a=this._formState.labelsGetMetadata[e]();if(a.pivotIsActive){const r=a.metadata,o=this._formState.valueMapping[r.formLabelProps.displayValue],i=o&&r.value&&"object"==typeof r.value?r.value[o]:r.value;t.push({labelId:e,...r,value:i})}})),t}_getBladeInfo(){const t=this._formState.scope,e=document.getElementById("__bladeTitleMain"),a=e&&e.textContent,r=document.getElementById("__bladeSubtitle");return{bladeInfo:{title:a,subTitle:r&&r.textContent,statusBarError:this._formState.statusBarError},scope:t}}}e.FormStateExtractor=o}));