define("Viva.Controls/Controls/Lists/List1/Viva.ListView1.Component",["require","exports","Weave/DirectMode","Weave","MsPortalImpl/Weave/Components","FxInternal/Weave/Util","MsPortalImpl/Weave/Util","FxInternal/Weave"],(function(e,t,i,s,a,o,l,n){"use strict";function r(e,t){return t.listOrEmpty(e,t)}function d(e,t){const a=(0,n.toComputation)(e.itemViews),l=a.compose(o.isEmptyArray),r=a.compose(o.isNonEmptyArray);return i(s.Fragment,null,i("div",{className:{"fxs-display-none":l}},t.list(e,t)),i("div",{className:{"fxs-display-none":r}},t.empty(e,t)))}function c(e,t){const a=(0,n.toComputation)(e.itemViews),l=a.compose(o.isEmptyArray),r=a.compose(o.isNonEmptyArray);return i(s.Fragment,null,i(s.If,{condition:r,trueFn:()=>t.listItems(e,t)}),i(s.If,{condition:l,trueFn:()=>t.empty(e,t)}))}function u(e,t){return i("ul",{className:"azc-listView-list",role:(0,n.toComputation)(e.ariaRole),"aria-disabled":e.disabled,"aria-label":(0,n.toComputation)(e.ariaLabel)},p(e,t))}function p(e,t){const{disabled:a,tabIndex:o}=e;return i(s.ForEach,{collection:(0,n.toComputation)(e.itemViews),fn:({item:n,index:r,length:d})=>{if(n.metadata.disabled){const c=(0,l.aggregateContext)({disabled:a,tabIndex:o},{disabled:n.metadata.disabled}),u=c.disabled,p=c.tabIndex;return i(s.SetContext,{disabled:u,tabIndex:p},t.listItem({itemView:n,itemIndex:r,itemsTotal:d,itemDisabled:u,itemTabIndex:p,ariaItemRole:e.ariaItemRole},t))}return t.listItem({itemView:n,itemIndex:r,itemsTotal:d,itemDisabled:a,itemTabIndex:o,ariaItemRole:e.ariaItemRole},t)}})}function m(e,t,a,o){const{itemView:r,itemDisabled:d}=e,c=(0,n.toComputation)(r.item.url),u=(0,n.toComputation)(e.ariaItemRole);return i("li",{role:u,data:r,className:["azc-listView-item fxs-portal-hover azc-br-muted",(0,n.toValueOrComputation)(r.cssClass),{"fxs-display-none":(0,n.toComputation)(r.metadata.hidden)},o],title:(0,n.toComputation)(r.tooltip),"aria-label":(0,s.composeComputation)([(0,n.toComputation)(r.ariaLabel)],l.mapWhiteSpaceToUndefined),"aria-disabled":d,"aria-describedby":(0,n.toComputation)(r.ariaDescribedBy),"aria-hidden":(0,n.toValueOrComputation)(r.metadata.hidden,!1),...a||{}},i(s.If,{condition:c,concealmentBehavior:"remove",trueFn:()=>i("a",{className:"fxc-menu-item",tabindex:"-1",href:c},t.itemContainer(e,t)),falseFn:()=>t.itemContainer(e,t)}),i("span",{className:"fxs-display-none","aria-hidden":"true",id:(0,n.toComputation)(r.ariaDescriptionId)},(0,n.toComputation)(r.ariaDescription)))}function b(t,s){const o=s.item;return"string"==typeof o?i(a.Ko,{skipSanitization:!0,require:e,content:{htmlTemplate:o,viewModel:t.itemView.item}}):o(t.itemView.item,t.itemIndex,t.itemsTotal)}function g(e){return e.toString?e.toString():null}function h(e,t){const s=(0,n.toComputation)(e.ariaItemRole);return i("div",{className:"azc-listView-empty",role:s},(0,n.toValueOrComputation)(e.vm.noItemsMessage))}Object.defineProperty(t,"__esModule",{value:!0}),t.ListInner=void 0,t.ListInner=function(e){const{vm:t,state:a}=e;t.extensionTrigger("setItemViews",a.itemViews),t.extensionTrigger("beforeCreate");const o={body:r,listOrEmpty:d,list:u,listItems:p,listItemsOrEmpty:c,listItem:m,itemContainer:b,item:t.itemTsxFn||t.itemTemplate||g,empty:h};return t.extensionTrigger("afterSetTemplates_TSX",o),i(s.GetContext,{fn:e=>{const{disabled:n,tabIndex:r}=(0,l.aggregateContext)(e,t,a);return i(s.SetContext,{disabled:n,tabIndex:r},o.body({ariaLabel:a.ariaLabel,ariaRole:a.ariaRole,ariaItemRole:a.ariaItemRole,disabled:n,itemViews:a.itemViews,tabIndex:r,vm:t},o))}})}})),
define("MsPortalImpl.Controls/Controls/Lists/List1/ListView1.Component",["require","exports","Weave/DirectMode","Viva.Controls/Controls/Lists/List1/Viva.ListView1.Component"],(function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListViewInner=void 0,t.ListViewInner=function(e){return i(s.ListInner,{vm:e.state.vivaListViewModel,state:e.state.vivaListState})}})),
define("MsPortalImpl.Controls/Controls/Lists/List1/ListView1.InternalViewModel",["require","exports","FxInternal/Controls/ListView1"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;class s extends i.ViewModel{constructor(e,t,i,s){super(e,t,i={...i,shellUseOnly:!0}),this.itemTsxFn=s}}t.ViewModel=s})),
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.FocusableExtension.css",["module"],(function(e){"use strict";return{css:".azc-listView-focusable.azc-listView-outlined .azc-listView-item.fxs-portal-focus:hover{box-shadow:0 0 0 2px #db7500}",moduleId:e.id}})),
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.GroupableExtension.css",["module"],(function(e){"use strict";return{css:'.azc-listView-group{margin:0 0 20px}.azc-listView-group:last-child{margin:0}.azc-listView-groupheader{font-weight:600}.azc-listView-groupheader,.azc-listView-collapsible-groupheader{margin:0 5px 5px 0;font-size:13px;line-height:1.385}.azc-listView-collapsibleGroup>button.azc-listView-collapsible-groupheader{font-family:az_ea_font,"Segoe UI",az_font,system-ui,-apple-system,BlinkMacSystemFont,Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-weight:400;border:0;margin:0;width:100%;display:flex;cursor:pointer}.azc-listView-collapsibleGroup>button.azc-listView-collapsible-groupheader:hover{background-color:var(--colorControlBackgroundHover)}.azc-listView-collapsibleGroup>button.azc-listView-collapsible-groupheader:active{background-color:var(--colorControlBackgroundSelected)}.azc-listView-collapsibleGroup>button.azc-groupheader-selected[aria-expanded="false"]{background-color:var(--colorControlBackgroundSelected)}.azc-listView-collapsibleGroup>button.azc-groupheader-selected[aria-expanded="false"]:hover{background-color:var(--colorControlBackgroundSelectedHover)}div.azc-listView-list>div.azc-listView-collapsibleGroup.azc-group-quickaccess>button.azc-listView-collapsible-groupheader{display:none}div.azc-listView-list>div.azc-listView-collapsibleGroup.azc-group-quickaccess>ul{margin-left:0}',moduleId:e.id}})),
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.SelectableExtension.css",["module"],(function(e){"use strict";return{css:".azc-listView-selectable.azc-listView-outlined .azc-listView-item.fxs-portal-activated{box-shadow:0 0 0 2px #015cda;outline-offset:3px}",moduleId:e.id}})),
define("Viva.Controls/Controls/Lists/List1/Viva.ListView1",["require","exports","Viva.Controls/Util/Viva.TemplateEngine","Viva.Controls/Controls/Base/Viva.ExtensibleControl","MsPortalImpl.Controls/Controls/Base/Base","FxInternal/Css","_generated/Less/MsPortalImpl.Controls/Controls/Lists/ListView.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.FocusableExtension.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.GroupableExtension.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.SelectableExtension.css"],(function(e,t,i,s,a,o,l,n,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.WidgetUIState=t.ViewModel=t.Extension=void 0,(0,o.injectCss)(l,n,r,d,c);const u="azc-listView",p=MsPortalFx.getIdGenerator("azc-listView-itemDescriptionId-");class m extends s.Extension{setItemViews(e){this._itemViews=e}}t.Extension=m;class b extends s.ViewModel{constructor(e){super(e),s.initializePlugins(this.extensions),this.plugins=e.plugins||{},this.items=e.items||ko.observableArray(),this.filterText=e.filterText,this.filterKey=e.filterKey,this.events=e.events||MsPortalFx.noop,this.itemTemplate=e.itemTemplate,this.noItemsMessage=e.noItemsMessage,this.isMenu=e.isMenu,this.outlineStyle=e.outlineStyle||ko.observable(!0),this.itemTsxFn=e.itemTsxFn,this.ariaLabel=e.ariaLabel}}t.ViewModel=b;class g extends a.WidgetUIState{constructor(e){super(),this.widget$Disabled=ko.observable(!1),this.ariaRole=ko.observable("list"),this.ariaItemRole=ko.observable("listitem");const t=e.vm;this.ariaLabel=MsPortalFx.initObservable(t.ariaLabel),this.itemViews=t.items.map(this._ltm,((e,i)=>{const s=ko.ignoreDependencies((()=>{const s=this._createItemView(i,t);return t.filterText&&t.filterKey&&(s.metadata.hidden=ko.computed(e,[t.filterText,t.filterKey],((e,t)=>!!t&&!!e&&!~(ko.unwrap(s.item[t])||"").toLowerCase().indexOf(e.toLowerCase())))),s}));return e.registerForDispose((()=>{this._disposeItemView(s,t)})),s}))}_createItemView(e,t){const i=ko.pureComputed((()=>ko.unwrap(e.ariaDescription)?p():null)),s={item:e,cssClass:e.cssClass||ko.observable(""),ariaDescription:MsPortalFx.initObservable(e.ariaDescription),ariaLabel:MsPortalFx.initObservable(e.ariaLabel),tooltip:MsPortalFx.initObservable(e.tooltip),metadata:MsPortalFx.extend({disabled:ko.observable(!1)},e.metadata),ariaDescriptionId:i,ariaDescribedBy:ko.pureComputed((()=>{const e=t.extensionTrigger("computeItemDescribedByIds",s);return e.unshift(i()),e.join(" ").trim()||null}))};return t.extensionTrigger("initializeItemView",s,this.widget$Disabled),s}_disposeItemView(e,t){t.extensionTrigger("removeItemView",e)}}t.WidgetUIState=g;class h extends s.Widget{constructor(e,t,s,a){(s=s||{}).viewModelType=s.viewModelType||b,super(e,t,s,a),this.element.addClass(u),this.weaveContext?this.$disabled.subscribeAndRun(this.ltm,this.state.widget$Disabled):(this.templateEngine=new i.HtmlTemplateEngine,this.options.extensionTrigger("setItemViews",this.state.itemViews),this.options.extensionTrigger("beforeCreate"),this._setTemplates(),this.element.html("\x3c!-- ko template: 'body' --\x3e\x3c!-- /ko --\x3e")),this.options.outlineStyle.subscribeAndRun(this.ltm,(e=>this.element.toggleClass("azc-listView-outlined",e))),this.options.extensionTrigger("beforeAttachEvents"),this.options.extensionTrigger("afterAttachEvents"),this.weaveContext||this._bindDescendants(),this.options.extensionTrigger("afterCreate")}_initializePlugins(e){e.extensions.forEach((e=>{e.setInstance(this)}))}dispose(){this.options.extensionTrigger("beforeDestroy"),this.options.extensionTrigger("beforeDetachEvents"),this.options.extensionTrigger("afterDetachEvents"),this._cleanElement(u,"azc-listView-outlined"),super.dispose(),this.options.extensionTrigger("afterDestroy")}get itemViews(){return this.state.itemViews}_setTemplates(){this.templateEngine.setTemplate({body:"\x3c!-- ko template: {name:'listOrEmpty',data:{itemViews:$ctl.itemViews}} --\x3e\x3c!-- /ko --\x3e",listOrEmpty:"<div data-bind='visible:$data.itemViews().length'>\x3c!-- ko template: 'list' --\x3e\x3c!-- /ko --\x3e</div><div data-bind='visible:!$data.itemViews().length'>\x3c!-- ko template: 'empty' --\x3e\x3c!-- /ko --\x3e</div>",listItemsOrEmpty:"<div data-bind='visible:$data.itemViews().length'>\x3c!-- ko template: 'listItems' --\x3e\x3c!-- /ko --\x3e</div><div data-bind='visible:!$data.itemViews().length'>\x3c!-- ko template: 'empty' --\x3e\x3c!-- /ko --\x3e</div>",list:"<ul class='azc-listView-list' data-bind='attr:{role:$ctl.state.ariaRole,\"aria-disabled\":$disabled,\"aria-label\":$ctl.state.ariaLabel}'>\x3c!-- ko template: 'listItems' --\x3e\x3c!-- /ko --\x3e</ul>",empty:"<div class='azc-listView-empty' data-bind='text:$vm.noItemsMessage,attr:{role:$ctl.state.ariaItemRole}'></div>",listItem:"<li class='azc-listView-item fxs-portal-hover azc-br-muted' data-bind='disableAutoDispose:!!(ko.unwrap($data.item.url)),visible:!ko.unwrap($data.metadata.hidden)||($data.item.metadata && !ko.unwrap($data.item.metadata.hidden)),attr:{role:$ctl.state.ariaItemRole,title:$data.tooltip(),\"aria-label\":($data.ariaLabel()||\"\").trim()||undefined,\"aria-disabled\":$disabled,\"aria-describedby\":ariaDescribedBy,\"aria-hidden\":ko.unwrap($data.metadata.hidden)?\"true\":\"false\" }'>\x3c!-- ko if: $data.item.url --\x3e<a class='fxc-menu-item' tabindex='-1' data-bind='attr:{href:$data.item.url}'>\x3c!-- ko template: 'itemContainer' --\x3e\x3c!-- /ko --\x3e</a>\x3c!-- /ko --\x3e\x3c!-- ko ifnot: $data.item.url --\x3e\x3c!-- ko template: 'itemContainer' --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e<span class='fxs-display-none' aria-hidden='true' data-bind='text:ariaDescription,attr:{id:ariaDescriptionId}'></span></li>",listItems:"\x3c!-- ko foreach: $data.itemViews --\x3e\x3c!-- ko context: {$disabled:metadata.disabled} --\x3e\x3c!-- ko template: 'listItem' --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e",itemContainer:"\x3c!-- ko template: {name:'item',data:item} --\x3e\x3c!-- /ko --\x3e",item:this.options.itemTemplate||"\x3c!-- ko vtext: $data.toString?$data.toString():null --\x3e\x3c!-- /ko --\x3e"}),this.templateEngine.getHtmlTemplate("listItem").addAttribute("li","data-bind",["keyedCss:{ listItem: $data.cssClass}"]),this.options.extensionTrigger("afterSetTemplates",this.templateEngine)}}t.Widget=h})),
define("Viva.Controls/Controls/Lists/List1/Viva.ListView1.Focusable",["require","exports","MsPortalImpl/Base/JQueryHelper","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/List1/Viva.ListView1","WeaveDOM/DirectRender/DataAttribute","FxInternal/Weave/Util","MsPortalImpl/Weave/Util","FxInternal/Weave"],(function(e,t,i,s,a,o,l,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FocusableExtension=t.TabMode=void 0;const d=window,c=".azc-listView-item",u=".fxc-menu-item",p=c+"[data-listView-focusable=true]:not([aria-disabled=true])",m=u+"[data-listView-focusable=true]:not([aria-disabled=true])",b=".azc-listView-collapsible-groupheader[data-listView-focusable=true]",g=MsPortalFx.disposeDisposable;var h;function v(e,t,i){const a=e.get(0);0===e.find(":focus").length&&(t&&s.setFocusToFirstFocusableChild(e)||(i?(0,n.tryFocusAfterChangePropagation)(a):a.focus()))}function x(e){e.classList.contains("azc-listView-groupable")&&i.filterVisible(e,p+", "+b);const t=i.filterVisible(e,`${p}, ${b}`);return t.length?t:i.filterVisible(e,`${m}, ${b}`)}function f(e){return!(e instanceof HTMLElement)}!function(e){e[e.LastFocused=0]="LastFocused",e[e.All=1]="All"}(h||(t.TabMode=h={}));class w extends a.Extension{constructor(e){super(),this._disposables=[],this._activeItem=ko.observable(),this._options=e=e||{},e.tabMode=e.tabMode||h.LastFocused}get options(){return this._options}afterCreate(){ko.computed(this.ltm,(()=>{const e=this._itemViews();let t=this._activeItem();if(t&&f(t)){const i=t.metadata;e.includes(t)&&![i.disabled,i.hidden].some(ko.utils.peekObservable)||this._activeItem(t=null)}const i=e=>e&&(e.hidden&&e.hidden()||e.disabled&&e.disabled());if(!t)for(let s=0;s<e.length;s++){const a=e[s];if(a&&a.metadata){const e=a.metadata;if(e.selected&&e.selected()&&!i(e)){this._setActiveItem(t=a);break}}}if(!t){const e=x(this._widget.element[0])[0];e&&this._setActiveItem(t=this._widget.weaveContext?(0,o.getElementData)(e):ko.dataFor(e))}if(t&&f(t)){const e=t.metadata;[e.disabled,e.hidden].forEach(ko.unwrap)}})).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}afterSetTemplates(e){e.getHtmlTemplate("listItem").addAttribute("li","data-bind",["attr:{'data-listView-focusable':true}","attr:{tabindex:metadata.tabIndex}, keyedCss:{ listTabIndex: $disabled()?'':'fxs-portal-focus'}"])}afterSetTemplates_TSX(e){const t=e.listItem;e.listItem=(e,i,s,a)=>((s=s||{}).tabindex=(0,r.toComputation)(e.itemView.metadata.tabIndex),(a=a||[]).push({"fxs-portal-focus":e.itemDisabled.compose(l.negation)}),s["data-listView-focusable"]="true",t(e,i,s,a))}initializeItemView(e,t){const i=e.metadata;i.focused||(i.focused=ko.observable(!1)),i.tabIndex=ko.pureComputed((()=>{const s=this.options.tabMode,a=t(),o=e.metadata.disabled(),l=i.focused();let n=null;return!(s===h.All||s===h.LastFocused&&l)||a||o||(n=0),n}))}getOrder(){return 10}afterAttachEvents(){const e=this;this._disposables.push(this._widget.element.setEvents(["click.azcListView.focusable",p,function(t){const i=$(this).closest(c);e._focusItem(i,e._widget.weaveContext?(0,o.getElementData)(i[0]):ko.dataFor(i[0]),!0,t)}],["focusin.azcListView.focusable",p,function(t){const i=$(this).closest(c);e._setActiveItem(e._widget.weaveContext?(0,o.getElementData)(i[0]):ko.dataFor(i[0]))}],["keydown.azcListView.focusable",function(t){let i,s=$(t.target).filter(c);if(s.length||(s=$(t.target).filter(u)),s.length||(s=$(t.target).filter(b)),1===s.length){switch(t.which){case 38:i=e._findPreviousAboveFocusable(s),t.preventDefault();break;case 37:i=e._findPreviousFocusable(s),t.preventDefault();break;case 40:i=e._findNextBelowFocusable(s),t.preventDefault();break;case 39:i=e._findNextFocusable(s),t.preventDefault()}i&&i.length>0&&e._focusItem(i,e._widget.weaveContext?(0,o.getElementData)(i[0]):ko.dataFor(i[0]),!1,t)}}]))}beforeDestroy(){g(this._disposables),this._disposables=[],this._activeItem(null),this._widget.element.removeClass("fxs-portal-focus")}getName(){return w.Name}_findPreviousFocusable(e){const t=e[0],i=x(this._widget.element[0]);let s;if(t)for(s=i.length-1;s>=0;s--)if(t===i[s]&&s>0)return $(i[s-1]);return $(i[i.length-1])}_findPreviousAboveFocusable(e){const t=e[0],i=x(this._widget.element[0]);let s,a,o,l,n,r;if(t)for(n=t.offsetTop,r=t.offsetLeft,s=0;s<i.length;s++){const e=n-i[s].offsetTop;if(e>0&&(!a||e<=l)){const t=Math.abs(i[s].offsetLeft-r);(!a||e<l||t<o)&&(a=$(i[s]),o=t,l=e)}}return a||this._findPreviousFocusable(e)}_findNextFocusable(e){const t=e[0],i=x(this._widget.element[0]);let s;if(t)for(s=0;s<i.length;s++)if(t===i[s]&&s<i.length-1)return $(i[s+1]);return $(i[0])}_findNextBelowFocusable(e){const t=e[0],i=x(this._widget.element[0]);let s,a,o,l,n,r;if(t)for(n=t.offsetTop,r=t.offsetLeft,s=0;s<i.length;s++){const e=i[s].offsetTop-n;if(e>0&&(!a||e<=l)){const t=Math.abs(i[s].offsetLeft-r);(!a||e<l||t<o)&&(a=$(i[s]),o=t,l=e)}}return a||this._findNextFocusable(e)}_focusItem(e,t,i,a){const o=$(e);let l;t&&o[0]!==d.document.activeElement?(this._setActiveItem(t),v(o,i,!!this._widget.weaveContext),l={focused:t.item},this._widget.trigger("itemFocus",s.cloneEvent(a,"itemFocus"),l),this._widget.options.events("focus",l)):"BUTTON"===o[0].tagName&&(this._setActiveItem(o[0]),v(o,i,!!this._widget.weaveContext),l={focused:o[0]},this._widget.trigger("itemFocus",s.cloneEvent(a,"itemFocus"),l),this._widget.options.events("focus",l))}_setActiveItem(e){const t=this._activeItem();e&&e!==t&&(t&&f(t)&&t.metadata.focused(!1),this._activeItem(e),f(e)&&e.metadata.focused(!0))}}t.FocusableExtension=w,w.Name="azc-listView-focusable"})),
define("Viva.Controls/Controls/Lists/List1/Viva.ListView1.Selectable",["require","exports","Weave/DirectMode","Viva.Controls/Controls/Lists/List1/Viva.ListView1.Focusable","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/List1/Viva.ListView1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","Weave","MsPortalImpl/Weave/Components","WeaveDOM/DirectRender/DataAttribute","FxInternal/Weave/Util","FxInternal/Weave"],(function(e,t,i,s,a,o,l,n,r,d,c,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectableExtension=t.SelectionMode=void 0;const m=window,b="attr:{'data-listView-selectable':true}",g=".azc-listView-item",h=g+"[data-listView-selectable=true]:not([aria-disabled=true])";var v;!function(e){e[e.Single=0]="Single",e[e.Multiple=1]="Multiple"}(v||(t.SelectionMode=v={}));class x extends o.Extension{constructor(e){super(),this._options=$.extend(this._getDefaultOptions(),e),this._selectedIndicatorId=MsPortalFx.getUniqueId()}get options(){return this._options}getSelected(){return this.options.selectedItems()}select(e,t,i){this._select(e,t,i)}unselect(e){e.metadata.selected(!1),this.options.selectedItems.remove(e.item)}afterSetTemplates(e){this.options.selectionMode===v.Multiple&&e.getHtmlTemplate("list").addAttribute("ul","aria-multiselectable",["true"]),this.options.listRole?e.getHtmlTemplate("listItem").addAttribute("li","data-bind",[b,"keyedCss: {listSelected: $vm.plugins.selectable._itemSelected(metadata) ? 'fxs-portal-activated' : ''}, attr:{ 'aria-current': $vm.plugins.selectable._itemSelected(metadata).toString() }"]):e.getHtmlTemplate("listItem").addAttribute("li","data-bind",[b,"keyedCss: {listSelected: $vm.plugins.selectable._itemSelected(metadata) ? 'fxs-portal-activated' : ''}, attr:{ 'aria-selected': $vm.plugins.selectable._itemSelected(metadata).toString() }"]),this.options.selectedOverlayTemplate&&e.setTemplate({itemContainer:"\x3c!-- ko template: {name:'item',data:item} --\x3e\x3c!-- /ko --\x3e\x3c!-- ko if: metadata.selected() --\x3e\x3c!-- ko template: 'selectedOverlay' --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e",selectedOverlay:this.options.selectedOverlayTemplate})}afterSetTemplates_TSX(t){const s=t.listItem;if(t.listItem=(e,t,i,a)=>((a=a||[]).push({"fxs-portal-activated":(0,p.toComputation)(e.itemView.metadata.selected)}),i=i||{},this.options.listRole?i["aria-current"]=(0,p.toComputation)(e.itemView.metadata.selected):i["aria-selected"]=(0,p.toComputation)(e.itemView.metadata.selected),i["aria-describedby"]=(0,p.toComputation)(e.itemView.ariaDescribedBy,u.emptyStringComputation),i["data-listView-selectable"]="true",s(e,t,i,a)),this.options.selectedOverlayTemplate){const s=t.itemContainer;t.itemContainer=(t,a)=>i(r.Fragment,null,s(t,a),i(r.If,{condition:(0,p.toComputation)(t.itemView.metadata.selected),concealmentBehavior:"remove",trueFn:()=>i(d.Ko,{skipSanitization:!0,require:e,content:{htmlTemplate:this.options.selectedOverlayTemplate,viewModel:t.itemView.item}})}))}}initializeItemView(e){const t=e.metadata,i=this.options.selectedItems.peek().indexOf(e.item)>=0;t.selected?t.selected(i):t.selected=ko.observable(i)}removeItemView(e){this.options.selectedItems.remove(e.item)}afterAttachEvents(){const e=this,t=function(t){e._changeSelection(this,t,n.isCtrlOrCommandOnly(t))};this._ltm.registerForDispose(this._widget.element.setEvents(["click.azcListView.selectable",h,t],["dblclick.azcListView.selectable",h,t],["keydown.azcListView.selectable",function(t){13!==t.which&&32!==t.which||$(t.target).is(g)&&t.target===m.document.activeElement&&(e._changeSelection(t.target,t,n.isCtrlOrCommandOnly(t)),t.preventDefault())}]))}afterCreate(){MsPortalFx.isNullOrUndefined(this._options.selectionMode)||this._options.listRole||(this._widget.state.ariaRole("listbox"),this._widget.state.ariaItemRole("option")),this.options.selectedItems.subscribeArrayChanges(this._ltm,(e=>{const t=f(this._itemViews,e);t&&this.select(t,!0,!1)}),(e=>{const t=f(this._itemViews,e);t&&this.unselect(t)})),this._widget.element.append($(FxImpl.createElement("div",{class:"fxs-hide-accessible-label","aria-hidden":"true",id:this._selectedIndicatorId})).text(l.Controls.ListView.selected)),this._itemViews().forEach((e=>{e.metadata.selected(this.options.selectedItems.indexOf(e.item)>=0)}))}getOrder(){return 20}getDependencies(){return[new s.FocusableExtension]}beforeDestroy(){this._widget.element.removeClass("fxs-portal-activated").attr({"aria-expanded":null,"aria-describedby":null})}getName(){return x.Name}_changeSelection(e,t,i){const s=this._widget.weaveContext?(0,c.getElementData)(e):ko.dataFor(e);if(s.item.hasOwnProperty("url")&&i)return;if(t.target instanceof Element&&(t.target.classList.contains("fxc-menu-favoriteicon")||t.target.parentElement.classList.contains("fxc-menu-favoriteicon")||t.target.parentElement.parentElement.classList.contains("fxc-menu-favoriteicon")))return;const o=this._select(s,i,i);this._widget.trigger("itemSelect",a.cloneEvent(t,"itemSelect"),o),this._widget.options.events("select",o)}_getDefaultOptions(){return{selectionMode:v.Single,selectedItems:ko.observableArray(),selectedOverlayTemplate:null}}_select(e,t,i){let s;const a={selected:[],unselected:[]};return this.options.selectedItems().forEach((o=>{const l=o===e.item;let n;if(s=s||l,n=t&&this.options.selectionMode===v.Multiple&&!l||l&&!i,n)l&&e.metadata.selected(!0);else{const e=f(this._itemViews,o);e&&e.metadata.selected(n),a.unselected.push(o)}})),a.unselected.length&&this.options.selectedItems.removeAll(a.unselected),s||(e.metadata.selected(!0),a.selected.push(e.item),this._options.selectedItems.push(e.item)),a}computeItemDescribedByIds(e){return e.metadata.selected()?this._selectedIndicatorId:""}_itemSelected(e){return!(this._widget.$disabled()||!e.selected())}}function f(e,t){return MsPortalFx.find(e(),(e=>e.item===t))}t.SelectableExtension=x,x.Name="azc-listView-selectable"})),
define("Viva.Controls/Controls/Lists/List1/Viva.ListView1.ContextMenu",["require","exports","Viva.Controls/Controls/Lists/List1/Viva.ListView1.Selectable","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/List1/Viva.ListView1","MsPortalImpl/Base/Base.KeyboardHelper","WeaveDOM/DirectRender/DataAttribute"],(function(e,t,i,s,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuExtension=void 0;class n extends a.Extension{get options(){return{}}afterAttachEvents(){const e=this._widget;this._ltm.registerForDispose(e.element.setEvents(["contextmenu.azcListView.contextMenu",".azc-listView-item[data-listView-selectable=true]:not([aria-disabled=true])",function(t){if(3===t.which&&(o.isCtrlOrCommandOnly(t)||e.element.hasClass("fxc-menu-grid")))return;const i=e.weaveContext?(0,l.getElementData)(this):ko.dataFor(this);!i.metadata.selected()&&e.options.extensionTrigger("select",i),e.trigger("listViewContextMenu",s.cloneEvent(t,"listViewContextMenu"),i,t.target)}]))}getDependencies(){return[new i.SelectableExtension]}getName(){return n.Name}}t.ContextMenuExtension=n,n.Name="azc-listView-contextMenu"})),
define("Viva.Controls/Controls/Lists/List1/Viva.ListView1.Groupable",["require","exports","Weave/DirectMode","Viva.Controls/Controls/Lists/List1/Viva.ListView1","Weave","MsPortalImpl/Weave/Components","FxInternal/Weave/Util","FxInternal/Weave","Fx/Experimentation","MsPortalImpl/Resources/ImplScriptResources"],(function(e,t,i,s,a,o,l,n,r,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsibilityEnabled=t.GroupableExtension=void 0;const c="<div class='azc-listView-groupheader-text' data-bind='text:$vm.plugins.groupable.valueOrDefaultHeader(value)'></div>";function u(e){return MsPortalFx.isNullOrUndefined(e)?e:ko.toJS(e)}function p(e){const t=u(e);return null!=t&&t.toString&&t.toString()||""}class m extends s.Extension{constructor(e){super(),this._groupItemViews={},this.groupIdForUnassigned=MsPortalFx.getUniqueId(),this._options=MsPortalFx.extend({groupKey:ko.observable(""),headerTemplate:c,groups:null,noGroupLabel:"",noGroupAriaLabel:"",order:ko.observable(0),sortFunction:null,headerTsxFn:null,searchState:ko.observable(0)},e),this._groups=ko.observableArray([])}get groups(){return this._groups()}get options(){return this._options}afterSetTemplates(e){e.setTemplate({body:"\x3c!-- ko if: $ctl.itemViews().length > 0 --\x3e<div data-bind='attr:{role:$ctl.state.ariaRole}'>\x3c!-- ko foreach: $vm.plugins.groupable.groups --\x3e<div role=\"group\" class='azc-listView-group' data-bind='attr: {\"aria-label\":$vm.plugins.groupable.getGroupAriaLabel($data)}, visible: $vm.plugins.groupable.groupHasVisibleItems($data.groupMembers = $vm.plugins.groupable.getItemViewsByGroup(value))'><div class='azc-listView-groupheader azc-br-muted' data-bind='attr:{id:groupHeaderId}'>\x3c!-- ko template: 'groupHeaderTemplate' --\x3e\x3c!-- /ko --\x3e</div>\x3c!-- ko template: {name:'listItemsOrEmpty',data:{itemViews:$data.groupMembers}} --\x3e\x3c!-- /ko --\x3e</div>\x3c!-- /ko --\x3e\x3c!-- ko if: $vm.plugins.groupable.getItemViewsByGroup('')().length --\x3e<div role=\"group\" class='azc-listView-group' data-bind='attr:{\"aria-label\":$vm.plugins.groupable.getGroupAriaLabel()}'><div class='azc-listView-groupheader azc-br-muted' data-bind='attr:{id:$vm.plugins.groupable.groupIdForUnassigned}'>\x3c!-- ko template: {name:'noGroupHeaderTemplate'} --\x3e\x3c!-- /ko --\x3e</div>\x3c!-- ko template: {name:'listItems',data:{itemViews:$vm.plugins.groupable.getItemViewsByGroup('')}} --\x3e\x3c!-- /ko --\x3e</div>\x3c!-- /ko --\x3e</div>\x3c!-- /ko --\x3e\x3c!-- ko ifnot: $ctl.itemViews().length --\x3e\x3c!-- ko template: 'empty' --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e",noGroupHeaderTemplate:"<div class='azc-listView-groupheader-text' data-bind='text:$vm.plugins.groupable.options.noGroupLabel'></div>",groupHeaderTemplate:this.options.headerTemplate||c})}afterSetTemplates_TSX(e){e.body=(e,t)=>{const s=(0,a.composeComputation)([(0,n.toComputation)(e.itemViews)],l.isEmptyArray),o=(0,a.composeComputation)([(0,n.toComputation)(e.itemViews)],l.isNonEmptyArray),r=this.getItemViewsByGroup(""),c=(0,a.composeComputation)([(0,n.toComputation)(r)],l.isNonEmptyArray),u=this._getGroupAriaLabelComputation(null);return i(a.Fragment,null,i(a.If,{condition:o,concealmentBehavior:"remove",trueFn:()=>i(a.GetContext,{fn:s=>i("div",{className:"azc-listView-list",role:(0,n.toComputation)(e.ariaRole),"aria-disabled":e.disabled,"aria-label":(0,n.toComputation)(e.ariaLabel)},i(a.ForEach,{collection:(0,n.toComputation)(this._groups),fn:({item:o})=>{const l=this.getItemViewsByGroup(o.value),r=this._getGroupAriaLabelComputation(o),c=o.groupHeaderId+"-list",u=i("div",{className:"azc-listView-groupheader azc-br-muted",id:o.groupHeaderId},g(o,this.options,e.vm)),p=i("button",{type:"button",onClick:()=>{this.isGroupCollapsible(o)&&(h("collapseOrExpandHeaderClick",o.isCollapsed()?"expand":"collapse",{headerName:o.value,headerId:o.groupNameId}),this.toggleCollapsedStateOfGroup(o))},className:["azc-listView-collapsible-groupheader","azc-br-muted","azc-listView-groupheader",{"azc-groupheader-selected":(0,n.toComputation)(this.options.selectedGroup,(0,a.makeConstantComputation)(void 0)).compose((e=>e===o.value))}],id:o.groupHeaderId,"aria-controls":c,"aria-label":d.Controls.ListView.collapsibleGroupHeaderAriaLabel.format(o.value),"aria-expanded":(0,n.toComputation)(o.isCollapsed).compose((e=>this.isGroupCollapsible(o)?!e:void 0)),"data-listView-focusable":this.isGroupCollapsible(o)},g(o,this.options,e.vm)),m=t.listItemsOrEmpty({ariaLabel:e.ariaLabel,ariaRole:e.ariaRole,ariaItemRole:e.ariaItemRole,disabled:e.disabled,itemViews:l,tabIndex:e.tabIndex,vm:e.vm},t);return i(a.PromiseFragment,{"data-odebug":"p19",promise:v(s.diContainer).then((e=>e?i("div",{role:"listitem",className:["azc-listView-group",{"fxs-display-none":(0,n.toComputation)(ko.computed(this.ltm,(()=>!this.groupHasVisibleItems(l))))},"azc-listView-collapsibleGroup",{"azc-group-quickaccess":!this.isGroupCollapsible(o)},o?.cssClasses?.join(" ")],"aria-label":r},i(a.Fragment,null,p,i("ul",{id:c,"aria-label":d.Controls.ListView.collapsibleGroupAriaLabel.format(this.getGroupAriaLabel(o)),className:{"fxs-display-none":(0,n.toComputation)(o.isCollapsed)}},m))):i("div",{role:"listitem",className:["azc-listView-group",{"fxs-display-none":(0,n.toComputation)(ko.computed(this.ltm,(()=>!this.groupHasVisibleItems(l))))}],"aria-label":r},i(a.Fragment,null,u,i("ul",null,m)))))})}}),i(a.If,{condition:c,concealmentBehavior:"remove",trueFn:()=>i("div",{role:"listitem",className:"azc-listView-group","aria-label":u},i("div",{className:"azc-listView-groupheader azc-br-muted",id:this.groupIdForUnassigned},i("div",{className:"azc-listView-groupheader-text"},this.options.noGroupLabel)),i("ul",null,t.listItems({ariaLabel:e.ariaLabel,ariaRole:e.ariaRole,ariaItemRole:e.ariaItemRole,disabled:e.disabled,itemViews:r,tabIndex:e.tabIndex,vm:e.vm},t)))}))})}),i(a.If,{condition:s,concealmentBehavior:"remove",trueFn:()=>t.empty(e,t)}))},this.options.selectedGroup?.subscribeAndRun(this._ltm,(e=>{this._collapseStateMap.get(0).get(e)?.(!1)}))}beforeCreate(){const e=ko.computed(this.ltm,(()=>{const e=this.options.groups?.(),t=e||function(e,t){const i=[],s={};return t.forEach((t=>{t.item[e]===MsPortalFx.Assets.QuickAccessGroupId&&(t.item[e]=MsPortalFx.Resources.Strings.Part.SettingList.Group.quickAccess);const a=t.item[e],o=p(a);o&&!s[o]&&(i.push({value:u(a)}),s[o]=!0)})),i}(this.options.groupKey(),this._itemViews());return this._collapseStateMap=new Map,this._collapseStateMap.set(0,new Map),t.forEach((e=>{e.groupHeaderId=MsPortalFx.getUniqueId(),e.isCollapsed=ko.pureComputed({read:()=>!!this.isGroupCollapsible(e)&&this._collapseStateMap.get(this.options.searchState())?.get(e.value)?.(),write:t=>{if(this.isGroupCollapsible(e)){if(this._collapseStateMap.get(this.options.searchState())?.get(e.value)?.(t),ko.isObservable(this.options.collapseStatusMap)){const i=this.options.collapseStatusMap?.();i[e.value]=t,this.options.collapseStatusMap?.(i)}this.options.collapseOrExpandListener?.(e.value,t)}}})})),function(e,t,i,s){e().forEach((e=>{let a;const o=p(e.item[i]);o&&(a=MsPortalFx.find(t,(e=>o===p(e.value)))),e.metadata.groupId(a?a.value:""),e.metadata.groupAriaDescribedById(a?a.groupHeaderId:s)}))}(this._itemViews,t,this.options.groupKey(),this.groupIdForUnassigned),function(e,t,i){let s=[];if(0===t)s=e;else{const a=e.map((e=>u(e.value)));i?a.sort(i):a.sort(),2===t&&a.reverse(),a.forEach((t=>{const i=p(t);e.forEach((e=>{i===p(e.value)&&s.push(e)}))}))}return s}(t,this.options.order(),this.options.sortFunction)})).extend({deferred:!0}),t=ko.isObservable(this.options.collapseStatusMap)?this.options.collapseStatusMap:ko.observable(this.options.collapseStatusMap);ko.computed(this.ltm,[e,t],((e,t)=>{e.forEach((e=>{this._collapseStateMap.get(0).has(e.value)?this._collapseStateMap.get(0).get(e.value)(t?.[e.value]??this.options.isCollapsedByDefault):this._collapseStateMap.get(0).set(e.value,ko.observable(t?.[e.value]??this.options.isCollapsedByDefault)),this.isGroupCollapsible(e)||this._collapseStateMap.get(0).get(e.value)(!1)}))})),ko.reactor(this.ltm,e,(e=>this._groups(e))),this.options.searchState.subscribeAndRun(this.ltm,(e=>{0===e?this._collapseStateMap.set(1,void 0):1===e&&(this._collapseStateMap.set(1,new Map),this.groups.forEach((e=>{this._collapseStateMap.get(1).set(e.value,ko.observable(!1))})))}))}beforeDestroy(){MsPortalFx.disposeDisposable(this._groups,this._groupsComputed)}initializeItemView(e){const t=e.metadata;t.groupId||(t.groupId=ko.observable("")),t.groupAriaDescribedById||(t.groupAriaDescribedById=ko.observable(""))}getItemViewsByGroup(e){if(MsPortalFx.isNullOrUndefined(e))throw new Error("groupId cannot be null or undefined when fetching group items.");const t=this._groupItemViews;this._groupsComputed||(this._groupsComputed=ko.computed(this.ltm,(()=>{const e=this._itemViews();e.forEach((e=>ko.unwrap(e.metadata.groupId))),ko.ignoreDependencies((()=>{const i={};Object.keys(t).forEach((e=>i[e]=[])),e.forEach((e=>{const t=p(e.metadata.groupId);(i[t]||(i[t]=[])).push(e)})),Object.keys(i).forEach((e=>t[e]?t[e](i[e]):t[e]=ko.observableArray(i[e])))}))})).extend({deferred:!0}));const i=p(e);return t[i]||(t[i]=ko.observableArray())}groupHasVisibleItems(e){return!!e().filter((e=>!ko.unwrap(e.metadata.hidden))).length}getGroupAriaLabel(e){e=e||{value:null};return(ko.unwrap(e.ariaLabel)||"").trim()||(MsPortalFx.isNullOrUndefined(e.value)?this.options.noGroupAriaLabel||this.options.noGroupLabel:e.value)||void 0}get shouldCollapseOrExpand(){return ko.pureComputed((()=>this._groups().map((e=>e.isCollapsed())).some((e=>e))?"expand":"collapse"))}toggleCollapseStatusOfAllGroupHeaders(){"expand"===this.shouldCollapseOrExpand()?(this.groups.forEach((e=>e.isCollapsed(!1))),this.options.collapseOrExpandAllListener?.(!1),h("collapseOrExpandAllClick","expandAll",{})):(this.groups.forEach((e=>e.isCollapsed(!0))),this.options.collapseOrExpandAllListener?.(!0),h("collapseOrExpandAllClick","collapseAll",{}))}_getGroupAriaLabelComputation(e){return e=e||{value:null},(0,a.composeComputation)([(0,n.toValueOrComputation)(e.ariaLabel,l.emptyStringComputation)],(t=>(t||"").trim()||(MsPortalFx.isNullOrUndefined(e.value)?this.options.noGroupAriaLabel||this.options.noGroupLabel:e.value)||void 0))}computeItemDescribedByIds(e){return e.metadata.groupAriaDescribedById()}valueOrDefaultHeader(e){return b(e,this.options)}getName(){return m.Name}toggleCollapsedStateOfGroup(e){e.isCollapsed(!e.isCollapsed())}isGroupCollapsible(e){return!this.options.nonCollapsibleGroups?.some((t=>void 0!==t.groupNameId&&t.groupNameId===e.groupNameId||ko.unwrap(t.value)===ko.unwrap(e.value)))}}function b(e,t){return MsPortalFx.isNullOrUndefined(e)?t.noGroupLabel:e}function g(t,s,a){return s.headerTsxFn?s.headerTsxFn(t):s.headerTemplate?s.headerTemplate===c?i("div",{className:"azc-listView-groupheader-text"},b(t.value,a.plugins.groupable.options)):i(o.Ko,{skipSanitization:!0,require:e,content:{htmlTemplate:s.headerTemplate,viewModel:t}}):i("div",{className:"azc-listView-groupheader-text"},b(t.value,s))}function h(e,t,i){MsPortalFx.Base.Diagnostics.Telemetry.trace({source:"ListView1.Groupable",action:e,actionModifier:String(t),data:i})}async function v(e){const t=await e.get(r.Experimentation).shellAssignments.whenAvailable();return t.getBooleanValue("areMenusCollapsible")||t.getBooleanValue("FavoritesInMenu")||MsPortalFx.isFeatureEnabled("FavoritesInMenu")}t.GroupableExtension=m,m.Name="azc-listView-groupable",t.isCollapsibilityEnabled=v})),
define("_generated/Less/MsPortalImpl.Controls/Controls/Lists/ListView1.css",["module"],(function(e){"use strict";return{css:'.fxc-listView.azc-listView.azc-listView-selectable .azc-listView-item[aria-current="true"],.fxc-listView.azc-listView.azc-listView-selectable .azc-listView-item[aria-selected="true"]{position:relative}.fxc-listView.azc-listView.azc-listView-selectable.fxc-list-activateonselected .azc-listView-list>.azc-listView-item:not([aria-disabled="true"]):hover{cursor:pointer}',moduleId:e.id}})),
define("MsPortalImpl.Controls/Controls/Lists/List1/ListView1",["require","exports","Weave/DirectMode","MsPortalImpl.Controls/Controls/Base/Loadable","Viva.Controls/Controls/Lists/List1/Viva.ListView1","Viva.Controls/Controls/Lists/List1/Viva.ListView1.Selectable","Viva.Controls/Controls/Lists/List1/Viva.ListView1.Groupable","Viva.Controls/Controls/Lists/List1/Viva.ListView1.ContextMenu","MsPortalImpl.Controls/Controls/Base/Base","MsPortalImpl.Controls/Controls/Lists/List1/ListView1.Component","MsPortalImpl.Controls/Controls/Lists/List1/ListView1.InternalViewModel","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","Weave","FxInternal/Css","_generated/Less/MsPortalImpl/Parts/Parts.Properties.css","_generated/Less/MsPortalImpl.Controls/Controls/Lists/ListView1.css","FxInternal/Controls/ListView1"],(function(e,t,i,s,a,o,l,n,r,d,c,u,p,m,b,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListView=t.Widget=t.InnerTsxComponent=t.WidgetUIState=void 0,(0,m.injectCss)(b,g);var v=h.Extensions;const x="fxc-listView";class f extends r.WidgetUIState{constructor(t){super();const i=t.vm,s=i.extensions,d=s&v.Selectable,p=this._ltm,m=i.extensionOptions||{},b=m.selectable,g=t.isTrusted||(0,r.isViewModelTrusted)(i);let x,f;s&v.Filterable&&m.filterable&&(x=m.filterable.filterText,f=m.filterable.filterKey);const w=[],V={};if(d){const e=ko.observableArray();if(b){const t=b.selection;if(t){let i;const s=(e,s)=>{const a=MsPortalFx.find(t.selectableItems(),(t=>t.data===e));a&&(i=!0,a.isSelected(s),i=!1,b.activateOnSelected&&a.isActivated(s))};e.subscribeArrayChanges(p,(e=>s(e,!0)),(e=>s(e,!1))),ko.computed(p,(()=>{t.selectableItems().forEach((t=>{const s=t.isSelected();if(!i){const i=e.peek().indexOf(t.data);s&&i<0?e.push(t.data):!s&&i>=0&&e.splice(i,1)}}))}))}b.selectionMode===h.SelectionMode.Single&&(e.subscribe(p,(e=>{e&&e[0]&&b.selectedItem(e[0])})),b.selectedItem.subscribeAndRun(p,(t=>{if(t){const i=e();1===i.length&&i[0]===t||e.splice(0,i.length,t)}else e.removeAll()})))}w.push(V.selectable=new o.SelectableExtension(b&&{selectionMode:b.selectionMode,selectedItems:e,listRole:b.listRole}))}if(s&v.ContextMenu){if(!d)throw new Error("The list view context menu extension depends on the selection extension, but selection is not enabled.");w.push(new n.ContextMenuExtension)}s&v.Groupable&&w.push(V.groupable=new l.GroupableExtension(m.groupable&&{groupKey:m.groupable.groupKey,groups:m.groupable.groups,headerTemplate:g?m.groupable.headerTemplate:(0,u.sanitizeHTML)(m.groupable.headerTemplate,e,t.sanitizationContext).sanitizedMarkup,noGroupLabel:m.groupable.noGroupLabel,noGroupAriaLabel:m.groupable.noGroupAriaLabel,order:m.groupable.order,sortFunction:null,headerTsxFn:i instanceof c.ViewModel?m.groupable.headerTsxFn:null,searchState:m.groupable.searchState,selectedGroup:m.groupable.selectedGroup,collapseOrExpandListener:m.groupable.collapseOrExpandListener,collapseOrExpandAllListener:m.groupable.collapseOrExpandAllListener,collapseStatusMap:m.groupable.collapseStatusMap,nonCollapsibleGroups:m.groupable.nonCollapsibleGroups,isCollapsedByDefault:m.groupable.isCollapsedByDefault??!0})),this.vivaListViewModel=new a.ViewModel({ltm:p,ariaLabel:i.ariaLabel,disabled:i.disabled,events:i.events,items:i.items,itemTemplate:g?i.itemTemplate:(0,u.sanitizeHTML)(i.itemTemplate,e,t.sanitizationContext).sanitizedMarkup,noItemsMessage:i.noItemsMessage,outlineStyle:i.outlineStyle,filterText:x,filterKey:f,extensions:w,plugins:V,itemTsxFn:i instanceof c.ViewModel?i.itemTsxFn:null}),this.vivaListState=new a.WidgetUIState({vm:this.vivaListViewModel})}}t.WidgetUIState=f,t.InnerTsxComponent=d.ListViewInner;class w extends s.Widget{constructor(e,t,i,s){super(e,t,i,s),this.element.addClass(x),this._initializeWidgets()}dispose(){this._checkExistsOrRegisterDestroyId(super.dispose)||(this.element.removeClass(x),super.dispose())}_initializeWidgets(){const e=this.options,t=this.element,i=(e.extensionOptions||{}).selectable,s=e.extensions;let o;if(i&&i.activateOnSelected&&t.addClass("fxc-list-activateonselected"),s&v.Selectable&&i){const e=i.selection;e&&e.selectedItems.subscribe(this.ltm,(e=>{o&&(o.resolve(void 0),o=null)}))}s&v.ContextMenu&&this.ltm.registerForDispose(t.setEvents(["listViewContextMenu",(e,t)=>((o=Promise.withResolvers()).promise.then((i=>{this._triggerRightClickEvent(e,t.item),o=null})),t.metadata.selected()&&o.resolve(void 0),e.preventDefault(),e.stopPropagation(),!0)])),this._widgets.push(new a.Widget(this.element,this.state.vivaListViewModel,{weaveContext:this.weaveContext},this.state.vivaListState))}_triggerRightClickEvent(e,t){const i=$.Event("rightclick");return i.clientX=t.clientX,i.clientY=t.clientY,$(e.target).trigger(i,this._getCommandRightClickEventArgs(t)),!0}_getCommandRightClickEventArgs(e){const t=this.options.extensionOptions.selectable.selection;let i=e.commandGroup,s=e.commandGroupOwner;return-1!==MsPortalFx.findIndex(t.selectedItems(),(e=>e.commandGroup!==i&&e.commandGroupOwner!==s))&&(i=null,s=null),{entityType:1,commandGroup:i,commandGroupOwner:s,viewModel:e,listData:{selectableSet:t,deleteRowCommandTitle:null,markForDelete:null}}}}t.Widget=w,w.flightNewRender=!0,t.ListView=function(e){return i(p.GetContext,{fn:t=>{const s=new f({vm:e.vm,isTrusted:!0,sanitizationContext:void 0});return i("div",{className:e.className,afterMount:(i,a)=>{a.registerForDispose(new w($(i),e.vm,{weaveContext:t,diContainer:t.diContainer},s))}},i(d.ListViewInner,{vm:e.vm,state:s}))}})}}));