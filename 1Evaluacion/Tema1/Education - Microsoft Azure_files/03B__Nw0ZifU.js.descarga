define("@microsoft/azureportal-reactview/FilterableDropdown",["require","exports","react","react","@fluentui/react/lib/Dropdown","FxInternal/Resources/ReactComponents","@fluentui/react/lib/SelectableOption","@fluentui/react/lib/TextField","@microsoft/azureportal-reactview/internal/ErrorBoundary","@microsoft/azureportal-reactview/FormLabel","@fluentui/react/lib/Announced","@fluentui/react/lib/Utilities","@microsoft/azureportal-reactview/internal/AsyncHooks"],(function(e,t,o,r,n,l,i,a,s,c,p,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterableDropdown=void 0;const m="FilterableDropdown::FilterText",b="FilterableDropdown::Divider",y="FilterableDropdown::NoOptionsLabel",h={calloutMaxHeight:500};function D(e,t){return e.text.toLocaleLowerCase().includes(t)}t.FilterableDropdown=(0,s.withErrorBoundary)(o.memo((e=>{const{options:t,filterDebounceTime:s=100,onRenderLabel:f,optionsFilter:w,optionFilter:T=D,selectAllOptionKey:x}=e,[M,F]=(0,r.useState)(""),{ariaLabelledBy:I,ariaRequired:O,setIsTooltipIconTabbable:k}=(0,c.useFormLabelContext)(!0),v=(0,d.useDebounce)(((e,t)=>{F(t)}),s),g=(0,r.useMemo)((()=>{if(!M)return t;const e=(e,t)=>function(e,t,o){const r=[],n=t.toLocaleLowerCase();let l={hasMatch:!1};for(const a of e)a.itemType===i.SelectableOptionMenuItemType.Divider?l.hasMatch&&r.push(a):a.itemType===i.SelectableOptionMenuItemType.Header?l={header:a,hasMatch:!1}:o(a,n,t)&&(l.header&&!l.hasMatch&&(r.push(l.header),l.hasMatch=!0),r.push(a));return r}(e,t,T);return w?w(t,M,e):e(t,M)}),[t,M,w,T]),L=(0,r.useMemo)((()=>g.filter((e=>e.itemType!==i.SelectableOptionMenuItemType.Divider&&e.itemType!==i.SelectableOptionMenuItemType.Header&&!e.hidden))),[g]),S=L.length,E=(0,r.useMemo)((()=>{const t=[{key:m,text:""},{key:b,text:"",itemType:i.SelectableOptionMenuItemType.Divider}];return e.multiSelect&&x&&t.push({key:x,text:l.Dropdown.selectAll,hidden:!!M}),g.length?t.push(...g):t.push({key:y,text:""}),t}),[M,g,x]),R=(0,r.useMemo)((()=>{let e;return e=S>1?(0,u.format)(l.Dropdown.multipleOption,S):1===S?l.Dropdown.oneOption:l.Dropdown.noOption,e}),[S]);(0,r.useEffect)((()=>{k(e.disabled)}),[e.disabled]);const C=o.useCallback(((t,r)=>{const n=()=>e.onRenderItem?e.onRenderItem(t,r):r(t);return t.key===m?o.createElement(a.TextField,{onChange:v,styles:{root:{margin:"10px 16px 5px"}},key:"Filter",placeholder:l.Dropdown.filterItems}):t.key===y?o.createElement("p",{key:"noOptions",style:{textAlign:"center",margin:"5px"}},l.Dropdown.noOption):t.key===b?r(t):t.itemType===i.SelectableOptionMenuItemType.Divider||t.itemType===i.SelectableOptionMenuItemType.Header?n():o.cloneElement(n(),{"aria-setsize":L.length,"aria-posinset":L.findIndex((e=>e.key===t.key))+1})}),[e.onRenderItem,L]),A=o.useCallback(((e,t)=>e.label||f||M?o.createElement(o.Fragment,null,f?f(e,t):t(e),M&&o.createElement(p.Announced,{message:R,"aria-live":"assertive"})):null),[R,M,e.label,e.onRenderLabel]),z=o.useCallback((()=>{F(""),e.onDismiss?.()}),[F,e.onDismiss]);return o.createElement(n.Dropdown,{...e,"aria-labelledby":e["aria-labelledby"]??I,"aria-required":e["aria-required"]??O,onRenderLabel:A,onRenderItem:C,onDismiss:z,options:E,selectedKey:M&&!e.multiSelect?null:e.selectedKey,placeholder:e.placeholder||l.Dropdown.selectExistingItem,calloutProps:{...h,...e.calloutProps}})})),"FilterableDropdown")}));