"use strict";var HubsExtension,MsPortalFx,FxImpl;!function(e){!function(e){!function(e){var t=FxImpl.Constants.RpcMethods,o=FxImpl.Rpc.ActionEndPointDefinition;e.updateSubscriptionInfoEndPoint=new o(t.updateSubscriptionInfo),e.getRegisteredResourceProviderInfoEndPoint=new o(t.getRegisteredResourceProviderInfo)}(e.Azure||(e.Azure={}))}(e.Internal||(e.Internal={}))}(HubsExtension||(HubsExtension={})),function(e){!function(e){var t=function(){};e.SubscriptionPolicies=t;var o=function(){};e.TenantInfo=o;var i=function(){};e.Tenant=i;var n=function(){this.regionPicker={regionId:ko.observable()}};e.RegionPickerDataModel=n;var r=function(){this.subscriptionPicker={subscriptionId:ko.observable(),subscriptionName:ko.observable()}};e.SubscriptionPickerDataModel=r;var a=function(){this.resourceGroup={resourceGroupName:ko.observable(),subscriptionId:ko.observable()}};e.ResourceGroupDataModel=a;var s=function(){this.resourceGroupPicker={resourceGroupName:ko.observable(),resourceGroupLocation:ko.observable(),subscriptionId:ko.observable(),isNewResourceGroup:ko.observable()}};e.ResourceGroupPickerDataModel=s,function(e){!function(e){e.PricingSummaryBlade={displayText:MsPortalFx.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:"Microsoft_Azure_Marketplace"},e.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:"Microsoft_Azure_Marketplace"},e.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",unknownEA:"UnknownEA",direct:"Direct",csp:"CSP"}}(e.Constants||(e.Constants={}))}(e.Pricing||(e.Pricing={}))}(e.Azure||(e.Azure={}))}(HubsExtension||(HubsExtension={})),function(e){!function(e){!function(e){e[e.Theme=0]="Theme",e[e.Blue=1]="Blue",e[e.Green=2]="Green",e[e.Orange=3]="Orange",e[e.Pink=4]="Pink",e[e.Purple=5]="Purple",e[e.Azure=6]="Azure",e[e.Dark=7]="Dark",e[e.Red=8]="Red"}(e.PartColor||(e.PartColor={}))}(e.Parts||(e.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t;!function(e){e[e.Custom=0]="Custom",e[e.CollectionSummary=1]="CollectionSummary",e[e.ItemSummary=4]="ItemSummary",e[e.LogStream=11]="LogStream",e[e.Grid=14]="Grid",e[e.Provisioning=17]="Provisioning",e[e.Unavailable=18]="Unavailable",e[e.Button=20]="Button",e[e.QuickStart=21]="QuickStart",e[e.Asset=22]="Asset",e[e.InfoList=23]="InfoList",e[e.Properties=24]="Properties",e[e.Collection=25]="Collection",e[e.Chart=26]="Chart",e[e.ResourceSummary=30]="ResourceSummary",e[e.Frame=31]="Frame",e[e._Internal_Error=997]="_Internal_Error",e[e._Internal_App=998]="_Internal_App",e[e._Internal_Az=999]="_Internal_Az",e[e._Internal_React=1e3]="_Internal_React"}(t||(t={})),e.PartKind=t}(e.Parts||(e.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t;!function(e){e[e.Mini=0]="Mini",e[e.Small=1]="Small",e[e.Normal=2]="Normal",e[e.Wide=3]="Wide",e[e.Tall=4]="Tall",e[e.HeroWide=5]="HeroWide",e[e.HeroTall=6]="HeroTall",e[e.HeroWideFitHeight=7]="HeroWideFitHeight",e[e.FullWidthFitHeight=8]="FullWidthFitHeight",e[e.FitToContainer=9]="FitToContainer",e[e.Large=10]="Large",e[e.Hero=11]="Hero",e[e.Custom=99]="Custom"}(t=e.InternalPartSize||(e.InternalPartSize={})),e.PartSize=t}(e.Parts||(e.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){e[e.Ready=0]="Ready",e[e.Failed=1]="Failed"}(e.PartState||(e.PartState={}))}(e.Parts||(e.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o;function i(t,i,n){var r=e.clone(t);return o.addAssetExpansion(r,i(r,n)),r}!function(e){e.assetDetailsPropertyPrefix="$$MSPORTALFX",e.assetDetailsPropertyName=e.assetDetailsPropertyPrefix+"$assetDetails",e.titlePropertyName=e.assetDetailsPropertyName+"$title",e.descriptionPropertyName=e.assetDetailsPropertyName+"$description",e.iconPropertyName=e.assetDetailsPropertyName+"$icon",e.assetTypeStringPropertyName=e.assetDetailsPropertyName+"$assetTypeString",e.assetIdPropertyName=e.assetDetailsPropertyName+"$assetId";var t=[e.assetDetailsPropertyName,e.titlePropertyName,e.descriptionPropertyName,e.iconPropertyName,e.assetIdPropertyName,e.assetTypeStringPropertyName],o=function(e,t,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!1,value:o})};function i(t){return t.hasOwnProperty(e.assetDetailsPropertyName)&&void 0!==t[e.assetDetailsPropertyName]}e.isAssetExpanded=i,e.getAssetExpansion=function(t){return t.hasOwnProperty(e.assetDetailsPropertyName)&&t[e.assetDetailsPropertyName]},e.addAssetExpansion=function(e,i){var n=i.icon,r=[i,i.title,i.description,n,i.assetId,i.assetType||""];return t.forEach((function(t,i){o(e,t,r[i])})),null},e.removeAssetExpansion=function(e){return i(e)&&t.forEach((function(t){o(e,t,void 0)})),null}}(o=t.AssetExpansion||(t.AssetExpansion={})),t.assetExpandItem=i,t.assetExpandItemAndAddToResultSet=function(e,t,o,n){var r=i(e,o,n);return t.push(r),r},function(e){e.connectDataSet=function(e,t,o,n,r){e.registerForDispose||(r=n,n=o,o=t,t=e,e=null);var a=e&&e.createChildLifetime();return a?(t.mapInto(a,(function(e,t){return i(t,n,r)}),o),a):t.map((function(e){return i(e,n,r)})).subscribeAndRun(o)}}(t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))}(e.Services||(e.Services={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(){function e(){}return e.subscribeDataSet=function(e,t,o,i,n){var r;e&&e.createChildLifetime?r=e.createChildLifetime():(n=i,i=o,o=t,t=e,e=null),t().forEach((function(e,t){o(e,t,n)}));var a="Subscription does not handle ",s=t.subscribeArrayEdits(r,(function(e){(e=ko.utils.adjustArrayEdits(e)).forEach((function(e){switch(e.status){case"added":if(!o)throw new Error("".concat(a,"insert."));o(e.value,e.index,n);break;case"deleted":if(!i)throw new Error("".concat(a,"remove."));i(e.value,e.index,n)}}))}));return r||s},e.insertItem=function(e,t,o){e.splice(o,0,t)},e.removeItem=function(e,t,o){e.splice(o,1)},e}();e.DataSetSubscription=t}(e.Services||(e.Services={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){e.noSubCreateCategoryId="hidden_nosubcreate",function(e){e.GalleryParametersKey="galleryParameters",e.GalleryOptionsKey="galleryOptions"}(e.Constants||(e.Constants={}));var t=function(){function e(){}return e.prototype.galleryCreatePreCheck=function(e){return Promise.resolve(null)},e}();e.BaseGalleryServiceViewModel=t,function(e){e[e.template=0]="template",e[e.fragment=1]="fragment",e[e.custom=3]="custom",e[e.metadata=4]="metadata"}(e.ArtifactType||(e.ArtifactType={}));var o=function(){this.galleryParameters={selectedTemplateId:ko.observable(),templateJson:ko.observable(),subscriptionId:ko.observable(),resourceGroupName:ko.observable(),resourceGroupLocation:ko.observable(),resourceProviders:ko.observable(),primaryResourceId:ko.observable(),deploymentName:ko.observable()}};e.GalleryDataModel=o}(e.Gallery||(e.Gallery={}))}(e.Services||(e.Services={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Base;t.getSettings=function(){return FxImpl.Rpc.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,o.Constants.Shell,null).then((function(e){return e.value}))}}(e.Services||(e.Services={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Base.Diagnostics.Metric;function i(e){return{record:e,flush:function(){return Promise.resolve()}}}var n=function(t,i){var n=0,r=0,a={uri:t,skipTelemetry:!0,extensionName:i,serializer:o.Internal.getTelemetryPrivacySerializer(),setAuthorizationHeader:{resourceName:"telemetryToken"},retryOnFailureWithBackoff:!0},s=e.getStandardDebouncer(a),l=e.getStandardDebouncer(a),c=e.getStandardDebouncer(__assign(__assign({},a),{interval:12e4}));setInterval((function(){r<25&&(n=0)}),6e4),this.record=function(e){e&&++n<=500&&(e.lowPriority?c.execute([e]):s.execute([e]),500===n&&(r++,l.execute([{extension:i,source:"MetricsThrottled",action:r<25?"MetricsThrottled":"MetricsThrottledMultipleTimes"}])))},this.flush=function(){return s.flush()}};t.getMetricEventProcessor=function(e,t){return e?new n(e,t):i(MsPortalFx.noop)},t.getConsoleMetricEventProcessor=function(){return i((function(e){console.log(JSON.stringify(e))}))}}(e.Services||(e.Services={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=e.Base.Diagnostics.Telemetry;function i(e){return{trace:e,flush:function(){return Q()}}}var n=function(e,t){var i=0,n=0,r={uri:e,skipTelemetry:!0,extensionName:t,serializer:o.Internal.getTelemetryPrivacySerializer(),setAuthorizationHeader:{resourceName:"telemetryToken"},retryOnFailureWithBackoff:!0},a=FxImpl.getStandardDebouncer(r),s=FxImpl.getStandardDebouncer(__assign(__assign({},r),{interval:12e4}));setInterval((function(){n<25&&(i=0)}),6e4),this.trace=function(e){e&&++i<=500&&(e.lowPriority?s.execute([e],e.optional):a.execute([e],e.optional),500===i&&(n++,a.execute([{extension:t,source:"TelemetryThrottled",action:n<25?"TelemetryThrottled":"TelemetryThrottledMultipleTimes"}])))},this.flush=function(){return a.flush()}};t.getTelemetryEventProcessor=function(t,o){return t?new n(t,o):i(e.noop)},t.getConsoleTelemetryEventProcessor=function(){var e=o.Internal.getTelemetryPrivacySerializer();return i((function(t){t.actionModifier!==o.ActionModifier.Start&&console.log(e(t))}))}}(e.Services||(e.Services={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){e.getAssetSelection=function(e,t,o){return{extension:e,assetType:t,detailBladeInputs:o}},e.getBladeSelection=function(e,t,o){return{extension:e,detailBlade:t,detailBladeInputs:o}}}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=FxImpl.TriggerableLifetimeManager,i=FxImpl.getErrorMap({noCreateSelection:"",noMatchesSelection:"",badSelectableValue:"",readOnlyEdits:""});function n(e){return void 0===e.moved&&("added"===e.status||"deleted"===e.status)}function r(t,o){if(o){var i=t.peek(),n=i.slice();e.pushUnique(n,o,null,!0),n.length!==i.length&&t(n)}}var a=function(){function t(t,a,s,l,c,u,d){var p=this;this.selectedItems=ko.observableArray(),this.activatedItems=ko.observableArray(),this.itemsWithChildEdits=ko.observableArray(),this.itemsArePinnable=ko.observable(!0),this._msPortalFxCurrentCommands=ko.observable(),ko.isObservable(t)&&"object"!=typeof t||(a=t.itemMatchesSelection,s=t.createSelection,l=t.initialState,c=t.supplyCommands,u=t.keepDeselectedItemsActivated,d=t.leaveSelectionOnDeactivation,t=t.items),a&&!s&&i.noCreateSelection(),s&&!a&&i.noMatchesSelection();var f=this._lifetime=new o;this._msPortalFxHasCreateSelection=!0,a||s||(a=function(e,t){return e===t},s=function(e){return e},this._msPortalFxHasCreateSelection=!1);var b,v,m=function(e,t){return ko.ignoreDependencies((function(){return a(e,t)}))};this.itemMatchesSelection=m,this.createSelection=s,this._msPortalFxFindDataItem=function(o,i){var n=!(i&&i.length)?m:function(t,o){var n=s(t);return void 0===e.find(i,(function(t){return!e.deepEquals(n[t],o[t])}))};return t().first((function(e){return n(e,o)}))},this._msPortalFxSupplyCommands=c?function(e){null==b||b.dispose(),b=p._lifetime.createChildLifetime();var t=c(e,b);return p._msPortalFxCurrentCommands(t),t}:void 0,this._msPortalFxDelayedBladeSelection=ko.observable();var h=function(e){return e.data===v},g=function(e){return function(){return e.peek().some((function(e){return m(v,e)}))}},y=g(this.activatedItems),x=g(this.selectedItems),M=ko.computed(f,(function(){var o,n=M?M.peek():[],r=n.map((function(e,t){return t})),a=[];return t().forEach((function(t){v=t;var s,l,c,u=e.findIndex(n,h);if(u>=0)o=n[u],r[u]=-1,l=(s=y())||x(),o.isActivated(s),o.isSelected(l);else{var d=f.createChildLifetime();(o={data:v,isSelected:ko.observable(x()),isActivated:ko.observable(y()),hasChildEdits:ko.computed(d,{read:(c=v,function(){return p.itemsWithChildEdits().some((function(e){return m(c,e.item)}))}),write:i.readOnlyEdits})})._lifetime=d}a.push(o)})),r.forEach((function(e){if(e>=0){var t=n[e],o=t&&t._lifetime;o&&o.dispose()}})),a}));this.selectableItems=ko.observableArray(M()),M.subscribe(f,(function(e){(p.selectableItems().length||e.length)&&p.selectableItems.splice.apply(p.selectableItems,[0,p.selectableItems().length].concat(e))}));var P,_=this.selectableItems(),w=function(t){var o=e.find(p.selectedItems(),(function(e){return m(t.data,e)})),i=e.find(p.activatedItems(),(function(e){return m(t.data,e)}));if(!!p.selectableItems().includes(t)&&t.isSelected()){if(!o)if(i||!p._createDelayedBladeSelection){var n=i||s(t.data);e.isNullOrUndefined(n)||p.selectedItems.splice(0,0,n)}else p._createDelayedBladeSelection(t.data)}else o&&p.selectedItems.remove(o),u||t.isActivated(!1)},k=function(t){var o=e.find(p.selectedItems(),(function(e){return m(t.data,e)})),i=e.find(p.activatedItems(),(function(e){return m(t.data,e)}));if(!!p.selectableItems().includes(t)&&t.isActivated()){if(!i)if(o||!p._createDelayedBladeSelection){var n=o||s(t.data);e.isNullOrUndefined(n)||p.activatedItems.splice(0,0,n)}else{var r=p._createDelayedBladeSelection(t.data);r&&p._msPortalFxDelayedBladeSelection(r)}}else i&&p.activatedItems.remove(i),d||t.isSelected(!1)},S=function(){P&&P.dispose(),P=f.createChildLifetime(),_.forEach((function(e){e.isSelected.subscribe(P,(function(){w(e)})),e.isActivated.subscribe(P,(function(){k(e)}))}))};this.selectableItems.subscribeArrayEdits(f,(function(t){t.forEach((function(t){n(t)&&!e.isNullOrUndefined(t.value)&&(w(t.value),k(t.value))})),S()})),S();var F=function(e,t){e.subscribeArrayEdits(f,(function(e){e.forEach((function(e){n(e)&&_.some((function(o){if(m(o.data,e.value))return o[t]("added"===e.status),!0}))}))}))};F(this.selectedItems,"isSelected"),F(this.activatedItems,"isActivated"),l&&(r(this.selectedItems,ko.unwrap(l.selectedItems)),r(this.activatedItems,ko.unwrap(l.activatedItems)),r(this.itemsWithChildEdits,ko.unwrap(l.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&this._lifetime.dispose()},t.prototype._setCreateDelayedBladeSelection=function(e){var t=this;this._createDelayedBladeSelection=e,this._msPortalFxCreateSelectionAsync=function(e){var o=t._createDelayedBladeSelection(e);return o?o.selectedValuePromise:Q(null)},this.createSelection=null},t}();t.SelectableSet=a;var s=function(){function e(e){void 0===e&&(e={});var t=this,n=!1,r=ko.observable(e.selectedValue),a=this,s=this._lifetime=new o;a.lock=function(){n=!0},a.setInternalSelectedValue=function(e){r(e)},a.isLocked=function(){return n},this.selectedValue=ko.computed(s,{read:function(){return r()},write:function(e){r(e)}}),this.isSelected=ko.observable(!!e.isSelected),this.isCommandSelected=ko.observable(!!e.isCommandSelected),this.hasChildEdits=ko.observable(!1),this.isActivated=ko.observable(!!e.isActivated),this.isClickable=ko.pureComputed((function(){return!t.isSelected()})),this.value=ko.computed(s,{read:function(){return t.isSelected()?t.selectedValue():void 0},write:function(e){void 0===e?(t.isSelected(!1),t.isActivated(!1)):i.badSelectableValue()}})}return e.prototype.dispose=function(){this._lifetime.dispose()},e.prototype.setIsSelected=function(e,t){e&&e.container&&e.container.selectable?this.isSelected(!!e.container.selectable.isSelected):this.isSelected(t)},e.prototype.onClick=function(){this.isSelected(!0)},e}();t.Selectable=s}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){void 0===t&&(t={});var o=e.call(this,t)||this;return o.delayedBladeSelection=ko.observable(),o}return __extends(t,e),t}(MsPortalFx.ViewModels.Selectable);e.ObsoleteSelectable=t,function(e){e.setCreateDelayedBladeSelection=function(e,t){e._setCreateDelayedBladeSelection(t)}}(e.SelectableSet||(e.SelectableSet={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=FxImpl.getErrorMap({promiseCannotBeNull:"",percentValueNotNumber:""});!function(e){e.Selectable=FxImpl.ViewModels.ObsoleteSelectable,function(e){e.setCreateDelayedBladeSelection=FxImpl.ViewModels.SelectableSet.setCreateDelayedBladeSelection}(e.SelectableSet||(e.SelectableSet={}))}(t.Internal||(t.Internal={})),t.getBladeSelection=function(e,t,o){return{extension:e,detailBlade:t,detailBladeInputs:o}},t.getAssetSelection=function(e,t,o){return{extension:e,assetType:t,detailBladeInputs:o}};var i=[{name:"extension"},{name:"detailBlade"},{name:"assetType"},{name:"resourceId"},{name:"detailBladeInputs",value:e.deepEquals}];function n(e){return function(t){return t.promise===e}}t.equalDynamicSelections=function(e,t){return e&&t?i.every((function(o){var i=o.name,n=e[i],r=t[i];if(n&&r){var a=o.value;return a?a(n,r):n===r}return!n==!r})):!e==!t};var r=function(){function t(e){var t=this;this._operations=ko.observableArray(),this.inProgress=ko.computed(e,(function(){return t._operations().length>0})),this.blockingUi=ko.computed(e,(function(){return t._operations().some((function(e){return e.blockUi()}))})),this.shieldType=ko.pureComputed((function(){var e,o=t._operations();return o.length>0&&(e=o.every((function(e){return e.shieldType&&1===e.shieldType()}))),e?1:0}))}return t.prototype.dispose=function(){},t.prototype.add=function(e,t){var i=this;e||o.promiseCannotBeNull(),t=t||new a;var n=ko.observable(null),r=ko.observable(t.blockUi),s=ko.observable(t.shieldType);e.progress&&e.progress((function(e){var t=e&&e.percent;"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&o.percentValueNotNumber()),"number"==typeof t&&n(Math.min(Math.max(t,0),100))}));var l={promise:e,deterministicPercentage:n,blockUi:r,shieldType:s},c=function(){i._operations.remove(l)};this._operations.push(l),e.then(c,c)},t.prototype.remove=function(e){e||o.promiseCannotBeNull(),this._operations.remove(n(e))},t.prototype.update=function(t,o){var i=e.find(this._operations(),n(t));i&&(i.blockUi(o.blockUi),"number"==typeof o.shieldType&&i.shieldType(o.shieldType))},t.prototype.getOptionsForOperation=function(t){var o=e.find(this._operations(),n(t));return o?{blockUi:o.blockUi(),shieldType:o.shieldType()}:null},t}();t.PartOperationList=r;var a=function(){};t.PartOperationOptions=a,t.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=new e.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Base"),i=function(){function t(e,t){t=t||{},this.controlType=0,this.vmKind="MsPortalFx",e?(this._ltm=e.createChildLifetime(),this._ltm.registerForDispose(this)):(o.error(FxImpl.createError("LifetimeManager was not provided. Creating a TriggerableLifetimeManager.",{data:{ctor:this.constructor+""}})),this._ltm=new FxImpl.TriggerableLifetimeManager),this.telemetryName=t.telemetryName}return t.prototype.dispose=function(){this._ltm.dispose()},Object.defineProperty(t.prototype,"lifetimeManager",{get:function(){return this._ltm},enumerable:!1,configurable:!0}),t.prototype.populateFromObject=function(e){var t=e;for(var o in t)t.hasOwnProperty(o)&&void 0!==t[o]&&(this[o]=t[o])},t.prototype._addDisposablesToCleanUp=function(e){this._ltm.registerForDispose(e)},t=__decorate([__metadata("fx:diagnostics",[require,"ViewModel"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],t)}();t.ViewModel=i}(t.Base||(t.Base={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.initObservable,i=function(e){function t(t,i){var n=e.call(this,t,i)||this;return!1===i||!0===i?i={loading:ko.observable(i)}:null==i&&(i={}),n.disabled=o(i.disabled,!1),n.loading=o(i.loading,!1),n}return __extends(t,e),t}(e.ViewModels.Controls.Base.ViewModel);t.ViewModel=i}(t.Loadable||(t.Loadable={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t){var o=e.call(this,t)||this;return o.name=null,o.value=ko.observable(),o.dirty=ko.observable(),o}return __extends(t,e),t}(e.Loadable.ViewModel);t.ViewModel=o}(e.EditableControl||(e.EditableControl={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){t.DefaultDelayValidationTimeout=500;var o=function(e){function t(t){var o=e.call(this,t)||this;return o.enableValidation=ko.observable(!0),o.delayValidationTimeout=ko.observable(0),o.validationState=ko.observable(0),o.validators=ko.observableArray(),o.validationResults=ko.observableArray(),o.valid=ko.computed(o.lifetimeManager,(function(){return!o.enableValidation()||0===o.validators().length||o.enableValidation()&&o.validators().length>0&&(0===o.validationState()||2===o.validationState())})),o}return __extends(t,e),t}(e.EditableControl.ViewModel);t.ViewModel=o}(e.ValidatableControl||(e.ValidatableControl={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=e.ViewModels.Forms;!function(e){e[e.Top=0]="Top",e[e.Left=1]="Left",e[e.Hidden=2]="Hidden"}(t.LabelPosition||(t.LabelPosition={})),function(e){e[e.Bottom=0]="Bottom",e[e.Right=1]="Right"}(t.SubLabelPosition||(t.SubLabelPosition={})),function(t){!function(t){var i=function(t){function i(i,n){var r=t.call(this,i,n)||this;return n=n||{},r.cssClass=e.initObservable(n.cssClass,""),r.hideValidationCheck=n.hideValidationCheck||!1,r.infoBalloonContent=e.isNullOrUndefined(n.infoBalloonContent)?ko.observable():n.infoBalloonContent,r.infoBalloonLinkContent=n.infoBalloonLinkContent||ko.observable(),r.label=e.initObservable(n.label),r.labelPosition=e.isNullOrUndefined(n.labelPosition)?ko.observable(o.LabelPosition.Top):n.labelPosition,r.subLabel=e.initObservable(n.subLabel,void 0),r.subLabelPosition=e.isNullOrUndefined(n.subLabelPosition)?ko.observable(o.SubLabelPosition.Bottom):n.subLabelPosition,r.visible=e.initObservable(n.visible,!0),r._msPortalFxLeftLabelWidth=ko.observable(),r._msPortalFxRequired=ko.observable(),r._msPortalFxOldControl=!0,r}return __extends(i,t),i}(e.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=i}(t.LabelAndBalloon||(t.LabelAndBalloon={}))}(t.Base||(t.Base={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(o){var i=e.Base.Diagnostics,n=e.Base.Promises.cancelOnDispose,r=e.isNullOrUndefined,a=function(t){function o(o,n,a,s){var l=this,c=null,u=null,d=null;r(n)||n.valid&&n.sections?!r(n)&&n.valid&&n.sections&&(c=n):s=n,"string"==typeof a?u=a:a&&(d=a),a&&s&&s.defaultValue&&i.Log.writeEntry(2,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored."),s=s||{};var p=(l=t.call(this,o,s)||this).lifetimeManager;if(l._options=s,l._msPortalFxViewModelValueChangesAreClean=!!l._options.viewModelValueChangesAreClean,l._form=c,l.controlType=0,l.enableValidation=ko.observable(!1),l.valid=ko.observable(!0),l.validate=ko.observable(0),l.delayValidationTimeout=ko.observable(e.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),l.performValidation=ko.observable(null),l.ensureValidation=ko.observable(0),l.validations=s.validations||ko.observableArray(),l.showValidationMessagesBelowControl=s.showValidationMessagesBelowControl||!1,l.validationResults=ko.observableArray(),l.defaultValue=s.defaultValue||ko.observable(null),l.initialValue=ko.observable(null),l._previousEditScope=null,l._msPortalFxWidgetValue=ko.observable(),l.enabled=ko.observable(!l.disabled()),l.enabled.subscribe(p,(function(e){l.disabled(!e)})),l.disabled.subscribe(p,(function(e){l.enabled(!e)})),l.dirty=ko.observable(!1),l._originalDirty=l.dirty,r(c)){var f=l.defaultValue();l.value=ko.observable(f),l.initialValue(f),l.enableValidation(!0)}else u?l._setEditScopeAccessors(c._createEditScopeAccessorFromPath(u),c):d?l._setEditScopeAccessors(d,c):l.value=ko.observable(l.defaultValue());return l.createValueSubscriptions(p),l._msPortalFxClearValidation=ko.observable(),l._msPortalFxTriggerValidation=ko.observable(),l}return __extends(o,t),o.prototype.resetDirtyComputed=function(t){e.disposeDisposable(this._dirtyLifetime),this._dirtyLifetime=this.lifetimeManager.createChildLifetime(),ko.computed(this._dirtyLifetime,t)},o.prototype._setEditScopeAccessors=function(e,t){if(!r(this._editScopeAccessors))throw i.Log.writeEntry(2,"Forms","Field._setEditScopeAccessors can only be called once."),new Error("Field._setEditScopeAccessors can only be called once.");if(!e.createdByBaseFormClass)throw i.Log.writeEntry(2,"Forms","Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method."),new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");this._editScopeAccessors=e,this._initializeFieldStateObservables()},o.prototype.clearValidation=function(){var e=this;return ko.ignoreDependencies((function(){var t=e._msPortalFxClearValidation();return Q(n(e.lifetimeManager,t||Q()))}))},o.prototype.triggerValidation=function(){var t=this;return Q(e.tryImmediateResolve(e.require("FxInternal/Utils/ValidationHelper"),(function(e){return e.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})})))},o.prototype._initializeFieldStateObservables=function(){var t,o,i,n=this,a=this._editScopeAccessors,s=this.lifetimeManager;this.initialValue=ko.computed(s,{read:function(){t&&t.dispose(),t=s.createChildLifetime();var e=a.getOriginalObservable(t);return e?e():n.defaultValue()},write:function(e){a.getOriginalObservable(t)(e)}}),this.value=ko.computed(s,{read:function(){o&&o.dispose(),o=s.createChildLifetime();var e=a.getEditableObservable(o);if(n._form){var t=n._form.editScope();n._previousEditScope!==t&&(n.enableValidation(!1),n._previousEditScope=t)}return r(e)?n.defaultValue.peek():e()},write:function(e){i&&i.dispose(),i=s.createChildLifetime();var t=a.getEditableObservable(i);if(!t)throw new Error("Form should not allow edits until an EditScope is loaded.");t(e)}}),this.createValueSubscriptions(s),this.resetDirtyComputed((function(){n.setDirty(!e.deepEquals(n.value(),n.initialValue()))})),this._enableValidationReactor=ko.computed(s,(function(){n._form&&n._form.editScope(),n.enableValidation(!(!a.getOriginalObservable(t)||!a.getEditableObservable(o)))}))},o.prototype.createValueSubscriptions=function(t){var o=this,i=!1,n=!1,r=this.value;e.nextTick((function(){var t=o.value,i=!!o.lifetimeManager;t!==r&&i&&(e.disposeDisposable(o._newThisValueBinding),o._newThisValueBinding=t.subscribeAndRun(o.lifetimeManager,r))})),this.setValue(this.value(),this._msPortalFxWidgetValue),this.value.subscribe(t,(function(e){n?o._msPortalFxViewModelValueChangesAreClean&&n&&o.setDirty(!0):(i=!0,o.setValue(e,o._msPortalFxWidgetValue),i=!1,o._form&&o._form.viewModelValueChangesSetDefaultValues&&o.initialValue(e))})),this._msPortalFxWidgetValue.subscribe(t,(function(e){if(!i){n=!0;var t=void 0;if(ko.isComputed(o.value)&&((t=o.value())===e||Array.isArray(t)&&Array.isArray(e)&&function(e,t){var o=!1;e.length===t.length&&(o=e.every((function(e,o){return e===t[o]})));return o}(t,e))){if(!o._form)try{o.setValue(e,o.value)}catch(e){}}else o.setValue(e,o.value);n=!1}}))},o.prototype.setDirty=function(e){this.dirty===this._originalDirty&&this.dirty(e)},o.prototype.setValue=function(e,t){Array.isArray(e)?t(e.slice()):t(e)},o}(t.LabelAndBalloon.ViewModel);o.ViewModel=a}(t.Input||(t.Input={}))}(t.Base||(t.Base={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r.empty=ko.computed(r.lifetimeManager,(function(){return!r.value()})),r}return __extends(t,e),t}(e.Input.ViewModel);t.ViewModel=o}(e.Nullable||(e.Nullable={}))}(e.Base||(e.Base={}))}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r.emptyValueText=r._options.emptyValueText||ko.observable(""),r.editing=ko.observable(!1),r}return __extends(t,e),t}(e.Nullable.ViewModel);t.ViewModel=o}(e.Editable||(e.Editable={}))}(e.Base||(e.Base={}))}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;return a.valueUpdateTrigger=a._options.valueUpdateTrigger||e.ViewModels.Controls.ValueUpdateTrigger.Default,a.delayValidationTimeout=a._options.delayValidationTimeout||ko.observable(500),a.onEnterPressed=a._options.onEnterPressed,a}return __extends(o,t),o}(t.Editable.ViewModel);o.ViewModel=i}(t.Typable||(t.Typable={}))}(t.Base||(t.Base={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r.popupAlignment=3,r.inputAlignment=10,r}return __extends(t,e),t}(e.Editable.ViewModel);t.ViewModel=o}(e.EditableComboBox||(e.EditableComboBox={}))}(e.Base||(e.Base={}))}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o,i=e.Base.Diagnostics.Log,n=(e.Base.Diagnostics.LogEntryLevel,{invalidPath:"",observablePathInvalid:"",setOnce:"",editScopeNotSet:"",obsMissing:""}),r=FxImpl.getErrorMap(n);!function(e){e[e.Original=0]="Original",e[e.Editable=1]="Editable"}(o=t.EditScopeObservableType||(t.EditScopeObservableType={}));var a=function(){function t(e,t,o){var i=this;this.sections=ko.observableArray(),this.viewModelValueChangesSetDefaultValues=!1,t&&(this.editScope=t),this._getNestedData=o,e.registerForDispose(this);var n=this._ltm=e.createChildLifetime();this.valid=ko.computed(n,(function(){return!i.sections().some((function(e){return!e.valid()}))}))}return Object.defineProperty(t.prototype,"editScope",{get:function(){return this._editScope||r.editScopeNotSet(),this._editScope},set:function(e){this._editScope&&r.setOnce(),this._editScope=e},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._ltm.dispose()},t.prototype._createEditScopeAccessorFromPath=function(t){return this._createEditScopeAccessorFromAccessorFunction((function(o){return function(t,o,n){var a,s,l;void 0===n&&(n=".");try{for(a=(o=(o=o.replace(/\[/g,n).replace(/\]/g,"")).startsWith(n)?o.slice(1):o).split(n),l=ko.unwrap(t)[a[0]],s=1;s<a.length;s++)l=ko.unwrap(l)[a[s]]}catch(e){r.invalidPath()}return!e.isNullOrUndefined(l)&&ko.isObservable(l)||(i.writeEntry(2,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: ".concat(o,").")),r.observablePathInvalid()),l}(o,t)}),!0)},t.prototype.createEditScopeAccessor=function(e){if(e.writeToEditScope){var t=e;return this._createEditScopeAccessorFromOptions(t)}var o=e;return this._createEditScopeAccessorFromAccessorFunction(o,!0)},t.prototype.createCustomEditScopeAccessor=function(e){if(e.writeToEditScope){var t=e;return this._createEditScopeAccessorFromOptions(t)}var o=e;return this._createEditScopeAccessorFromAccessorFunction(o,!1)},t._logEditScopeAccessorError=function(e){i.writeEntry(2,"EditScopeAccessor",e)},t.prototype._createEditScopeAccessorFromAccessorFunction=function(e,t){var i=this;return{getOriginalObservable:function(t){var n,a,s,l=i.editScope();return l&&(a=l.getOriginal(l.root),s=i._getNestedData?i._getNestedData(a):a,(n=e(s,t,o.Original))||r.obsMissing("Original")),n},getEditableObservable:function(t){var n,a,s,l=i.editScope();return l&&(a=l.root,s=i._getNestedData?i._getNestedData(a):a,(n=e(s,t,o.Editable))||r.obsMissing("Editable")),n},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},t.prototype._createEditScopeAccessorFromOptions=function(e){var t=this;return{getOriginalObservable:function(o){return t.editScope()?ko.computed(o,(function(){return e.readFromEditScope(t.editScope().getOriginal(t.editScope().root))})):null},getEditableObservable:function(o){return t.editScope()?ko.computed(o,{read:function(){return e.readFromEditScope(t.editScope().root)},write:function(o){e.writeToEditScope(t.editScope().root,o)}}):null},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},t=__decorate([__metadata("fx:diagnostics",[require,"ViewModel"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Function])],t)}();t.ViewModel=a}(t.Form||(t.Form={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;return a.groups=a._options.groups||ko.observableArray(),0!==a.groups().length&&0!==a.groups()[0].options().length&&e.isNullOrUndefined(a.defaultValue())&&a.defaultValue(a.groups()[0].options()[0].value),a}return __extends(o,t),o}(t.Input.ViewModel);o.ViewModel=i}(t.Groups||(t.Groups={}))}(t.Base||(t.Base={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r.options=r._options.options||ko.observableArray(),ko.reactor(t,(function(){var e,t;if(null===(t=null===(e=ko.unwrap(r.options))||void 0===e?void 0:e.some)||void 0===t?void 0:t.call(e,(function(e){return!e})))throw new Error("Invalid item")})),r}return __extends(t,e),t}(e.Input.ViewModel);t.ViewModel=o}(e.Options||(e.Options={}))}(e.Base||(e.Base={}))}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=this,s=r||{};return e.isNullOrUndefined(i)||"function"==typeof i.createEditScopeAccessor||(s=i),(a=t.call(this,o,i,n,r)||this).min=e.initObservable(s.min,0),a.max=e.initObservable(s.max,10),a.step=e.initObservable(s.step,1),a.showStepMarkers=e.initObservable(s.showStepMarkers,!0),a.ariaLabel=e.initObservable(s.ariaLabel),a.legends=s.legends,a.hideTextbox=e.initObservable(s.hideTextbox,!1),a.customValues=s.customValues,a}return __extends(o,t),o}(t.Input.ViewModel);o.ViewModel=i}(t.Slider||(t.Slider={}))}(t.Base||(t.Base={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=ko.utils.arrayPushAll,i=function(t){function i(i,n,r,a,s,l){void 0===l&&(l=null);var c=t.call(this,i)||this;c.enableValidation=ko.observable(!1),c.valid=ko.observable(!0),c.validate=ko.observable(0),c.label=ko.observable(),c.labelPosition=ko.observable(),c.validations=ko.observableArray(),c.validationResults=ko.observableArray(),c.delayValidationTimeout=ko.observable(e.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),c.enabled=ko.observable(!0),c.infoBalloonContent=ko.observable(s);var u=c.lifetimeManager;return c.initialValue=ko.computed(u,(function(){var e=n.getOriginalObservable();return e?e():l})),c.value=ko.computed(u,{read:function(){var e=n.getEditableObservable();return e?e():l},write:function(e){var t=n.getEditableObservable();if(!t)throw new Error("Form should not allow edits until an EditScope is loaded.");t(e)}}),c.label(r),c.labelPosition(e.ViewModels.Forms.LabelPosition.Top),a&&o(c.validations,a),s&&(c.infoBalloonContent=ko.observable(s)),c.dirty=ko.observable(!1),ko.computed(u,(function(){c.setDirty(c.value()!==c.initialValue())})),c._enableValidationReactor=ko.computed(u,(function(){c.enableValidation(!(!n.getOriginalObservable()||!n.getEditableObservable()))})),c.performValidation=ko.observable(null),c.ensureValidation=ko.observable(0),c._msPortalFxClearValidation=ko.observable(),c._msPortalFxTriggerValidation=ko.observable(),c}return __extends(i,t),i.prototype.clearValidation=function(){var e=this._msPortalFxClearValidation();if(e)return Q(e());Q()},i.prototype.triggerValidation=function(){var t=this;return Q(e.require("FxInternal/Utils/ValidationHelper").then((function(e){return e.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})})))},i.prototype.setDirty=function(e){try{this.dirty(e)}catch(e){}},i}(e.ViewModels.Controls.Loadable.ViewModel);t.Field=i;var n=function(e){function t(t,o,i,n,r){var a=e.call(this,t,o,i,n,r)||this;return a.empty=ko.computed(a.lifetimeManager,(function(){return!a.value()})),a}return __extends(t,e),t}(i);t.NullableField=n;var r=function(e){function t(t,o,i,n,r){var a=e.call(this,t,o,i,n,r)||this;return a.editing=ko.observable(!1),a}return __extends(t,e),t}(n);t.EditableField=r;var a=function(e){function t(t,i,n,r,a,s){var l=e.call(this,t,i,n,a,s,0===r.length||0===r[0].options().length?void 0:r[0].options()[0].value)||this;return l.groups=ko.observableArray(),o(l.groups,r),l}return __extends(t,e),t}(i);t.GroupsField=a;var s=function(e){function t(t,i,n,r,a,s){var l=this;if(0===r.length)throw new Error("'values' array must contain one or more FormOption values.");return(l=e.call(this,t,i,n,a,s,r[0].value)||this).options=ko.observableArray(),o(l.options,r),l}return __extends(t,e),t}(i);t.OptionsField=s;var l=function(e){function t(t,o,i,n,r,a,s,l,c,u){void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=0),void 0===r&&(r=10),void 0===a&&(a=[]),void 0===s&&(s=!1),void 0===l&&(l=null),void 0===c&&(c=null),void 0===u&&(u=1);var d=e.call(this,t,o,i,a,l,c)||this;return d.showStepMarkers=ko.observable(s),d.min=ko.observable(n),d.max=ko.observable(r),d.step=ko.observable(u),d}return __extends(t,e),t}(i);t.SliderBaseField=l;var c=function(t){function o(o,i,n,r,a){var s=t.call(this,o,i,n,r,a)||this;return s.editing=ko.observable(!1),s.valueUpdateTrigger=e.ViewModels.Controls.ValueUpdateTrigger.Default,s}return __extends(o,t),o}(r);t.TypableField=c}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o,i,n,r,a){var s=e.call(this,t,o,i,n,a)||this;return s.emptyValueText=ko.observable(r),s.popupAlignment=3,s.inputAlignment=10,s}return __extends(t,e),t}(e.EditableField);e.EditableComboField=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t=function(e,t){this.text=ko.isObservable(e)?e:ko.observable(e),this.value=ko.isObservable(t)?t():t};e.Option=t;var o=function(e){function t(t,o,i){var n=e.call(this,t,o)||this;return void 0!==i&&(n.disabled=ko.isObservable(i)?i:ko.observable(i)),n}return __extends(t,e),t}(t);e.DisablableOption=o}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i)||this;return void 0!==n&&(r.selected=ko.isObservable(n)?n:ko.observable(n)),r}return __extends(t,e),t}(e.DisablableOption);e.SelectableOption=t}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){function t(e){var t="string"!=typeof e&&!(null==e?void 0:e.htmlTemplate);return t&&(e=void 0),{valid:t,message:e}}e.getValidationResult=t,e.getValidationResultPromise=function(e){return Q(t(e))};var o=function(e){this.type=e};e.Validation=o}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=!o||"string"==typeof o||o.htmlTemplate?{message:o}:o;return(i=e.call(this,t)||this).message=n.message,i.isEmptyValid=ko.observable(!1),i}return __extends(t,e),t}(e.Validation);e.StaticMessageValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{compareTo:t,message:o};return(i=e.call(this,22,n)||this).compareTo=n.compareTo,i}return __extends(t,e),t}(e.StaticMessageValidation);e.CaseInsensitiveComparisonValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{characters:t,message:o};return(i=e.call(this,6,n)||this).characters=n.characters,i}return __extends(t,e),t}(e.StaticMessageValidation);e.ContainsCharactersValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{searchString:t,message:o};return(i=e.call(this,4,n)||this).searchString=n.searchString,i}return __extends(t,e),t}(e.StaticMessageValidation);e.ContainsValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=!t||"string"==typeof t||t.htmlTemplate?{message:t,validate:o}:t;return(i=e.call(this,21)||this).message=n.message,i.validate=n.validate,i}return __extends(t,e),t}(e.Validation);e.CustomValidationV=t;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.CustomValidation=o}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&t.hasOwnProperty("compareTo")?t:{compareTo:t,message:o};return(i=e.call(this,13,n)||this).compareTo=n.compareTo,i}return __extends(t,e),t}(e.StaticMessageValidation);e.EqualsValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,8,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.HasDigitValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,9,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.HasLetterValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,11,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.HasLowerCaseLetterValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,12,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.HasPunctuationValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,10,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.HasUpperCaseLetterValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,0,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.InvalidValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o,i){var n=this,r=t&&"number"!=typeof t?t:{min:t,max:o,message:i};return(n=e.call(this,14,r)||this).min=r.min,n.max=r.max,n}return __extends(t,e),t}(e.StaticMessageValidation);e.LengthRangeValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{compareTo:t,message:o};return(i=e.call(this,23,n)||this).compareTo=n.compareTo,i}return __extends(t,e),t}(e.StaticMessageValidation);e.LocaleAwareCaseInsensitiveComparisonValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"number"!=typeof t?t:{max:t,message:o};return(i=e.call(this,16,n)||this).max=n.max,i}return __extends(t,e),t}(e.StaticMessageValidation);e.MaxLengthValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"number"!=typeof t?t:{max:t,message:o};return(i=e.call(this,20,n)||this).max=n.max,i}return __extends(t,e),t}(e.StaticMessageValidation);e.MaxValueValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"number"!=typeof t?t:{min:t,message:o};return(i=e.call(this,15,n)||this).min=n.min,i}return __extends(t,e),t}(e.StaticMessageValidation);e.MinLengthValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"number"!=typeof t?t:{min:t,message:o};return(i=e.call(this,19,n)||this).min=n.min,i}return __extends(t,e),t}(e.StaticMessageValidation);e.MinValueValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{characters:t,message:o};return(i=e.call(this,7,n)||this).characters=n.characters,i}return __extends(t,e),t}(e.StaticMessageValidation);e.NotContainsCharactersValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=t&&"string"!=typeof t?t:{searchString:t,message:o};return(i=e.call(this,5,n)||this).searchString=n.searchString,i}return __extends(t,e),t}(e.StaticMessageValidation);e.NotContainsValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o,i){var n=this,r=t&&"string"!=typeof t?t:{pattern:t,message:o,successMessage:i};return(n=e.call(this,3,r)||this).pattern=r.pattern,n.successMessage=r.successMessage||void 0,n}return __extends(t,e),t}(e.StaticMessageValidation);e.NotRegExMatchValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,17,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.NumericValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o,i){var n=this,r=!t||"number"==typeof t||ko.isObservable(t)?{min:t,max:o,message:i}:t;return(n=e.call(this,18,r)||this).min=r.min,n.max=r.max,n}return __extends(t,e),t}(e.StaticMessageValidation);e.RangeValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o,i){var n=this,r=t&&"string"!=typeof t?t:{pattern:t,message:o,successMessage:i};return(n=e.call(this,2,r)||this).pattern=r.pattern,n.successMessage=r.successMessage||void 0,n}return __extends(t,e),t}(e.StaticMessageValidation);e.RegExMatchValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t){var o=!t||"string"==typeof t||t.htmlTemplate?{message:t}:t;return e.call(this,1,o)||this}return __extends(t,e),t}(e.StaticMessageValidation);e.RequiredValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(t,o){var i=this,n=!t||"string"==typeof t||t.htmlTemplate?__assign(__assign({},o),{message:t}):t;return(i=e.call(this,24,n)||this).options=n,i.requireHttps=n.requireHttps,i}return __extends(t,e),t}(e.StaticMessageValidation);e.UriValidation=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){t.defaultFullFileUploadMaxSize=2097152,t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize,t.defaultStreamFileUploadMaxSize=10737418240,t.defaultStreamFileUploadChunkSize=1048576,t.defaultBlobStoreUploadMaxSize=524288e7,t.defaultAppendBlobStoreUploadMaxSize=2097152e5,t.defaultPageBlobStoreUploadMaxSize=1099511627776,t.defaultAzureFileServiceUploadMaxSize=1099511627776,t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize,t.pageBlobPageSize=512,t.defaultResumableTrackingChunkSize=4*t.defaultBlobStoreUploadChunkSize;var o=e.Resources.Strings.FileUpload;t.getUploadInfos=function(e,t,o){return FxImpl.FileUpload.getUploadInfos(e,t,o)},t.getResumableUploadInfos=function(e,t,o){return FxImpl.FileUpload.getResumableUploadInfos(e,t,o)},t.getAsyncUploadTasks=function(e,t,o){return FxImpl.FileUpload.getAsyncUploadTasks(e,t,o)},t.invokeUploadAction=function(e,t,o){return FxImpl.FileUpload.invokeUploadAction(e,t,o)},t.getNextChunk=function(e,t,o){return FxImpl.FileUpload.getNextChunk(e,t,o)},t.registerRenewSasUriCallback=function(e){FxImpl.FileUpload.registerRenewSasUriCallback(e)},t.registerRenewAuthorizationCallback=function(e){FxImpl.FileUpload.registerRenewAuthorizationCallback(e)};var i=function(o){var i=e.extend({},o);this.type=0,this.contentType=i.contentType||0,this.encoding=i.encoding||null,this.maxFileSize=i.maxFileSize||t.defaultFullFileUploadMaxSize,this.chunkSize=i.chunkSize||t.defaultFullFileUploadChunkSize,this.category=i.category||null,this.uploadTarget=i.uploadTarget||null,this.notificationBlade=i.notificationBlade||null,this.resumable=e.initValue(i.resumable,!1),this.disableNotifications=e.initValue(i.disableNotifications,!1),this.resourceStrings=i.resourceStrings||null};t.FullFileUploadContext=i;var n=function(o){function i(i){var n=this,r=e.extend({},i);return(n=o.call(this,r)||this).type=1,n.maxFileSize=t.defaultStreamFileUploadMaxSize,n.chunkSize=t.defaultStreamFileUploadChunkSize,n.longRunning=e.initValue(r.longRunning,!1),n}return __extends(i,o),i}(i);t.StreamFileUploadContext=n;var r=function(o){function i(i){var n=o.call(this,i)||this,r=e.extend({},i);return n.type=e.initValue(r.type,2),n.maxFileSize=e.initValue(r.maxFileSize,function(e){switch(e){case 2:return t.defaultBlobStoreUploadMaxSize;case 4:default:return t.defaultAppendBlobStoreUploadMaxSize;case 3:return t.defaultPageBlobStoreUploadMaxSize;case 5:return t.defaultAzureFileServiceUploadMaxSize}}(n.type)),n.chunkSize=r.chunkSize||t.defaultBlobStoreUploadChunkSize,n.context=e.initObservable(r.context,null),n.addFilenameToSasUri=e.initObservable(r.addFilenameToSasUri,!1),n.useDefaultFileInfoContext=e.initObservable(r.useDefaultFileInfoContext,!0),n.sasUriCommand=e.initObservable(r.sasUriCommand,null),n.useRenewSasUriCallback=e.initValue(n.useRenewSasUriCallback,!1),n.authorizationContext=e.initValue(r.authorizationContext,null),n.accessTier=e.initValue(r.accessTier,null),n.customHeaders=e.initValue(r.customHeaders,null),n}return __extends(i,o),i}(i);t.BlobStoreFileUploadContext=r;var a=function(){function e(){this.uploadResult=ko.observable(null),this._msPortalFxUploadAction=ko.observable(0),this._msPortalFxActionTrigger=ko.observable(0)}return e.prototype.resume=function(){this._msPortalFxUploadAction(2),this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},e.prototype.pause=function(){this._msPortalFxUploadAction(1),this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},e.prototype.cancel=function(){this._msPortalFxUploadAction(3),this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},e.prototype.dispose=function(){this._msPortalFxUploadAction(4),this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},e}();t.UploadTask=a;var s=function(){function e(e){this.uploadInfo=e}return e.prototype.resume=function(e){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},2,e)},e.prototype.pause=function(){var e=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:e.id(),name:e.name},1)},e.prototype.cancel=function(){var e=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:e.id(),name:e.name},3)},e.prototype.complete=function(){var e=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:e.id(),name:e.name},7)},e.prototype.abort=function(e){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},8,e)},e.prototype.dispose=function(){var e=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:e.id(),name:e.name},4)},e.prototype.getNextChunk=function(e,t){var i=this.uploadInfo;if(1!==i.type())throw new Error(o.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},e,t)},e}();t.AsyncUploadTask=s;var l=function(){function t(e,t,o){this.uploadInfo=e,this._msPortalFxActionCallback=ko.observable(t),this._msPortalFxGetNextChunkCallback=ko.observable(o)}return t.prototype.resume=function(e){return this._invoke(2,e)},t.prototype.pause=function(){return this._invoke(1)},t.prototype.cancel=function(){return this._invoke(3)},t.prototype.complete=function(){return this._invoke(7)},t.prototype.abort=function(e){return this._invoke(8,e)},t.prototype.dispose=function(){return this._invoke(4)},t.prototype.getNextChunk=function(e,t){var o=this.uploadInfo;return Q(this._execCallback(this._msPortalFxGetNextChunkCallback,{id:o.id(),name:o.name},e,t))},t.prototype._invoke=function(e,t){var o=this.uploadInfo;return Q(this._execCallback(this._msPortalFxActionCallback,[{id:o.id(),name:o.name}],e,t))},t.prototype._execCallback=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return Q(e.tryImmediateResolve(Q(t()),(function(e){return e?Q(e.apply(null,i)):Q.reject(FxImpl.createError(o.notReady))})))},t}();t.AsyncUploadWidgetTask=l;var c=function(e){this.id=e.id,this.name=e.name,this.mimetype=e.mimetype,this.size=e.size,this.valid=ko.observable(!0)};t.SelectedFile=c}(t.FileUpload||(t.FileUpload={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=MsPortalFx.ViewModels.FileUpload,i=e.Rpc,n="FxImpl.FileUpload.getUploadInfos";function r(e,t,o){return Q(i.client.acquireObject(n,"fx",{uploadKeys:t,category:o}).then((function(t){return e.registerForDispose(t),t.value.uploads})))}t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(n),t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName"),t.uploadRenewSasUriEndPoint=new i.FuncEndPointDefinition("FxImpl.FileUpload.uploadRenewSasUri"),t.uploadRenewAuthorizationEndPoint=new i.FuncEndPointDefinition("FxImpl.FileUpload.uploadRenewAuthorization"),t.invokeUploadAction=function(e,o,n){var r=n?{uploadKey:e,action:o,context:n}:{uploadKey:e,action:o};return t.uploadActionEndPoint.invoke(i.client,"fx",r)},t.getUploadInfos=r,t.getResumableUploadInfos=function(e,t,o){return Q(i.client.acquireObject(n,"fx",{uploadKeys:t,category:o,resumable:!0}).then((function(t){return e.registerForDispose(t),t.value.uploads})))},t.getAsyncUploadTasks=function(e,t,i){return Q(r(e,t,i).then((function(e){var t=[];return e&&e.length>0&&(t=e.map((function(e){return new o.AsyncUploadTask(e)}))),t})))},t.getNextChunk=function(t,o,i){var n;return void 0===o&&void 0===i||(n={startByte:o,chunkSize:i}),e.FileUpload.invokeUploadAction(t,9,n)},t.registerRenewSasUriCallback=function(e){MsPortalFx.require("FxInternal/Events").then((function(t){t.getRegistry().registerEventHandler("fileUploadSasUri",{renew:e})}))},t.registerRenewAuthorizationCallback=function(e){MsPortalFx.require("FxInternal/Events").then((function(t){t.getRegistry().registerEventHandler("fileUploadAuthorization",{renew:e})}))}}(e.FileUpload||(e.FileUpload={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o=e.Resources.Strings,i=function(e,t,o){this.status=e,this.statusCode=t,this.errorMessage=o};t.Status=i;var n=function(t){var n=this;this.downloadStatus=ko.observable();var r=t.addDefaultAuthorizationToken;if(r&&(this.authorizationOptions={resourceName:!0!==r?t.addDefaultAuthorizationToken.resourceName:""}),this.authorizationToken=t.authorizationToken||ko.observable(""),this.downloadType=t.downloadType||ko.observable(1),this.headers=t.headers||ko.observable({}),this.httpMethod=t.httpMethod||ko.observable("GET"),this.httpRequestContent=t.httpRequestContent||ko.observable(""),this.httpRequestContentType=t.httpRequestContentType||ko.observable("application/json"),this.targetFileName=t.targetFileName||ko.observable(""),this.targetUri=t.targetUri||ko.observable(""),this.errorMessage=t.errorMessage||ko.observable(""),this.targetUriCallback=t.targetUriCallback,this.showUriCallbackConfirmationDialog=t.showUriCallbackConfirmationDialog,this.uriCallbackConfirmationDialogOptions=t.uriCallbackConfirmationDialogOptions,this.showDownloadProgressDialog=t.showDownloadProgressDialog||ko.observable(!1),this.downloadProgressDialogOptions=t.downloadProgressDialogOptions,this.onStart=t.onStart,this.onEnd=t.onEnd,this.authorizationOptions){var a={resourceName:this.authorizationOptions.resourceName||""};e.require("FxInternal/ExtensionRuntime").then((function(e){return e.getInnerRuntime().getAuthorizationToken(a)})).then((function(e){e&&e.header?n.authorizationToken(e.header):n.downloadStatus(new i(o.FileDownloadCommand.fileDownloadErrorStatus,412,o.FileDownloadCommand.authTokenNotAvailable))}),(function(e){n.downloadStatus(new i(o.FileDownloadCommand.fileDownloadErrorStatus,412,e))}))}};t.Context=n}(t.FileDownload||(t.FileDownload={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(o){var i,n,r;!function(e){e[e.Unstyled=0]="Unstyled",e[e.BottomBanner=1]="BottomBanner"}(i||(i={})),function(e){e.isCompleted=function(e){return!!e&&3===e.status&&(2===e.action||4===e.action)};var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valid=ko.observable(),t.input=ko.observable(),t.output=ko.observable({status:1,action:0}),t}return __extends(t,e),t.prototype.onInputsSet=function(e){return this.input(e.input),void 0!==e.valid&&this.valid(e.valid),Q()},t}(t.Controls.Loadable.ViewModel);e.ViewModel=o}(n=o.Base||(o.Base={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enableErrorInfoBox=ko.observable(!0),t._msPortalFxClearGroupValidationMessage=ko.observable((function(){})),t.asyncValidations=[],t}return __extends(t,e),t.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},t}(n.ViewModel);e.ViewModel=t}(r=o.ErrorInfoBoxActionBar||(o.ErrorInfoBoxActionBar={})),function(t){var o=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},o.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},o.prototype._onButtonClicked=function(t){this.output({status:t?3:0,action:t?4:5,userActionId:e.getUniqueId()})},o}(n.ViewModel);t.ViewModel=o}(o.DeleteActionBar||(o.DeleteActionBar={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t}(n.ViewModel);e.ViewModel=t}(o.FormActionBar||(o.FormActionBar={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t}(n.ViewModel);e.ViewModel=t}(o.FilterActionBar||(o.FilterActionBar={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enableErrorInfoBox=ko.observable(!1),t.actionButtonLabel=ko.observable(),t.actionButtonUri=ko.observable(),t.actionButtonUriWindowFeatures=ko.observable(),t.actionSummaryHtml=ko.observable(),t.allowToggleProvisioningLocation=ko.observable(!1),t.secondaryLinkDisplayText=ko.observable(),t.secondaryLinkTriggerValidation=ko.observable(!1),t.secondaryLinkStyle=ko.observable(0),t}return __extends(t,e),t.prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var o=this;return e.prototype.onInputsSet.call(this,t).then((function(){t.actionButtonLabel&&o.actionButtonLabel(t.actionButtonLabel),t.actionSummaryHtml&&o.actionSummaryHtml(t.actionSummaryHtml),t.allowToggleProvisioningLocation&&o.allowToggleProvisioningLocation(t.allowToggleProvisioningLocation),t.secondaryLinkDisplayText&&o.secondaryLinkDisplayText(t.secondaryLinkDisplayText),void 0!==t.secondaryLinkStyle&&o.secondaryLinkStyle(t.secondaryLinkStyle),t.secondaryLinkTriggerValidation&&o.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t}(r.ViewModel);e.ViewModel=t}(o.GenericActionBar||(o.GenericActionBar={})),function(t){t.SecondaryLinkStyle=i,t.ViewModel=function(t){function o(e,o){var i=this,n=e,r=o;return(i=t.call(this,n)||this).actionInProgress=ko.observable(!1),i.input=ko.observable(),i.isProvisioningBlade=ko.observable(),i.provisionOnStartboardPart=ko.observable(),i.masterIsProvisioningPart=ko.observable(!1),i.eula=ko.observable(),i.secondaryLinkDisplayText=ko.observable(),i.secondaryLinkTriggerValidation=ko.observable(!1),i.secondaryLinkStyle=ko.observable(0),i.disablePrimaryButton=ko.observable(!0),i.triggerSelectAction=ko.observable(""),i.forceInProgressStatus=ko.observable(),i.dropDown=ko.observable(),i.showActionBar=ko.observable(!0),i.actionButtonUri=ko.observable(),i.actionButtonLabel=ko.observable(0),r&&"boolean"==typeof r.hideActionBar&&i.showActionBar(!r.hideActionBar),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.ActionBars.CreateActionBar.ViewModel"),i}return __extends(o,t),o.prototype.onInputsSet=function(o){var n=this;return e.require("Fx/Telemetry",(function(e){(0,e.trace)({source:"CreateActionBar",action:"onInputsSet"})})),"actionInProgress"in o&&this.actionInProgress(!!o.actionInProgress),t.prototype.onInputsSet.call(this,o).then((function(){n.eula(o.eula),o.secondaryLinkDisplayText&&n.secondaryLinkDisplayText(o.secondaryLinkDisplayText),o.isProvisioningBlade&&n.isProvisioningBlade(o.isProvisioningBlade),n.masterIsProvisioningPart(o.input&&!!o.input.masterIsProvisioningPart),n.forceInProgressStatus(o.forceInProgressStatus),o.suppressErrorInfoBox&&n.enableErrorInfoBox(!1),n.disablePrimaryButton(!!o.disablePrimaryButton),i[o.secondaryLinkStyle]&&n.secondaryLinkStyle(o.secondaryLinkStyle),o.dropDown&&n.dropDown(o.dropDown),o.secondaryLinkTriggerValidation&&n.secondaryLinkTriggerValidation(o.secondaryLinkTriggerValidation)}))},o}(r.ViewModel)}(o.CreateActionBar||(o.CreateActionBar={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.triggerSelectAction=ko.observable(""),t.eula=ko.observable(),t.showSelectButton=ko.observable(),t.selectButtonText=ko.observable(),t}return __extends(t,e),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction),"eula"in t&&this.eula(t.eula),"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var o=this.showSelectButton;return"showSelectButton"in t?o(!!t.showSelectButton):void 0===o()&&o(!0),e.prototype.onInputsSet.call(this,t)},t}(n.ViewModel);e.ViewModel=t}(o.PickerActionBar||(o.PickerActionBar={}))}(t.ActionBars||(t.ActionBars={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){var o=function(e,t){this.linkText=e||"",this.linkUri=t||"",FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Balloon.Link","Fx/Controls/InfoBalloon.Link")},i=function(e,t,o,i){this.top=e||0,this.left=t||0,this.width=o||0,this.height=i||0,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Balloon.Box","Fx/Controls/InfoBalloon.Box")},n=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.visible=ko.observable(!1),n.box=ko.observable(new i),n.content=ko.observable(""),n.link=ko.observable(),n.appendTo="body",n.closeOtherBalloons=!1,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Balloon.ViewModel","Fx/Controls/InfoBalloon"),n}return __extends(t,e),t}(e.Loadable.ViewModel);t.Link=o,t.ViewModel=n,t.Box=i}(e.Balloon||(e.Balloon={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.initObservable,i=function(e,t,i,n,r){this.uri=o(e),this.target=o(t,"_blank"),this.windowFeatures=o(i),this.onLinkOpened=n,this.telemetryName=r,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.ClickableLink","Fx/Composition ClickableLink")};t.ClickableLink=i}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.controlType=7;var s=a._options;return a.inlineLabel=s.inlineLabel||!1,a.ariaLabel=e.initObservable(s.ariaLabel,""),a}return __extends(o,t),o}(t.Base.Input.ViewModel);o.ViewModel=i}(t.CheckBox||(t.CheckBox={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=e.initObservable,n=function(t){function o(e,o){var n=t.call(this,e,o)||this;return n.controlType=23,n.htmlTemplate=i(o.htmlTemplate),n.innerViewModel=o.innerViewModel,n.isolated=!1!==o.isolated,n.validate=ko.observable(0),n.valid=ko.observable(!0),n.dirty=ko.observable(!1),n.loading=ko.observable(!1),n._msPortalFxClearValidation=ko.observable(),n._msPortalFxTriggerValidation=ko.observable(),n._msPortalFxRequired=ko.observable(),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.CustomHtml.Viewmodel","Fx/Controls/CustomHtml"),n}return __extends(o,t),o.prototype.clearValidation=function(){var e=this._msPortalFxClearValidation();return e?Q(e()):Q()},o.prototype.triggerValidation=function(){var t=this;return Q(e.require("FxInternal/Utils/ValidationHelper")).then((function(e){return e.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})}))},o}(t.Base.LabelAndBalloon.ViewModel);o.ViewModel=n}(t.CustomHtml||(t.CustomHtml={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.controlType=25;var s=a._options;return a.enabledDateTimeRange=s.enabledDateTimeRange||ko.observable(new e.DateUtil.DateTimeRange),a.allowEmpty=!!s.allowEmpty,a.ariaLabel=e.initObservable(s.ariaLabel,""),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.DatePicker.ViewModel","Fx/Controls/DatePicker"),a}return __extends(o,t),o.prototype._setEditScopeAccessors=function(e){var o=this;t.prototype._setEditScopeAccessors.call(this,e),this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var e=o.value(),t=o.initialValue();e||t?e&&t?o.setDirty(e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()||e.getDate()!==t.getDate()):o.setDirty(!0):o.setDirty(!1)}))},o}(t.Base.EditableComboBox.ViewModel);o.ViewModel=i}(t.DatePicker||(t.DatePicker={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=Math.floor,n=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.showSeconds=!0,a.controlType=26;var s=a._options;a.enabledDateTimeRange=s.enabledDateTimeRange||ko.observable(new e.DateUtil.DateTimeRange),a.showTimezoneDropdown=e.initObservable(s.showTimezoneDropdown,!1),a.allowEmpty=!!s.allowEmpty,a.emptyTimeValueText=e.initObservable(s.emptyTimeValueText,""),a.ariaLabel=e.initObservable(s.ariaLabel,"");var l=s.showSeconds;return e.isNullOrUndefined(l)||(a.showSeconds=l),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.DateTimePicker.ViewModel","Fx/Controls/DateTimePicker"),a}return __extends(o,t),o.prototype._setEditScopeAccessors=function(e){var o=this;t.prototype._setEditScopeAccessors.call(this,e),this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var e=o.value(),t=o.initialValue();e||t?e&&t?o.setDirty(i(e.getTime()/1e3)!==i(t.getTime()/1e3)):o.setDirty(!0):o.setDirty(!1)}))},o}(t.Base.EditableComboBox.ViewModel);o.ViewModel=n}(t.DateTimePicker||(t.DateTimePicker={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o,i,n;n=t.Forms||(t.Forms={}),o=n.DropDown||(n.DropDown={}),i=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r._msPortalFxLogValidation=ko.observable(),r.controlType=3,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Obsolete.Forms.DropDown.ViewModel","Fx/Controls/DropDown"),r}return __extends(t,e),t}(e.ViewModels.Forms.Base.Options.ViewModel),o.ViewModel=i,e.ViewModels.Forms.DropDown={},e.ViewModels.Forms.DropDown.ViewModel=o.ViewModel}(t.Obsolete||(t.Obsolete={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o;(function(t){var o=e.ViewModels.Forms,i=function(e){function t(t,o,i){var n=e.call(this,t,o)||this;return n.children=i||[],n}return __extends(t,e),t}(o.Option);t.HierarchicalFormOptionItem=i;var n=function(){function t(e){this.children=[],this.lineMatches=[],this._value=e&&e.toLocaleLowerCase()}return t.prototype.getChild=function(t){return e.find(this.children,(function(e){return e._value===t.toLocaleLowerCase()}))},t.prototype.matchesValue=function(e){return this._value&&this._value===e.toLocaleLowerCase()},t}();t.Node=n;var r=function(){function e(e,t,o){var i=this;this._filterInProgress=!1,e.registerForDispose(this),this._viewModel=t,this._filterOptions=o;var n=this._ltm=e.createChildLifetime();ko.reactor(n,(function(){i._filterInProgress=!0;var e=i.filterData(t.filterText());t.filterInProgress(i._viewModel.items().length!==e.length),t.filteredItems(e),i._filterInProgress=!1}))}return e.prototype.dispose=function(){this._ltm.dispose()},e.prototype.filterData=function(e){return this._viewModel.items().filter((function(t){var o;return ko.unwrap(t.doNotFilter)||(o=t.text())&&o.toLowerCase().includes(e.toLowerCase())}))},e.prototype._setfilteredItems=function(e){this._viewModel.filteredItems(e)},e}();t.SearchFilter=r;var a=function(e){function t(t,o,n){var r=this,a=n.delimiter||"\\",s=t.createChildLifetime();return o.items.subscribeAndRun(s,(function(){!function(e,t){var o=e.items();if(1===o.length){for(var n=o[0],r=[],a=[];n;)r.push(new i(n.text(),n.value)),n.children&&(a=a.concat(n.children.map((function(e){return e.text(n.text()+t+e.text()),e})))),n=a.shift();e.items(r)}}(o,a)})),(r=e.call(this,t,o,n)||this)._ltm.registerForDispose(s),r}return __extends(t,e),t}(r);function s(e){return(e.text()||"").toLocaleLowerCase()}function l(e,t){var o=s(e),i=s(t);return o===i?0:o>i?1:-1}t.TreeSearchFilter=a;var c=function(){function e(e,t,o){var i=this;this._filterInProgress=!1,this._directMatchDictionary={},this._viewModel=t,this._filterOptions=o,this._prefixTree=new m,ko.computed(e,(function(){i._filterInProgress||(i._directMatchDictionary={},i._prefixTree=new m,i._setFilteredItems(i._viewModel.items()))})),t.filterText.subscribe(e,(function(e){i._filterInProgress=!0;var o=i.filterData(e);t.filterInProgress(i._viewModel.items().length!==o.length),t.filteredItems(o),i._filterInProgress=!1}))}return e.prototype.filterData=function(e){var t=this,o=[],i={};return this._prefixTree.getMatches(e).forEach((function(e){i[e]||(o=o.concat(t._directMatchDictionary[e]),i[e]=!0)})),o.sort(l)},e.prototype._setFilteredItems=function(e){var t=this;e.forEach((function(e){return t._addToSearchOnInitialize(e,e.text())})),this._viewModel.filteredItems(e),this._viewModel.filterText("")},e.prototype._addToSearchOnInitialize=function(e,t){u(this._directMatchDictionary,e,t),d(this._prefixTree,t.split(" "),t)},e.prototype._setfilteredItems=function(e){this._viewModel.filteredItems(e)},e}();function u(e,t,o){var i=e[o];i?!i.includes(t)&&i.push(t):e[o]=[t]}function d(e,t,o,i){void 0===i&&(i=" ");for(var n=t.length,r=0;r<n;r++){var a=t[r];e.addWord(a,o);for(var s=r+1;s<n;s++)a=a+i+t[s],e.addWord(a,o)}}t.SearchFilterPrefixTree=c;var p=function(e){function t(t,o,i){var n=e.call(this,t,o,i)||this;return n._childPrefixTree=new m,n._childMatchDictionary={},n}return __extends(t,e),t.prototype.filterData=function(e){var t,o,i,n=this._prefixTree.getMatches(e),r=this._childPrefixTree.getMatches(e);return t=this._processMatches(n,r),o={},i=[],t.forEach((function(e){var t=e.text();!o.hasOwnProperty(t)&&(o[t]=i.push(e))})),i},t.prototype._setFilteredItems=function(t){this._directMatchDictionary={},this._childMatchDictionary={},this._childPrefixTree=new m,1===t.length&&(this._filterOptions.delimiter=this._filterOptions.delimiter||"\\",t=this._flattenTree(t[0]),this._viewModel.items(t)),e.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(e,t){},t.prototype._processMatch=function(e,t){var o=this,i=[],n=[];return e.forEach((function(e){t[e]||(i.push(o._directMatchDictionary[e]||[]),n.push(o._childMatchDictionary[e]||[]),t[e]=!0)})),{filteredResults:[].concat.apply([],i),filteredChildResults:[].concat.apply([],n),isResultProcessed:t}},t.prototype._processMatches=function(e,t){var o=this._processMatch(e,{}),i=this._processMatch(t,o.isResultProcessed);return[].concat(o.filteredResults,i.filteredResults,o.filteredChildResults,i.filteredChildResults)},t.prototype._flattenTree=function(e){for(var t=this,o=e,n=[],r=[],a=function(){var a=new i("",""),l=o===e;s._updateCurrentItem(a,a,o.text(),o.text(),l?0:1),u(l?s._directMatchDictionary:s._childMatchDictionary,a,a.text()),n.push(a),o.children&&(r=r.concat(o.children.map((function(e){var i=e.text(),n=o.text()+t._filterOptions.delimiter+i;return t._updateCurrentItem(e,o,i,n,0),u(t._directMatchDictionary,a,o.text()),e})))),o=r.shift()},s=this;o;)a();return n},t.prototype._updateCurrentItem=function(e,t,o,i,n){var r=0===n&&this._prefixTree||1===n&&this._childPrefixTree;r&&function(e,t,o,i){d(e,t.split(" "),o),d(e,t.split(i),o,i)}(r,o,i,this._filterOptions.delimiter),e.text(e.value=i)},t}(c);t.TreeSearchFilterPrefixTree=p;var f=[function(e,t,o){return new(1===o.algorithmType?c:r)(e,t,o)},function(e,t,o){return new(1===o.algorithmType?p:a)(e,t,o)}],b=function(){function e(){}return e.prototype.getSearchFilter=function(e,t,o){!o&&(t.filterOptions=o={datasetType:0});var i=f[o.datasetType];return i?i(e,t,o):null},e}();function v(e){var t;return e?(t=e.lineMatches).concat.apply(t,e.children.map(v)):[]}t.FilterFactory=b;var m=function(){function t(){this._root=new n}return t.prototype.addWord=function(e,t){var o=this._root.lineMatches;e.split("").reduce((function(e,t){var o=e.getChild(t);return!o&&e.children.push(o=new n(t)),o}),this._root),!o.includes(t)&&o.push(t)},t.prototype.getMatches=function(t){var o,i=this._root;return e.find(t.split(""),(function(e){return!(o=i.getChild(e))||!(i=o)}))?v(i):[]},t}();t.PrefixTree=m;var h=function(t){function o(e,o,i,n){var r=t.call(this,e,o,i,n)||this;r._msPortalFxLogValidation=ko.observable(),r.filteredItems=ko.observableArray(),r.filterText=ko.observable(""),r.noRowsMessage=ko.observable(""),r.filterInProgress=ko.observable(!1),r.controlType=12;var a=r._options;a.options||(a.options=ko.observableArray());var s=r.value();s&&r.filterText(s);var l=r._values=a.options;return r.populated=ko.computed(e,(function(){return!!l().length})),(new b).getSearchFilter(e,r,r._options.filterOptions),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Obsolete.Forms.FilterComboBox","Fx/Controls/ComboBox"),r}return __extends(o,t),Object.defineProperty(o.prototype,"items",{get:function(){return this._values},enumerable:!1,configurable:!0}),o=__decorate([__metadata("fx:diagnostics",[require,"ObsoleteViewModel"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object,Object])],o)}(o.Base.EditableComboBox.ViewModel);t.ViewModel=h;var g=e.ViewModels.Forms.FilterComboBox={};g.HierarchicalFormOptionItem=i,g.Node=n,g.SearchFilter=r,g.TreeSearchFilter=a,g.SearchFilterPrefixTree=c,g.TreeSearchFilterPrefixTree=p,g.FilterFactory=b,g.PrefixTree=m,g.ViewModel=h})((o=t.Forms||(t.Forms={})).FilterComboBox||(o.FilterComboBox={}))}(t.Obsolete||(t.Obsolete={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.controlType=13;var s=a._options;return a.rows=e.initObservable(s.rows,7),a.spellcheck=i&&i.spellcheck?i.spellcheck:ko.observable(!1),a.ariaLabel=e.initObservable(s.ariaLabel,""),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.MultiLineTextBox","Fx/Controls/MultiLineTextBox"),a}return __extends(o,t),o}(t.Base.Typable.ViewModel);o.ViewModel=i}(t.MultiLineTextBox||(t.MultiLineTextBox={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.controlType=10;var s=a._options;return a.min=e.initObservable(s.min,null),a.max=e.initObservable(s.max,null),a.decimalPoint=e.initObservable(s.decimalPoint,2),a.invalidText=e.initValue(s.invalidText,e.Resources.Strings.NumericTextBox.invalidText),a.placeholder=e.initObservable(s.placeholder,null),a.allowEmpty=e.initValue(s.allowEmpty,!1),a.ariaLabel=e.initObservable(s.ariaLabel,""),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.NumericTextBox","Fx/Controls/NumericTextBox"),a}return __extends(o,t),o}(t.Base.Typable.ViewModel);o.ViewModel=i}(t.NumericTextBox||(t.NumericTextBox={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;a.controlType=29,a.showValidationMessagesBelowControl=!0;var s=a._options;return a.requestUrl=e.initObservable(s.requestUrl,null),a.buttonText=e.initObservable(s.buttonText,null),a.popupWidth=e.initObservable(s.popupWidth,null),a.popupHeight=e.initObservable(s.popupHeight,null),a.primary=e.initObservable(s.primary,!0),a.ariaLabel=s.ariaLabel?e.initObservable(s.ariaLabel):a.buttonText,a.beforeRequest=s.beforeRequest||Q,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.OAuthButton","Fx/Controls/OAuthButton"),a}return __extends(o,t),o}(t.Base.Input.ViewModel);o.ViewModel=i}(t.OAuthButton||(t.OAuthButton={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=function(t){function o(o,i,n,r){var a=t.call(this,o,i,n,r)||this;return a.controlType=4,a.showValidationMessagesBelowControl=!0,r=a._options,a.sizeToContent=void 0===r.sizeToContent||r.sizeToContent,a.radioButtonStyle=!!r.radioButtonStyle,a.singleItemPerLine=!!r.singleItemPerLine,a.ariaLabel=e.initObservable(r.ariaLabel,""),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.OptionsGroup.ViewModel","Fx/Controls/OptionsGroup"),a}return __extends(o,t),o}(t.Base.Options.ViewModel);o.ViewModel=i}(t.OptionsGroup||(t.OptionsGroup={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=e.ViewModels,n=function(t){function o(o,n,r,a){var s=t.call(this,o,n,r,a)||this;return s.controlType=5,s.emptyValueText=s._options.emptyValueText||ko.observable(),s.ariaLabel=e.initObservable(s._options.ariaLabel,""),s.showValidationsAsPopup=!(!s._options||!s._options.showValidationsAsPopup),s.showValidationsAsPopup&&(s.showValidationMessagesBelowControl=!0,s.valueUpdateTrigger=i.Controls.ValueUpdateTrigger.Input),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.PasswordBox","Fx/Controls/PasswordBox"),s}return __extends(o,t),o}(t.Base.Typable.ViewModel);o.ViewModel=n}(t.PasswordBox||(t.PasswordBox={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o,i;!function(e){e[e.Column=0]="Column",e[e.Default=1]="Default",e[e.Dependent=2]="Dependent",e[e.Row=3]="Row",e[e.Tabs=4]="Tabs",e[e.Wrapper=5]="Wrapper",e[e.SingleControl=6]="SingleControl"}(o||(o={})),function(e){e[e.Line=0]="Line",e[e.Block=1]="Block"}(i||(i={}));var n=function(t){function n(n,r){var a=t.call(this,n)||this;return a.active=ko.observable(!1),a.children=ko.observableArray(),a.dirty=ko.observable(!1),a.name=ko.observable(),a.width=ko.observable(),a.submit=ko.observable(),a.populateSection=ko.observable(),a.style=ko.observable(o.Default),a.valid=ko.observable(!0),a.validate=null,a.tabSection=ko.observable(),a.tabHasBeenLoaded=ko.observable(!1),a.controlType=15,e.isNullOrUndefined(r)&&(r={}),a.children=r.children||a.children,a.cssClass=e.initObservable(r.cssClass,""),a.minHeight=r.minHeight,a.name=r.name||a.name,a.populateSection=r.populateSection||a.populateSection,a.style=r.style||a.style,a.submit=r.submit||a.submit,a.tabStyle=r.tabStyle||i.Line,a.visible=e.initObservable(r.visible,!0),a.width=r.width||a.width,a.telemetryName=e.initObservable(r.telemetryName),a.leftLabelPosition=r.leftLabelPosition,a.leftLabelWidth=r.leftLabelWidth,ko.computed(a.lifetimeManager,(function(){var e=a.children(),t=e.some((function(e){var t=ko.unwrap(e);return!!t.dirty&&t.dirty()})),o=a.tabSection&&a.tabSection()&&a.tabSection().children().some((function(e){var t=ko.unwrap(e);return!!t.dirty&&t.dirty()})),i=e.some((function(e){var t=ko.unwrap(e);return!!t.valid&&!t.valid()})),n=e.some((function(e){var t=ko.unwrap(e);return!!t.loading&&t.loading()}));a.dirty(!!t||!!o),a.valid(!i),a.loading(n)})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.Section.ViewModel","Fx/Controls/Section"),a}return __extends(n,t),n.prototype.clearValidation=function(){return Promise.all(this.children().map((function(e){return e.clearValidation?e.clearValidation():Promise.resolve()})))},n.prototype.triggerValidation=function(){var t=this.children().filter((function(e){return"function"==typeof e.triggerValidation})).map((function(e){return e.triggerValidation()}));return Promise.all(t).then((function(t){return t.every(e.identity)}))},n}(e.ViewModels.Controls.Loadable.ViewModel);t.SectionStyle=o,t.TabStyle=i,t.ViewModel=n}(t.Section||(t.Section={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(o){!function(i){var n=e.ViewModels.Controls.Balloon,r=function(t){function o(o,i,r,a){var s=t.call(this,o,i,r,a)||this;s.controlType=11;var l=s._options;return s.showValue=e.initObservable(l.showValue,!0),s.displayText=e.initObservable(l.displayText,""),s.icon=e.initObservable(l.icon),s.locked=e.initObservable(l.locked,!1),s.infoBalloonText=e.initObservable(l.infoBalloonText,""),s.lockedBalloonText=e.initObservable(l.lockedBalloonText,""),s.infoBalloonLink=e.initObservable(l.infoBalloonLink,new n.Link),s.ariaLabel=e.initObservable(l.ariaLabel),s.isDefault=ko.computed(o,(function(){return s.defaultValue()===s.value()})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.Selector.ViewModelBase"),s}return __extends(o,t),o}(o.Base.Editable.ViewModel),a=function(o){function i(i,n,r,a){var s=o.call(this,i,n,r,a)||this,l=s._options;return l&&l.onClick?s._msPortalFxOnClick=function(){return l.onClick()}:s.selectable=new t.Selectable({allowUnselect:!1,selectedValue:l.selectedValue||!0,isSelected:l.initialState&&l.initialState.selectable&&l.initialState.selectable.isSelected,isActivated:l.initialState&&l.initialState.selectable&&l.initialState.selectable.isActivated}),s._options.viewModelValueChangesAreClean||s.resetDirtyComputed((function(){s.setDirty(!e.deepEquals(s.value(),s.initialValue()))})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.Selector.ViewModel"),s}return __extends(i,o),i}(r);i.ViewModelBase=r,i.ViewModel=a}(o.Selector||(o.Selector={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o,i=e.Resources.Strings.ViewModels.Controls.CreatorAndSelector,n=e.ViewModels,r=e.ViewModels.Forms.Selector;!function(e){e[e.CreateOnly=0]="CreateOnly",e[e.SelectOnly=1]="SelectOnly",e[e.CreateOrSelect=2]="CreateOrSelect"}(o||(o={}));var a=function(e){function t(t,r,a,s){var l=this;if(r||(s={defaultValue:ko.observable({value:"",createNew:!0})}),r&&(!r.valid||!r.sections)){var c=r.defaultValue;c?c()||c({value:"",createNew:!0}):c=ko.observable({value:"",createNew:!0})}(l=e.call(this,t,r,a,s)||this).controlType=85,r.valid&&r.sections&&!l._msPortalFxViewModelValueChangesAreClean&&l.resetDirtyComputed((function(){var e=l.value(),t=l.initialValue();e&&t?l.setDirty(t.value!==e.value||t.createNew!==e.createNew):l.setDirty(e!==t)}));var u=l._options;return l.textBoxLabel=u.textBoxLabel||ko.observable(""),l.selectExistingLinkDisplayText=u.selectExistingLinkDisplayText||ko.observable(i.selectExisting),l.createNewLinkDisplayText=u.createNewLinkDisplayText||ko.observable(i.createNew),l.displayMode=u.displayMode||ko.observable(o.CreateOrSelect),l.valueUpdateTrigger=u.valueUpdateTrigger||n.Controls.ValueUpdateTrigger.Input,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.CreatorAndSelectorV2.ViewModel"),l}return __extends(t,e),t}(r.ViewModel);t.Mode=o,t.ViewModel=a}(t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o,i,n){var r=e.call(this,t,o,i,n)||this;return r.controlType=6,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.Slider","Fx/Controls/Slider"),r}return __extends(t,e),t}(e.Base.Slider.ViewModel);t.ViewModel=o}(e.Slider||(e.Slider={}))}(e.Forms||(e.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=function(t){function o(e,o){var i=t.call(this,e)||this;i.disabled=ko.observable(!1),i.loading=ko.observable(!1),i.controlType=1,i.validate=ko.observable(0),i.fields=ko.observableArray();var n=i.lifetimeManager;return i.dirty=ko.computed(n,(function(){return i.fields().some((function(e){return e.dirty()}))})),i.valid=ko.computed(n,(function(){return!i.fields().some((function(e){return!e.valid()}))})),i.validate.subscribe(n,(function(e){i.fields().forEach((function(t){t.validate(e)}))})),o&&ko.utils.arrayPushAll(i.fields,o),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.StaticSection.ViewModel","Fx/Controls/Section"),i}return __extends(o,t),o.prototype.clearValidation=function(){return Promise.all(this.fields().map((function(e){return e.clearValidation()})))},o.prototype.triggerValidation=function(){return Promise.all(this.fields().map((function(e){return e.triggerValidation()}))).then((function(t){return t.every(e.identity)}))},o}(e.ViewModels.Controls.Base.ViewModel);t.ViewModel=o}(t.StaticSection||(t.StaticSection={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=e.ViewModels,n=function(t){function o(o,n,r,a){var s,l=t.call(this,o,n,r,a)||this;return l.controlType=2,l.readOnly=l._options.readOnly||!1,l.actionHandler=a?a.actionHandler:n?n.actionHandler:null,l.actionsEnabled=ko.observable(!0),l.ariaLabel=e.initObservable(l._options.ariaLabel,""),l.showValidationsAsPopup=!(!l._options||!l._options.showValidationsAsPopup),l.spellcheck=n&&n.spellcheck?n.spellcheck:ko.observable(!1),l.onEnterPressed=a?a.onEnterPressed:n?n.onEnterPressed:null,l.showValidationsAsPopup&&(l.showValidationMessagesBelowControl=!0,l.valueUpdateTrigger=i.Controls.ValueUpdateTrigger.Input),(null===(s=l._options)||void 0===s?void 0:s.shellUseOnly)||FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.TextBox","Fx/Controls/TextBox"),l}return __extends(o,t),o}(t.Base.Typable.ViewModel);o.ViewModel=n}(t.TextBox||(t.TextBox={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i=e.isNullOrUndefined,n=e.Resources.Strings.FileUpload;function r(t,o,i){return Q(e.tryImmediateResolve(Q(t),(function(e){return e?e(o.map((function(e){return{id:e.id,name:e.name}})),i):Q.reject(FxImpl.createError(n.notReady))})))}o.execUpload=r;var a=function(t){function o(o,n,r,a){var s=t.call(this,o,n,r,a)||this;s.controlType=106;var l=s._options;return s.accept=l.accept||null,s.allowedFileExtensions=l.allowedFileExtensions||null,s.maxFiles=l.maxFiles||1,s.uploadContext=l.uploadContext||ko.observable(),s.selectedFiles=ko.observableArray(),s.uploadTasks=ko.observableArray(),s.autoAddUploadTasks=!!e.isNullOrUndefined(l.autoAddUploadTasks)||l.autoAddUploadTasks,s.ariaLabel=e.initObservable(l.ariaLabel),s._msPortalFxUploadActionCallback=ko.observable(null),i(n)||n.valid&&n.sections||s._options.viewModelValueChangesAreClean||s.resetDirtyComputed((function(){s.setDirty(!e.deepEquals(s.value(),s.initialValue()))})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Forms.AsyncFileUpload","Fx/Controls/FileUpload"),s}return __extends(o,t),o.prototype.addUploadTasks=function(e){return r(this._msPortalFxUploadActionCallback(),e,5)},o.prototype.resetUploadTasks=function(){return Q(r(this._msPortalFxUploadActionCallback(),[],6))},o}(t.Base.Editable.ViewModel);o.ViewModel=a}(t.AsyncFileUpload||(t.AsyncFileUpload={}))}(t.Forms||(t.Forms={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){var t,o=ko.pureComputed(MsPortalFx.wrap(!0));!function(e){e[e.None=0]="None",e[e.Pending=1]="Pending",e[e.Success=2]="Success",e[e.Failure=3]="Failure"}(t||(t={}));var i=function(e){function o(o,i,n,r){var a=e.call(this,o)||this;return a.text=ko.observable(i||""),a.ariaLabel=ko.observable(),a.visible=ko.observable(!0),a.afterExecute=null,a.status=ko.observable(t.None),a.error=ko.observable(null),a.handler=ko.observable(null),a.attach(n,r),a}return __extends(o,e),o.prototype.execute=function(){var e,o=this,i=!1,n=this.error,r=this.status;try{n(null),r(t.Pending);var a=this.handler();if(!a)throw new Error("Command does not have handler.");var s=a.execute();e=Q(s).then((function(){i=!0}))}catch(t){e=Q.reject(t)}return e.finally((function(e){i?r(t.Success):(n(e),r(t.Failure));var a=o.afterExecute;a&&a()}))},o.prototype.attach=function(e,t){if(e){var o=new n(e,t);this.attachHandler(o)}},o.prototype.attachHandler=function(e){this.handler(e)},o.prototype.detach=function(){this.handler(null)},o}(MsPortalFx.ViewModels.Controls.Loadable.ViewModel),n=function(e,t,i){this.execute=function(){return e.call(i)},this.canExecute=t?ko.pureComputed(t,i):o};e.Status=t,e.ViewModel=i,e.DelegatingHandler=n}(e.Command||(e.Command={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){!function(o){var i=e.ViewModels,n=i.Controls,r=e.isNullOrWhiteSpace,a=e.Resources.Strings.DeleteAssetConfirmation,s=e.ViewModels.Forms.TextBox,l=function(t){function o(o,i){var s=t.call(this,o)||this;s.selectedItems=ko.observableArray(),s._gridItems=null,s._options=null,s._assetName=ko.observable(),s._assetTypeDisplayName=ko.observable(),s.affectedItemsLabel=ko.observable(a.affectedItemsLabel),s.controlType=76,s._options=i;var l=s.lifetimeManager;s._assetTypeDisplayName(i.assetTypeDisplayName);var u=i.grid;if(u){var d=u.selectableRowExtensionOptions,p=d?n.Lists.Grid.Extensions.SelectableRow:null,f=s.grid=new n.Lists.Grid.ViewModel(l,u.items,p,d);f.columns=u.columns,f.noRowsMessage=u.noRowsMessage,f.showHeader=!!e.isNullOrUndefined(u.showHeader)||u.showHeader,d&&(s.selectedItems=f.selectableData.selectedItems),s._gridItems=f.items}var b=s._assetName;s.warning=ko.computed(l,(function(){return s._onUpdateWarningText(b())}));var v=s.confirmationLabel=ko.computed(l,(function(){return s._onUpdateConfirmationLabel(s._assetTypeDisplayName())}));return s.confirmationEditor=new c(l,b,v),s.valid=ko.computed(l,(function(){var e=b(),t=s.confirmationEditor.textBox.valid();return!r(e)&&t})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.DeleteAssetConfirmation.ViewModel","Fx/Controls/"),s}return __extends(o,t),o.prototype._onUpdateWarningText=function(e){return a.warningText.format(e)},o.prototype._onUpdateConfirmationLabel=function(e){return a.confirmationLabel.format(e)},o.prototype._selectAll=function(){var e=this.grid&&this.grid.selectableData;e&&e.selectableItems().forEach((function(e){return e.isSelected(!0)}))},o}(t.Loadable.ViewModel),c=function(){function e(e,t,o){var l=this._lifetimeManager=e.createChildLifetime(),c=this.textBox=new s.ViewModel(e);c.disabled(!0),c.valueUpdateTrigger=n.ValueUpdateTrigger.Input,ko.computed(l,(function(){var e=t();r(e)?(c.disabled(!0),c.validations([])):(c.disabled(!1),c.validations([new i.EqualsValidation(e,a.assetNameValidationFailureMessage.format(e))]),c.value(""))})),ko.computed(l,(function(){c.ariaLabel(o())}))}return e.prototype.dispose=function(){this._lifetimeManager.dispose()},e}();o.ViewModel=l}(t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=function(e){function t(t){var o=e.call(this,t)||this;return o.disabled=ko.observable(!1),o.controlType=84,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.HotSpot.BaseViewModel"),o}return __extends(t,e),t}(e.ViewModels.Controls.Base.ViewModel);t.BaseViewModel=o}(t.HotSpot||(t.HotSpot={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(o){!function(o){var i=function(e){function o(o){var i=e.call(this,o)||this;return i.selectable=t.Part.createSelectableViewModel(),i.clickableDuringCustomize=!1,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.HotSpot.ViewModel","fxclick"),i}return __extends(o,e),o}(e.ViewModels.Controls.HotSpot.BaseViewModel);o.ViewModel=i}(o.HotSpot||(o.HotSpot={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=function(e){function t(t,o){var i=e.call(this,t)||this;return i.controlType=88,i.clickableLink=o?o.clickableLink:ko.observable(),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.HotSpot.LinkViewModel","fxclick"),i}return __extends(t,e),t}(e.ViewModels.Controls.HotSpot.BaseViewModel);t.LinkViewModel=o}(t.HotSpot||(t.HotSpot={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i;!function(e){e[e.Small=0]="Small",e[e.Normal=1]="Normal"}(i||(i={}));var n=function(t){function o(o,n){var r=t.call(this,o,!1)||this;return r.image=e.initObservable(null==n?void 0:n.image),r.text=e.initObservable(null==n?void 0:n.text),r.size=e.initObservable(null==n?void 0:n.size,i.Normal),(null==n?void 0:n.shellUseOnly)||FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.InfoBox.BaseViewModel"),r}return __extends(o,t),o}(t.Loadable.ViewModel);o.Size=i,o.BaseViewModel=n}(t.InfoBox||(t.InfoBox={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.ViewModels.Controls.InfoBox,i=function(e){function t(t){void 0===t&&(t={});var o=e.call(this,t)||this;return o.isClickable&&o.isClickable.dispose(),o.isClickable=ko.pureComputed((function(){return o.isSelected()&&!!o.selectedValue()})),o}return __extends(t,e),t}(e.ViewModels.Selectable),n=function(e){function t(t,o,n,r){var a=e.call(this,t,r)||this;return a.controlType=78,a.selectable=new i({isSelected:o&&o.isSelected}),(null==r?void 0:r.shellUseOnly)||FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.InfoBox.ViewModel","Fx/Controls/Infobox"),a}return __extends(t,e),t}(o.BaseViewModel);t.ViewModel=n}(t.InfoBox||(t.InfoBox={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.controlType=87,i.clickableLink=o?o.clickableLink:ko.observable(),(null==o?void 0:o.shellUseOnly)||FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.InfoBox.LinkViewModel","Fx/Controls/Infobox"),i}return __extends(t,e),t}(e.ViewModels.Controls.InfoBox.BaseViewModel);t.LinkViewModel=o}(t.InfoBox||(t.InfoBox={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){!function(t){var o;!function(e){e[e.Auto=1]="Auto",e[e.Yes=2]="Yes",e[e.No=3]="No"}(o=t.Scroll||(t.Scroll={}));var i=function(e){function t(t,i){var n=e.call(this,t)||this;return n.controlType=108,n.src=i.src,n.scrolling=i.scrolling||o.Auto,n.postMessage=i.postMessage||ko.observable("Initialized"),n.receiveMessage=i.receiveMessage||ko.observable(),n.timeoutInMs=i.loadTimeoutInMilliseconds||3e4,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Internal.IFrame","Fx/Controls/FrameControl"),n}return __extends(t,e),t}(e.Base.ViewModel);t.ViewModel=i}(t.IFrame||(t.IFrame={}))}(e.Internal||(e.Internal={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){var o;!function(e){e[e.Info=0]="Info",e[e.Validation=2]="Validation"}(o||(o={}));var i=function(e){function t(t){var i=e.call(this,t)||this;return i.type=o.Info,i.content=ko.observable(""),i.ariaLabel=ko.observable(""),i.link=ko.observable(),i.balloonVisible=ko.observable(!1),i.stopClickPropagation=ko.observable(!0),i.controlType=32,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.DockedBalloon.ViewModel","Fx/Controls/InfoBalloon"),i}return __extends(t,e),t}(e.Loadable.ViewModel);t.Type=o,t.ViewModel=i}(e.DockedBalloon||(e.DockedBalloon={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(t){var o,i,n,r=FxImpl.ViewModels.Controls.Command.ViewModel;!function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom",e[e.Bat=2]="Bat",e[e.C=3]="C",e[e.CoffeeScript=4]="CoffeeScript",e[e.Cpp=5]="Cpp",e[e.CSharp=6]="CSharp",e[e.CSHtml=7]="CSHtml",e[e.Css=8]="Css",e[e.Dockerfile=9]="Dockerfile",e[e.FSharp=10]="FSharp",e[e.Go=11]="Go",e[e.Handlebars=12]="Handlebars",e[e.Html=13]="Html",e[e.Ini=14]="Ini",e[e.Pug=15]="Pug",e[e.Java=16]="Java",e[e.JavaScript=17]="JavaScript",e[e.JSHtm=18]="JSHtm",e[e.Json=19]="Json",e[e.Less=20]="Less",e[e.Lua=21]="Lua",e[e.MarkDown=22]="MarkDown",e[e.ObjectiveC=23]="ObjectiveC",e[e.Php=24]="Php",e[e.PowerShell=25]="PowerShell",e[e.Python=26]="Python",e[e.R=27]="R",e[e.Ruby=28]="Ruby",e[e.Sql=29]="Sql",e[e.Swift=30]="Swift",e[e.TypeScript=31]="TypeScript",e[e.VisualBasic=32]="VisualBasic",e[e.Xaml=33]="Xaml",e[e.Xml=34]="Xml",e[e.MySQL=35]="MySQL",e[e.PgSQL=36]="PgSQL",e[e.Kql=37]="Kql",e[e.Yaml=38]="Yaml"}(o||(o={})),t.ContentType=o,function(e){e[e.ES5=0]="ES5",e[e.ES6=1]="ES6"}(i||(i={})),t.TypeScriptScriptTarget=i,function(e){e[e.Ignore=0]="Ignore",e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(n||(n={})),t.MarkerSeverity=n;var a=function(e){function t(t,o,i,n,a,s,l,c){void 0===n&&(n={}),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===c&&(c=null);var u=e.call(this,t)||this;return u.controlType=37,u.contentType=ko.observable(o),u.customContentType=ko.observable(a),u.content=ko.observable(i),u.contentUri=ko.observable(),u.selectedContent=ko.observable(""),u.selectedRange=ko.observable({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}),u.markers=ko.observableArray(),u.position=ko.observable({lineNumber:1,column:1}),u.options=ko.observable(n),u.dirty=ko.observable(!1),u.visible=ko.observable(!0),u.save=new r(t,""),u.refresh=new r(t,""),u.autoSaveTimeout=ko.observable(0),u.configuration=c,u.content.extend({notify:"always"}),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Documents.Editor","Fx/Controls/Editor"),u}return __extends(t,e),t}(e.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=a}(t.Editor||(t.Editor={}))}(t.Documents||(t.Documents={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(e){!function(e){e[e.SortableColumn=1]="SortableColumn",e[e.SelectableRow=2]="SelectableRow",e[e.RightClickableRow=4]="RightClickableRow",e[e.Groupable=8]="Groupable",e[e.EditableRow=16]="EditableRow",e[e.Filterable=32]="Filterable",e[e.ReorderRow=64]="ReorderRow",e[e.ContextMenuShortcut=128]="ContextMenuShortcut",e[e.Pageable=256]="Pageable",e[e.Hierarchical=512]="Hierarchical",e[e.Scrollable=1024]="Scrollable",e[e.Hoverable=2048]="Hoverable",e[e.ResizableColumn=4096]="ResizableColumn"}(e.Extensions||(e.Extensions={}))}(e.Grid||(e.Grid={}))}(e.Lists||(e.Lists={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(e){!function(e){e[e.Html=1]="Html",e[e.Text=2]="Text",e[e.ShortTime=100]="ShortTime",e[e.LongTime=101]="LongTime",e[e.ShortDate=102]="ShortDate",e[e.LongDate=103]="LongDate",e[e.MonthDay=104]="MonthDay",e[e.YearMonth=105]="YearMonth",e[e.CustomDate=106]="CustomDate",e[e.Uri=107]="Uri",e[e.Icon=108]="Icon",e[e.IconLookup=109]="IconLookup",e[e.TextLookup=110]="TextLookup",e[e.SvgIcon=111]="SvgIcon",e[e.SvgIconLookup=112]="SvgIconLookup",e[e.PercentageBar=113]="PercentageBar",e[e.Number=114]="Number",e[e.HtmlBindings=1e3]="HtmlBindings"}(e.Format||(e.Format={})),function(e){e[e.Default=0]="Default",e[e.CheckBox=1]="CheckBox",e[e.TextBox=2]="TextBox",e[e.CheckBoxRowSelection=4]="CheckBoxRowSelection",e[e.DropDown=5]="DropDown",e[e.GroupDropDown=6]="GroupDropDown"}(e.HtmlBindingsType||(e.HtmlBindingsType={}))}(e.Grid||(e.Grid={}))}(e.Lists||(e.Lists={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(t){var o=function(t){function o(o,i){var n=t.call(this,o)||this;return n.value=ko.observable(),"boolean"==typeof i?i={loading:ko.observable(i)}:null==i&&(i={}),n.readOnly=ko.observable(!1),n.loading=ko.observable(!1),i=i||{},n.cssClass=e.initObservable(i.cssClass,""),n.hideValidationCheck=i.hideValidationCheck||!1,n.infoBalloonContent=e.isNullOrUndefined(i.infoBalloonContent)?ko.observable():i.infoBalloonContent,n.infoBalloonLinkContent=i.infoBalloonLinkContent||ko.observable(),n.label=e.isNullOrUndefined(i.label)?ko.observable():i.label,n.labelPosition=e.isNullOrUndefined(i.labelPosition)?ko.observable(e.ViewModels.Forms.LabelPosition.Top):i.labelPosition,n.subLabel=e.initObservable(i.subLabel,void 0),n.subLabelPosition=e.isNullOrUndefined(i.subLabelPosition)?ko.observable(e.ViewModels.Forms.SubLabelPosition.Bottom):i.subLabelPosition,n.visible=e.initObservable(i.visible,!0),n._msPortalFxLeftLabelWidth=ko.observable(),n._msPortalFxRequired=ko.observable(),n.controlType=40,n.hideTextbox=i&&i.hideTextbox,n.ariaLabel=e.initObservable(i&&i.ariaLabel,""),n._msPortalFxRows=i&&i.rows||1,n.subLabel=e.initObservable(i&&i.subLabel),(null==i?void 0:i.shellUseOnly)||FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Forms.CopyableLabel","Fx/Controls/CopyableLabel"),n}return __extends(o,t),o}(e.ViewModels.Controls.Base.ViewModel);t.ViewModel=o}(t.CopyableLabel||(t.CopyableLabel={}))}(t.Forms||(t.Forms={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(e){!function(e){e[e.Default=0]="Default",e[e.DateTime=1]="DateTime",e[e.SettingListGroupOrder=9999]="SettingListGroupOrder"}(e.SortFunction||(e.SortFunction={}))}(e.Grid||(e.Grid={}))}(e.Lists||(e.Lists={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(e){!function(e){e[e.Sequential=0]="Sequential",e[e.Pageable=1]="Pageable"}(e.PageableType||(e.PageableType={}))}(e.Grid||(e.Grid={}))}(e.Lists||(e.Lists={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(t){var o=e.Base.Diagnostics,i=e.ViewModels,n=i.Controls.Lists.Grid.Extensions,r=e.ViewModels.Controls.Lists.Grid.Extensions.EditableRow,a=e.disposeDisposable,s="",l={itemsSuppliedWithEditableRow:s,editScopeRoot:s,pageableEditableRowMismatch:s,pageableScrollableMismatch:s,missingValidDataNavigator:s,itemsSuppliedWithPageableExtensionWithDataNav:s,blockInteractionUntilEditScopeLoads:s,itemsSuppliedWithScrollableExtensionWithDataNav:s,sortCallbackWithDataNav:s,loadBySkipTakeMissing:s,loadByContinuationTokenMissing:s,scrollableEditableRowMismatch:s},c=FxImpl.getErrorMap(l);function u(e,t){return t(e)}function d(e){var t=e();return t||c.blockInteractionUntilEditScopeLoads(),t}var p=function(s){function l(o,a,l,p){var f=s.call(this,o)||this;o=f.lifetimeManager,f.controlType=54,f.addEmptyRow=ko.observable(),f.summary=ko.observable(),f.columns=ko.observableArray(),f.resetCallback=ko.observable(),f.noRowsMessage=ko.observable(e.Resources.Strings.ViewModels.Controls.noRowsMessage),f.sortByList=ko.observableArray(),f.showHeader=!0,f._resetHandler=null,f._addCreatedLocked=!1,f._pendingResetCallbackPromise=null,f.ariaLabel=f.summary,f.items=a||ko.observableArray(),f.createdItems=ko.observableArray();var b=p||{};f.extensionsOptions={},f.getRowAriaLabel=b.getRowAriaLabel,f.rowAriaLabelDependencies=b.rowAriaLabelDependencies,f._msPortalFxActions={waitForChanges:function(){return Promise.resolve()}};var v,m,h=l&n.ContextMenuShortcut,g=l&r,y=l&n.Filterable,x=l&n.Groupable,M=l&n.Hierarchical,P=l&n.Hoverable,_=l&n.Pageable,w=l&n.ReorderRow,k=l&n.ResizableColumn,S=l&n.RightClickableRow,F=l&n.SelectableRow,C=l&n.SortableColumn,I=e.initValue(b.scrollable&&b.scrollable.horizontal,!0),V=e.initValue(b.scrollable&&b.scrollable.vertical,!!(b.scrollable||l&n.Scrollable));k||(l|=k=n.ResizableColumn),g&&(l|=F=n.SelectableRow,l|=S=n.RightClickableRow),h&&(l|=S=n.RightClickableRow),S&&(l|=F=n.SelectableRow),F&&(l|=S=n.RightClickableRow),f.extensions=l,g&&(v=f.extensionsOptions.editableRow=e.clone(b.editableRow)),y&&(f.extensionsOptions.filterable=e.clone(b.filterable)),x&&(f.extensionsOptions.groupable=e.clone(b.groupable)),M&&(f.extensionsOptions.hierarchical=e.clone(b.hierarchical)),P&&(f.extensionsOptions.hoverable=e.clone(b.hoverable)),_&&(m=f.extensionsOptions.pageable=e.clone(b.pageable)),w&&(f.extensionsOptions.reorderRow=e.clone(b.reorderRow)),k&&(f.extensionsOptions.resizableColumn=e.clone(b.resizableColumn)),h&&(f.extensionsOptions.contextMenuShortcut=e.clone(b.contextMenuShortcut));var T,B,D=f.extensionsOptions.scrollable={dataNavigator:b.scrollable&&b.scrollable.dataNavigator,horizontal:I,vertical:V};if(F&&(T=f.extensionsOptions.selectableRow=e.clone(b.selectableRow),f.extensionsOptions.onRowClicked=b.onRowClicked),C&&(B=f.extensionsOptions.sortableColumn=e.clone(b.sortableColumn)),g){FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Lists.Grid.Extensions.EditableRow","Fx/Controls/EditableGrid");var A=v.editScope;if(A&&a&&c.itemsSuppliedWithEditableRow(),A){f._editScope=A,v.editScope=null,v.getItems||(v.getItems=function(e){return ko.isObservable(e.root)&&Array.isArray(e.root())&&"splice"in e.root||c.editScopeRoot(),e.root});var O=function(e,t){return ko.computed(o,(function(){var o=t(),i=o?o():[];e.splice.apply(e,[0,e().length].concat(i))}))};O(f.items,(function(){var e=f._editScope();return e&&u(e,v.getItems)})),O(f.createdItems,(function(){var e=f._editScope();return e&&e.getCreated(u(e,v.getItems))}));var R=ko.computed(o,(function(){return!!f._editScope()}));e.extend(v,{create:function(){return f._create(d(f._editScope),v.getItems)},addCreated:function(e){f._addCreated(d(f._editScope),v.getItems,e)},markForDelete:function(e){f._markForDelete(d(f._editScope),e)},enableValidation:R}),!1!==v.enableRowAdd&&f._addInitialCreatedRow(f._editScope,v.getItems)}}if(y&&(f._msPortalFxActions.waitForExternalFiltering=function(e){return Q().then((function(){}))}),_){g&&c.pageableEditableRowMismatch(),V&&c.pageableScrollableMismatch();var E=m.dataNavigator;E||c.missingValidDataNavigator(),E&&a&&c.itemsSuppliedWithPageableExtensionWithDataNav();var L=m.type;L!==t.PageableType.Pageable&&t.PageableType.Sequential,L!==t.PageableType.Sequential||E.loadByContinuationToken||c.loadByContinuationTokenMissing(),L!==t.PageableType.Pageable||E.loadBySkipTake||c.loadBySkipTakeMissing(),f._resetHandler=function(){return f.reset()},E.addResetNavigationListener(f._resetHandler)}if(C){var N=B.dataNavigator,U=f.sortByList,G=B.sortCallback;N||(N=B.dataNavigator=_&&m.dataNavigator||V&&D.dataNavigator),N&&G&&c.sortCallbackWithDataNav(),N||G||(G=B.sortCallback=function(t){var o=f.items().slice(0);t&&t.length&&o&&o.length&&o.sort((function(o,i){var n=0;return t.some((function(t){var r=o[t.itemKey],a=i[t.itemKey];return(n=e.compare(r,a))&&2===t.sortOrder&&(n=-n),0!==n})),n})),f.items(o)}),f._msPortalFxActions.sort=function(e){return U(e),N?Q(N.resetNavigation()):Q(G(e))}}if(V){g&&c.scrollableEditableRowMismatch(),_&&c.pageableScrollableMismatch();var z=D.dataNavigator;z&&(a&&c.itemsSuppliedWithScrollableExtensionWithDataNav(),f._resetHandler=function(){return f.reset()},z.addResetNavigationListener(f._resetHandler))}if(F){var H=f.items;e.isUndefined(T.selectionMode)&&(T.selectionMode=1),e.isUndefined(T.leaveSelectionOnDeactivation)&&(T.leaveSelectionOnDeactivation=1!==T.selectionMode),f.createdItems&&(H=ko.computed(o,(function(){return f.items().concat(f.createdItems())}))),f.selectableData=new i.SelectableSet(H,T.itemMatchesSelection,T.createSelection,T.initialSelection,T.supplyCommands,!0,T.leaveSelectionOnDeactivation)}var q=f.items.map(o,(function(e,t){return ko.ignoreDependencies((function(){return f._createMetadataForItem(e,t)}))})),j=f.createdItems.map(o,(function(e,t){return ko.ignoreDependencies((function(){return f._createMetadataForItem(e,t)}))}));return f.rowMetadata=ko.observableArray(),ko.computed(o,(function(){f.rowMetadata(q().concat(j()))})),f}return __extends(l,s),l.prototype.getRowMetadata=function(t){return e.find(this.rowMetadata(),(function(e){return e.item===t}))},l.prototype.reset=function(){var t=this,o=this.resetCallback();if(o)return Q(o());if(!this._pendingResetCallbackPromise){var i=Q.defer();this._pendingResetCallbackPromise=i.promise,this.resetCallback.fxAwait(this.lifetimeManager,(function(e){return!!e})).then((function(o){t._pendingResetCallbackPromise?Q(o()).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})).finally((function(){t._pendingResetCallbackPromise=null})):i.reject(new e.Errors.DisposedCanceledError)}))}return this._pendingResetCallbackPromise},l.prototype.dispose=function(){if(this._resetHandler){var e=this.extensionsOptions.pageable;e&&e.dataNavigator&&e.dataNavigator.removeResetNavigationListener(this._resetHandler),this._resetHandler=null}this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null),a(this.selectableData),s.prototype.dispose.call(this)},l.prototype._createMetadataForItem=function(e,t){var o={item:t,cssClass:ko.observable(""),ariaLabel:ko.observable()};if(this.extensions&n.ContextMenuShortcut){var i=this.extensionsOptions.contextMenuShortcut;o.canShowMenu=ko.observable(!0),i&&i.canShowMenu&&ko.reactor(e,(function(){o.canShowMenu(!!i.canShowMenu(t))}))}this.extensions&r&&(this.extensionsOptions.editableRow&&(o.editState=d(this._editScope).getEditState(t)));if(this.extensions&n.SelectableRow){var a=this.extensionsOptions.selectableRow;o.selected=ko.observable(!1),o.disabled=ko.observable(!1),o.activated=ko.observable(null),o.activatedInfo=ko.observable(null),o.useDefaultActivation=ko.observable(!0),a&&a.linkProvider&&(o.link=a.linkProvider(e,t))}return this.extensions&n.Groupable&&(o.groupId=ko.observable("")),o},l.prototype._create=function(e,t){var o=e.create(u(e,t)),i=this.extensionsOptions.editableRow;return i&&i.created&&i.created(o),this.addEmptyRow(o),Q.resolve(o)},l.prototype._addCreated=function(e,t,o){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var i=this.createdItems().some((function(e){return e&&o&&e===o}));o&&!i&&e.addCreated(o,u(e,t))}finally{this._addCreatedLocked=!1}},l.prototype._markForDelete=function(t,i){var n,r=function(e){return e===i},a=e.find(this.items(),r);a?t.markForDelete(a):(a=e.find(this.createdItems(),r))?t.revert(a):(n="The item marked for deletion could not be found.",o.Log.writeEntry(2,"Grid",n))},l.prototype._addInitialCreatedRow=function(e,t){var o=this;e.fxOnceAndRun(this.lifetimeManager,(function(e){return function(e){o._create(e,t)}(e)}))},l}(e.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=p}(t.Grid||(t.Grid={}))}(t.Lists||(t.Lists={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){!function(t){var o=function(t){function o(e,o,i,n){var r=t.call(this,e)||this;FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Lists.TreeView","Fx/Controls/TreeView");var a,s=n&&n.selectable&&n.selectable.supplyCommands;return FxImpl.shellInterface(r,{CurrentCommands:ko.observableArray(),OnItemClicked:n&&n.selectable&&n.selectable.onItemClicked,SupplyCommands:s?function(t){null==a||a.dispose(),a=e.createChildLifetime();var o=s(t,a);return FxImpl.shellInterface(r).CurrentCommands(o),o}:void 0}),r.controlType=57,r.padding=ko.observable(16),r.alwaysExpanded=ko.observable(!1),r.ariaLabel=ko.observable(""),r.htmlTemplates=[],r.toggleNodeCallback=ko.observable(),r._tokenStorage={},r.pathSeparator="/",r.items=o||ko.observableArray(),r.extensions=i||0,r.extensionsOptions=n,r.canLoadMoreRootItems=ko.observable(!1),r._processCallBack=function(e){if(e)for(var t=0,o=e.length;t<o;t++)r._processItem(e[t])},r._processItems(r.items),r._selectableExists&&r._setupSelectable(n.selectable),r._loadableExists&&r._setupOnDemandLoadable(),r._selectableExists&&1===r.extensionsOptions.selectable.selectionMode&&r.selectableData.selectedPaths.subscribeArrayChanges(r.lifetimeManager,(function(e){r.findItemByPath(e).metadata.selected(!0)}),(function(e){r.findItemByPath(e).metadata.selected(!1)})),r}return __extends(o,t),o.prototype.loadMoreNode=function(e,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode?this.extensionsOptions.loadableByContinuationToken.loadMoreNode(e,t):Q({items:[],continuationToken:null})},o.prototype.loadMoreRootItems=function(){var e=this;return this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems?this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems().then((function(t){t.length&&(e._processCallBack(t),e.items.push.apply(e.items,t))})):Q()},o.prototype.syncToken=function(e,t){this._tokenStorage[e]=t},o.prototype.getTokenByPath=function(e){return this._tokenStorage[e]},o.prototype.expandNode=function(e){this.toggleNode(e,!0)},o.prototype.collapseNode=function(e){this.toggleNode(e,!1)},o.prototype.toggleNode=function(e,t){void 0===t&&(t=!e.metadata.expanded());var o=this.toggleNodeCallback();o&&o(e,t)},o.prototype.findItemByPath=function(t){var o,i=this.items;if(t)for(var n=t.split(this.pathSeparator),r=function(t,r){var a=n[t].toLowerCase();if(!(o=e.find(i(),(function(e){return a===e.text().toLowerCase()}))))return"break";i=o.items||ko.observableArray()},a=0,s=n.length;a<s;a++){if("break"===r(a))break}return o},Object.defineProperty(o.prototype,"_selectableExists",{get:function(){return(1&this.extensions)>0&&!!this.extensionsOptions.selectable},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_loadableExists",{get:function(){return(2&this.extensions)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!1,configurable:!0}),o.prototype._processItems=function(e){this._processCallBack(e()),e.subscribeArrayBulkChanges(this.lifetimeManager,this._processCallBack)},o.prototype._processItem=function(e){var t=e.metadata||(e.metadata={});t.disabled||(t.disabled=ko.observable(!1)),t.expanded||(t.expanded=ko.observable()),this._selectableExists&&(t.selected||(t.selected=ko.observable(!1)),t.selectable||(t.selectable=ko.observable(!0)),t.focused||(t.focused=ko.observable(!1))),this._loadableExists&&(t.loadable||(t.loadable=ko.observable())),e.items=e.items||ko.observableArray(),this._processItems(e.items)},o.prototype._setupSelectable=function(e){var t=this;this.selectableData={selectedItem:ko.observable(),selectedPath:ko.observable(),selectionMode:e.selectionMode||0,selectedItems:ko.observableArray(),selectedPaths:ko.observableArray()},this.selectableData.selectedPath.subscribe(this.lifetimeManager,(function(e){var o=t.findItemByPath(e);o&&t.selectableData.selectedItem(t.extensionsOptions.selectable.createSelection(o,e))})),this.selectableData.selectedPaths.subscribe(this.lifetimeManager,(function(e){var o=e.map((function(e){var o=t.findItemByPath(e);return t.extensionsOptions.selectable.createSelection(o,e)}));t.selectableData.selectedItems(o)}))},o.prototype._setupOnDemandLoadable=function(){var e=this,t=ko.observable();t.extend({notify:"always"}),t.subscribe(this.lifetimeManager,(function(t){var o=e.findItemByPath(t);o&&e.extensionsOptions.onDemandLoadable.loadItem(o,t)})),this.onDemandLoadableData={loadingPath:t}},o=__decorate([__metadata("fx:diagnostics",[require,"ObsoleteViewModel"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Number,Object])],o)}(e.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=o}(t.TreeView||(t.TreeView={}))}(t.Lists||(t.Lists={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(t){var o=function(e){function t(t,o){var i=e.call(this,t)||this;return i.controlType=112,i.options=o,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.PartPinner.ViewModel","Fx/Pinner"),i}return __extends(t,e),t}(e.Base.ViewModel);t.ViewModel=o}(e.PartPinner||(e.PartPinner={}))}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){var i,n=e.initObservableArray;!function(e){e[e.Orange=0]="Orange",e[e.DarkOrchid=1]="DarkOrchid",e[e.YellowGreen=2]="YellowGreen",e[e.MediumBlue=3]="MediumBlue"}(i||(i={})),o.Colors=i;var r=function(e){function t(t,o){void 0===o&&(o={});var i=e.call(this,t)||this;return i.controlType=95,i.headers=n(o.headers,[]),i.rows=n(o.rows,[]),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.SpecComparisonTable","Fx/Controls/DataGrid, Fx/Controls/EditableGrid, or a custom implementation"),i}return __extends(t,e),t}(t.Base.ViewModel);o.ViewModel=r}(t.SpecComparisonTable||(t.SpecComparisonTable={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){t.escapeRegExpOperators=e.regexEscape;var o=function(){function e(e){var t=this;this.message=ko.observable(e),this.validationState=ko.observable(0),this.validate=ko.observable(),this.isEmptyValid=ko.observable(!1);var o=this._ltm=new FxImpl.TriggerableLifetimeManager;this.valid=ko.computed(o,(function(){return 2===t.validationState()})),this.validate.subscribe(o,(function(e){t.validationState(t._validate(e))}))}return e.prototype.dispose=function(){this._ltm.dispose()},e.prototype._validate=function(e){return 0},e}();t.Validator=o}(t.Validators||(t.Validators={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t;!function(e){e[e.Default=0]="Default",e[e.Blur=3]="Blur",e[e.Input=4]="Input"}(t||(t={})),e.ValueUpdateTrigger=t}(e.Controls||(e.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){!function(o){var i,n=0;!function(e){e[e.All=0]="All",e[e.XSlider_Off=1]="XSlider_Off",e[e.XSlider_noCallout=2]="XSlider_noCallout",e[e.ChartArea_Off=4]="ChartArea_Off",e[e.ChartArea_noClick=8]="ChartArea_noClick",e[e.ChartArea_noHover=16]="ChartArea_noHover"}(i=o.InteractionBehavior||(o.InteractionBehavior={}));var r=function(){this.context=ko.observable(0),this.style=ko.observable(0),this.formatter=ko.observable(null)};o.DataLabel=r;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartItems=ko.observableArray(),t.context=ko.observable(5),t}return __extends(t,e),t}(r);o.CustomDataLabel=a;var s=function(t,o){this.name=ko.observable(""),this.scale=ko.observable(0),this.reverseDomain=ko.observable(!1),this.ticks=ko.observable(0),this.position=ko.observable(3),this.positionIndex=ko.observable(0),this.showAxis=ko.observable(!0),this.autoScaleUnit=ko.observable(!0),this.showName=ko.observable(!1),this.showLabel=ko.observable(1),this.labelPadding=ko.observable(50),this.rotateLabel=ko.observable(0),this.showAxisLine=ko.observable(!1),this.showTickMarks=ko.observable(!1),this.showGridLines=ko.observable(!1),this.inputFormat=ko.observable(""),this.outputFormat=ko.observable(""),this.formatOptions=ko.observable(null),this.xSliderOutputFormat=ko.observable(null),this.xSliderFormatOptions=ko.observable(null),this.displayLabelFormatter=ko.observable(""),this.xSliderCalloutDisplayFormatter=ko.observable(""),this.min=ko.observable(null),this.max=ko.observable(null),this.unit=ko.observable(e.UnitConversion.Unit.None),this.displaySIUnit=ko.observable(!1),this.defaultAxisPadding=ko.observable(null),this.customAxisPadding=ko.observable(null),this.hideAxisLabelsOnXSliderHover=ko.observable(!1),t&&this.position(t),o&&this.scale(o)};o.Axis=s;var l=function(e,t,o,i,n,r,a){this.years=e,this.months=t,this.days=o||0,this.hours=i||0,this.minutes=n||0,this.seconds=r||0,this.milliseconds=a||0};o.DateSpan=l;var c=function(e){this.value=e};o.NumberSpan=c;var u=function(){this.type=ko.observable(0),this.name=ko.observable(String(n=n+1&65535))};o.SeriesBase=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.values=ko.observableArray(),t.xAxisName=ko.observable(""),t.yAxisName=ko.observable(""),t}return __extends(t,e),t}(u);o.Series=d;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=ko.observable(3),t.startXValue=ko.observable(null),t.span=ko.observable(null),t.yValues=ko.observableArray(),t.xAxisName=ko.observable(""),t.yAxisName=ko.observable(""),t}return __extends(t,e),t}(u);o.UniformSeries=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=ko.observable(1),t.value=ko.observable(null),t.axisName=ko.observable(""),t}return __extends(t,e),t}(u);o.LineSeries=f;var b=function(){function t(e){e?this._initOptions(e):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){e.shallowCopyFromObject(this,t,["scope","scopeSeriesName","metrics"])},t.prototype._initLegacyDefaults=function(){this.scope=ko.observable(null),this.scopeSeriesName=ko.observable(null),this.metrics=ko.observableArray()},t}();o.MetricRule=b;var v=function(){function t(e){e?this._initOptions(e):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){e.shallowCopyFromObject(this,t,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon"])},t.prototype._initLegacyDefaults=function(){this.aggregationScope=ko.observable(2),this.aggregationType=ko.observable(4),this.aggregationSeriesName=ko.observable(null),this.showBarColor=ko.observable(!0),this.colorCode=ko.observable(null),this.hatchingPattern=ko.observable(null),this.outputFormat=ko.observable(null),this.formatOptions=ko.observable(null),this.title=ko.observable(null),this.unit=ko.observable(null),this.customValue=ko.observable(null),this.defaultInfoBalloon=ko.observable(null)},t}();o.MetricRuleMetric=v;var m=function(){this.chartViewIndex=ko.observable(null),this.seriesViewIndex=ko.observable(null)};o.SeriesId=m;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartItems=ko.observableArray(),t}return __extends(t,e),t}(m);o.SeriesSubset=h;var g=function(){};o.Events=g;var y=function(){};o.SeriesChartEvents=y;var x=function(){};o.BarChartEvents=x;var M=function(){this.seriesName=ko.observable(""),this.conditionOperator=ko.observable(0),this.interpolation=ko.observable(0)};o.RenderingCondition=M;var P=function(){this.seriesName=ko.observable(""),this.displayName=ko.observable(""),this.cssClass=ko.observable(""),this.dataLabels=ko.observableArray(),this.showTooltip=ko.observable(!1),this.tooltipFormatter=ko.observable("Series: '{0}' Point: {1} Value: {2}"),this.renderingConditions=ko.observableArray(),this.selectable=ko.observable(!0),this.hoverable=ko.observable(!0),this.hideFromLegend=ko.observable(!1),this.autoGenerated=!1};o.SeriesView=P;var _=Object.create(null),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interpolation=ko.observable(0),t.lineStyle=ko.observable(0),t.showTooltip=ko.observable(!1),t.showDataPoints=ko.observable(!0),t}return __extends(t,e),t}(P);o.LineChartSeriesView=w;var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interpolation=ko.observable(0),t.areaHatchingPattern=ko.observable(0),t.showTooltip=ko.observable(!1),t}return __extends(t,e),t}(P);o.AreaChartSeriesView=k;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(k);o.StackedAreaChartSeriesView=S;var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=ko.observable(2),t.showTooltip=ko.observable(!1),t}return __extends(t,e),t}(P);o.ScatterChartSeriesView=F;var C=function(){function e(){this.chartType=ko.observable(void 0),this.seriesView=ko.observableArray()}return e.prototype.newSeriesView=function(e){return null},e}();o.View=C;var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartType=ko.observable(0),t.seriesView=ko.observableArray(),t.events=new y,t}return __extends(t,e),t.prototype.newSeriesView=function(e){return _[this.chartType()](e)},t.defaultChartType=0,t}(C);o.LineChartView=I,_[I.defaultChartType]=function(e){var t=new w;return e&&t.seriesName(e.name()),t};var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartType=ko.observable(1),t.seriesView=ko.observableArray(),t.events=new y,t}return __extends(t,e),t.prototype.newSeriesView=function(e){return _[this.chartType()](e)},t.defaultChartType=1,t}(C);o.AreaChartView=V,_[1]=function(e){var t=new k;return e&&t.seriesName(e.name()),t};var T=function(){function e(){this.enableSparseSeries=ko.observable(!0),this.chartType=ko.observable(void 0),this.seriesView=ko.observableArray()}return e.prototype.newSeriesView=function(e){return null},e}();o.StackedChartView=T;var B=function(){function e(){this.chartType=ko.observable(6),this.seriesView=ko.observableArray(),this.events=new y,this.lineState=ko.observable(0),this.enableSparseSeries=ko.observable(!0)}return e.prototype.newSeriesView=function(e){return _[this.chartType()](e)},e.defaultChartType=6,e}();o.StackedAreaChartView=B,_[6]=function(e){var t=new S;return e&&t.seriesName(e.name()),t};var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartType=ko.observable(2),t.seriesView=ko.observableArray(),t.events=new y,t}return __extends(t,e),t.prototype.newSeriesView=function(e){return _[this.chartType()](e)},t.defaultChartType=2,t}(C);o.ScatterChartView=D,_[2]=function(e){var t=new F;return e&&t.seriesName(e.name()),t};var A=function(e){function t(t){var o=e.call(this)||this;switch(o.barPaddingRatio=ko.observable(.3),o.enableSparseSeries=ko.observable(!0),o.barChartType=ko.observable(0),o.xAxisSpan=ko.observable(null),o.events=new x,o.barChartType(t),t){case 0:o.chartType(3);break;case 1:o.chartType(4);break;case 2:o.chartType(5)}return o}return __extends(t,e),t.prototype.newSeriesView=function(e){return _[this.chartType()](e)},t}(C);o.BarChartView=A,_[3]=_[4]=_[5]=function(e){var t=new P;return e&&t.seriesName(e.name()),t};var O=function(e,t){this.xValue=e,this.yValue=t};o.ChartItem=O;var R=function(t){function o(n){var r=t.call(this,n)||this;return r.title=ko.observable(""),r.showTitle=ko.observable(!1),r.width=ko.observable(0),r.height=ko.observable(0),r.sizeChanged=ko.observable({width:0,height:0}),r.noDataMessage=e.Resources.Strings.Chart.noDataMessage,r.series=ko.observableArray(),r.xAxis=new s,r.yAxis=new s(4,1),r.secondaryXAxes=ko.observableArray(),r.secondaryYAxes=ko.observableArray(),r.views=ko.observableArray(),r.legendPosition=ko.observable(0),r.legendWidth=ko.observable(0),r.interactionBehavior=ko.observable(i.All),r.autogenerateSeriesViews=ko.observable(!0),r.events=new g,r.showMetrics=ko.observable(!0),r.seriesSelections=ko.observableArray(),r.seriesHovers=ko.observableArray(),r.hoveredID=ko.observableArray(),r.metricsRules=ko.observableArray(),r.enableTrackXSlider=ko.observable(),r.xSliderCoordinate=ko.observable(),r.xSliderFilterHoverThreshold=ko.observable(),r.ariaLabel=ko.observable(""),r.ariaDesc=ko.observable(""),r.noData=ko.observable(!1),r._seriesHelpers=ko.observable(),r.metrics=new e.ViewModels.Controls.Visualization.Metrics.ViewModel(n),r.controlType=63,r.xAxis.showTickMarks(!0),r.yAxis.labelPadding(o.defaultYAxisLabelPadding),ko.reactor(r.lifetimeManager,(function(){if(r.autogenerateSeriesViews()){var t=r.series()||[];r.views().forEach((function(i){var n=i.seriesView.peek(),r=n.filter((function(e){return e.autoGenerated})),a=r.filter((function(e){return t.some((function(t){return t.name.peek()===e.seriesName.peek()}))})),s=r.filter((function(e){return!a.includes(e)})),l=t.filter((function(e){var t=e.name();return!a.some((function(e){return t===e.seriesName.peek()}))}));s.forEach((function(t){return e.remove(n,t)})),l.forEach((function(e){var t=o.getDefaultSeriesViewCreator(i.chartType())(e,i);t.autoGenerated=!0,n.push(t)})),i.seriesView(n)}))}})),r}return __extends(o,t),o.getDefaultSeriesViewCreator=function(e){return _[e]},o.defaultYAxisLabelPadding=38,o}(t.Loadable.ViewModel);o.ViewModel=R}(o.Chart||(o.Chart={}))}(t.Visualization||(t.Visualization={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){!function(o){var i;!function(e){e[e.HexagonLayout=1]="HexagonLayout"}(i||(i={}));var n=function(e,t){this.latitude=e,this.longitude=t},r=function(){this.id="",this.location=new n(0,0),this.metadata=new a},a=function(){this.icon=ko.observable({type:0,data:"",palette:0}),this.iconWidth=ko.observable(16),this.iconHeight=ko.observable(16)},s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=1,t.text=ko.observable(""),t.hasFill=ko.observable(!1),t.itemScale=ko.observable(1),t}return __extends(t,e),t}(a),l=function(){},c=function(t){function o(o,n,r,a){void 0===n&&(n=ko.observable([]));var s=this,c=0;return"number"==typeof r?(c=r,a="object"==typeof a?a:{}):"object"==typeof r&&(a=r),void 0===n&&(n=ko.observable([])),void 0===c&&(c=0),void 0===a&&(a={}),(s=t.call(this,o)||this).controlType=68,s.events=new l,s.width=ko.observable(505),s.height=ko.observable(319),s.items=n,s.extensions=c,s.extensionOptions=a,s.ariaLabel=e.initObservable(a&&a.ariaLabel,""),s.ariaDesc=e.initObservable(a&&a.ariaDesc,""),s.extensions&i.HexagonLayout&&(s.extensionOptions.hexagonLayout=e.extend(s._getDefaultOptions(),s.extensionOptions.hexagonLayout)),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Visualization.Map","Fx/Controls/Map"),s}return __extends(o,t),o.prototype.dispose=function(){t.prototype.dispose.call(this)},o.prototype._getDefaultOptions=function(){return{showLinks:ko.observable(!1),links:ko.observable([]),rows:ko.observable(70),columns:ko.observable(120)}},o}(t.Loadable.ViewModel);o.Extensions=i,o.Location=n,o.Item=r,o.ItemMetadata=a,o.HexagonLayoutItemMetadata=s,o.Events=l,o.ViewModel=c}(o.Map||(o.Map={}))}(t.Visualization||(t.Visualization={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){!function(o){var i=e.initObservable,n=function(t){function o(o,n){var r=t.call(this,o,n)||this;return r.controlType=0,n=n||{},r.value=e.initObservable(n.value),r.unit=e.initObservable(n.unit),r.caption=e.initObservable(n.caption),r.infoBalloon=e.initObservable(n.infoBalloon),r.hideInfoBalloon=e.initObservable(n.hideInfoBalloon,!1),r.barCssClass=i(n.barCssClass,""),r.showBarColor=i(n.showBarColor,!0),r.hatchingPattern=i(n.hatchingPattern,0),r.unitAlignment=i(n.unitAlignment,4),r.captionAlignment=i(n.captionAlignment,1),r.hide=i(n.hide,!1),r.prioritized=i(n.prioritized,!1),r.ariaLabel=i(n.ariaLabel),r.ariaLivePrefix=i(null),r._msPortalFxAriaLive=i(!1),r}return __extends(o,t),o}(t.Loadable.ViewModel);o.SingleMetric=n;var r=function(t){function o(o,n){var r=t.call(this,o,n)||this;return n=n||{},r.controlType=69,r.items=e.initObservableArray(n.items),r.orientation=i(n.orientation,0),r.size=i(n.size,2),r.layout=i(n.layout,1),r.visible=i(n.visible,!0),r.ariaLabel=i(n.ariaLabel),r._msPortalFxAriaLive=i(!1),r}return __extends(o,t),o}(t.Loadable.ViewModel);o.ViewModel=r}(o.Metrics||(o.Metrics={}))}(t.Visualization||(t.Visualization={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(o){!function(o){var i=0,n=function(){function t(e){var t=$.extend(this._getDefaultOptions(),e);this._initOptions(t)}return t.prototype._getDefaultOptions=function(){return{name:String(i=i+1&65535),values:ko.observableArray()}},t.prototype._initOptions=function(t){e.shallowCopyFromObject(this,t,["name","values","viewOptions"])},t}(),r=function(t){function o(o,i){var n=t.call(this,o)||this;n.controlType=97;var r=$.extend(n._getDefaultOptions(),i);return n._initOptions(r),n.loading=e.initObservable(r.loading,!1),n.noData=e.initObservable(r.noData,!1),n.noDataMessage=e.initObservable(r.noDataMessage,null),n.ariaLabel=e.initObservable(r.ariaLabel,""),n.ariaDesc=e.initObservable(r.ariaDesc,""),n.showMetrics=e.initObservable(r.showMetrics,!0),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.Visualization.SimpleChart","Fx/Controls/LineChart, Fx/Controls/BarChart, Fx/Controls/AreaChart, or Fx/Controls/ScatterChart"),n}return __extends(o,t),o.prototype._getDefaultOptions=function(){return{series:ko.observableArray()}},o.prototype._initOptions=function(t){e.shallowCopyFromObject(this,t,["series","xAxis","yAxis","chartType","viewOptions","metricsRules","legendPosition"])},o}(t.Loadable.ViewModel);o.Series=n,o.ViewModel=r}(o.SimpleChart||(o.SimpleChart={}))}(t.Visualization||(t.Visualization={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.Resources.Strings,i=function(e,t,o){this.status=e,this.statusCode=t,this.errorMessage=o},n=function(t){var n=this;this.downloadStatus=ko.observable();var r=t.addDefaultAuthorizationToken;if(r&&(this.authorizationOptions={resourceName:!0!==r?t.addDefaultAuthorizationToken.resourceName:""}),this.authorizationToken=t.authorizationToken||ko.observable(""),this.downloadType=t.downloadType||ko.observable(1),this.headers=t.headers||ko.observable({}),this.httpMethod=t.httpMethod||ko.observable("GET"),this.httpRequestContent=t.httpRequestContent||ko.observable(""),this.httpRequestContentType=t.httpRequestContentType||ko.observable("application/json"),this.targetFileName=t.targetFileName||ko.observable(""),this.targetUri=t.targetUri||ko.observable(""),this.errorMessage=t.errorMessage||ko.observable(""),this.targetUriCallback=t.targetUriCallback,this.showUriCallbackConfirmationDialog=t.showUriCallbackConfirmationDialog,this.uriCallbackConfirmationDialogOptions=t.uriCallbackConfirmationDialogOptions,this.showDownloadProgressDialog=t.showDownloadProgressDialog||ko.observable(!1),this.downloadProgressDialogOptions=t.downloadProgressDialogOptions,this.onStart=t.onStart,this.onEnd=t.onEnd,this.authorizationOptions){var a={resourceName:this.authorizationOptions.resourceName||""};e.require("FxInternal/ExtensionRuntime").then((function(e){return e.getInnerRuntime().getAuthorizationToken(a)})).then((function(e){e&&e.header?n.authorizationToken(e.header):n.downloadStatus(new i(o.FileDownloadCommand.fileDownloadErrorStatus,412,o.FileDownloadCommand.authTokenNotAvailable))}),(function(e){n.downloadStatus(new i(o.FileDownloadCommand.fileDownloadErrorStatus,412,e))}))}FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.FileDownload.Context","Fx/Controls/FileDownload")};t.Status=i,t.Context=n}(t.FileDownload||(t.FileDownload={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.Resources.Strings.FileDownload,i=function(t){function i(i,n){var r=t.call(this,i)||this;return r.controlType=82,r.type=7,r.context=n.context,r.label=e.initObservable(n.label,""),r.disabled=e.initObservable(n.disabled,!1),r.unauthorizedMessage=e.initObservable(n.unauthorizedMessage,o.unauthorizedText),r.asLink=n.asLink,r.ariaLabel=n.ariaLabel?e.initObservable(n.ariaLabel):r.label,FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Controls.FileDownloadButton","Fx/Controls/FileDownload"),r}return __extends(i,t),i.prototype.unauthorized=function(e){this.unauthorizedMessage(e||o.unauthorizedText),this.disabled(!0)},i}(e.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=i}(t.FileDownloadButton||(t.FileDownloadButton={}))}(t.Controls||(t.Controls={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(o){var i=e.ViewModels,n=i.FileDownload,r=e.Base.Images,a=e.initObservable,s=e.Resources.Strings.ViewModels.Toolbar,l=function(){function e(e,t){void 0===t&&(t={}),this.type=e,this.name=t.name||"",this.disabled="string"==typeof ko.unwrap(t.disabled)?a(t.disabled,""):a(t.disabled,!1),this.ariaLabel=a(t.ariaLabel,void 0),this.tooltip=a(t.tooltip,void 0),this.unauthorizedMessage=a(t.unauthorizedMessage,void 0)}return e.prototype.unauthorized=function(e){var t;t="boolean"==typeof e?e?s.noAccess:null:e||s.noAccess,this.unauthorizedMessage(t)},e}();o.ToolbarItem=l;var c=function(e){function t(t,o){void 0===o&&(o={});var i=e.call(this,t,o)||this;return i.controlType=62,i.showLabels=a(o.showLabels,!1),i.items=ko.observableArray(),i}return __extends(t,e),t.prototype.setItems=function(e){this.items(e)},t}(t.Controls.Loadable.ViewModel);o.Toolbar=c;var u=function(){this.type=12};o.Separator=u;var d=function(e){function t(t,o){void 0===o&&(o={});var i=e.call(this,t,o)||this;return i.label=a(o.label,""),i.icon=a(o.icon,{type:0}),i}return __extends(t,e),t}(l);o.ToolbarButton=d;var p=function(e){function t(t){var o=e.call(this,1)||this;return o.items=t,o}return __extends(t,e),t}(l);o.ToolbarGroup=p;var f=function(e){function t(t,o){void 0===o&&(o={});var i=e.call(this,t,o)||this;return i.command=o.command,i}return __extends(t,e),t}(d);o.ExecutableButtonBase=f;var b=function(e){function t(t){void 0===t&&(t={});var o=e.call(this,4,t)||this;return o.commandContext=t.commandContext||ko.observable(),o}return __extends(t,e),t}(f);o.CommandButton=b;var v=function(e){function t(t){var o,i=this;return o="string"==typeof t?{optionGroupName:t}:t||{},(i=e.call(this,6,o)||this).optionGroupName=o.optionGroupName||"",i.checked=a(o.checked,!1),i.commandContext=o.commandContext||ko.observable(),i}return __extends(t,e),t}(f);o.ToggleButton=v;var m=function(e){function t(t){var o,i=this;return"number"==typeof t?o={type:t}:(o=t||{}).type=o.type||5,(i=e.call(this,o.type,o)||this).dialogOptions=o.dialogOptions,i}return __extends(t,e),t}(f);o.DialogButton=m;var h=function(e){function t(t){void 0===t&&(t={});var o=e.call(this,8,t)||this;return o.icon=a(t.icon,r.Upload()),o.accept=t.accept||"",o.maxFiles=t.maxFiles||1,o.uploadContext=t.uploadContext||ko.observable(new i.FileUpload.FullFileUploadContext),o.cancelAllUploads=t.cancelAllUploads||ko.observable(!1),o.cancelAllUploadsOnFileSelection=t.cancelAllUploadsOnFileSelection||ko.observable(!0),o.uploadTasks=ko.observableArray(),o}return __extends(t,e),t}(d);o.FileUploadButton=h;var g=function(e){function t(t){var o=e.call(this,7,t)||this;return o.icon=a(t.icon,r.Download()),o.context=ko.observable(new n.Context(t)),o}return __extends(t,e),t}(d);o.FileDownloadButton=g;var y=function(e){function t(t){void 0===t&&(t={});var o=e.call(this,9,t)||this;return o.icon=a(t.icon,r.Link()),o.requestUrl=a(t.requestUrl,null),o.popupWidth=a(t.popupWidth,800),o.popupHeight=a(t.popupHeight,600),o}return __extends(t,e),t}(d);o.OAuthButton=y;var x=function(e){function t(t){var o=e.call(this,3,t)||this,n=o.selectable=new i.Selectable(t);return t||void 0!==n.selectedValue()||n.selectedValue(null),o}return __extends(t,e),t}(d);o.OpenBladeButton=x;var M=function(e){function t(t){var o=e.call(this,10,t)||this;return t&&(o.id=t.id,o.selectable=new FxImpl.Composition.Selectable.Selectable2(t)),o}return __extends(t,e),t}(d);o.OpenBladeButton2=M;var P=function(e){function t(t,o){var i,n=this;return"string"==typeof t?i={uri:t,target:o||"_blank"}:(i=t).target=i.target||"_blank",(n=e.call(this,2,i)||this).clickableLink=new FxImpl.CompositionCore.ClickableLink(ko.observable(i.uri),ko.observable(i.target)),n}return __extends(t,e),t}(d);o.OpenLinkButton=P}(t.Toolbars||(t.Toolbars={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t=function(e){this.type=0,this.title=e};e.Dialog=t;var o=function(e){function t(t,o,i){var n=e.call(this,t)||this;return n.type=1,n.text=o,n.buttons=i,n}return __extends(t,e),t}(t);e.MessageBox=o;var i=function(e){function t(t,o,i){var n=e.call(this,t)||this;return n.text=ko.observable(""),n.completionPercentage=ko.observable(-1),n.type=2,n.text(o),void 0!==i&&n.completionPercentage(i),n}return __extends(t,e),t}(t);e.ProgressBox=i;var n=function(e){function t(t){var o=e.call(this,t)||this;return o.description=ko.observable(),o.type=3,o}return __extends(t,e),t}(t);e.FormDialog=n;var r=function(e){function t(){var t=e.call(this,"")||this;return t.listItems=ko.observableArray(),t.selectedItem=ko.observable(),t.type=4,t}return __extends(t,e),t}(t);e.ListPopup=r}(e.Dialogs||(e.Dialogs={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=MsPortalFx.Base,i=o.Constants,n=e.Constants.RpcMethods,r=e.Rpc,a=o.Diagnostics.Telemetry;function s(e){r.client.invokeRpc(n.submitProvisionerTelemetry,i.Shell,e)}function l(e,t){t||(t={}),t.source="Provisioner",t.action=e;var o=t.data||{},i=o.launchingContext||{};return i.telemetryId&&(o.telemetryId=i.telemetryId),s(t),t}t.ActionModifier={Failed:"Failed",Succeeded:"Succeeded"},t.ProvisioningStatus={NoPromise:"NoPromise",Resolved:"Resolved",UnknownFailure:"UnknownFailure"},t.registerTelemetrySubmissionHandler=function(){r.client.registerRpcEndPoint(n.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(e,t){e.extension=t.srcWindowId,a.trace(e)}})},t.traceDeployment=s,t.traceProvisioningStarted=function(e){return l("ProvisioningStarted",e)},t.traceProvisioningEnded=function(e){return l("ProvisioningEnded",e)}}(e.ProvisioningTelemetry||(e.ProvisioningTelemetry={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){!function(t){var o=e.Base,i=e.Services.Gallery,n=i.Constants,r=FxImpl.ProvisioningTelemetry,a=new o.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),s=n.GalleryParametersKey,l=n.GalleryOptionsKey,c={provEntityUndefined:"",notEnabled:"",unableToLocatePart:""},u=FxImpl.getErrorMap(c),d=function(){this.inputs=ko.observable(),this.errors=ko.observable([])};t.CollectorBindingInternals=d;var p=function(){this.outputs=ko.observable(),this.commit=ko.observable()};t.ProviderBindingInternals=p;var f,b=function(){function t(t){var o=this;this._provisioningEntity=void 0,this._data=void 0,this._options=void 0,this._executionDeferred=void 0,this._mappedOutputs=void 0,t||u.provEntityUndefined(),this._lifetimeManager=new FxImpl.TriggerableLifetimeManager,this._provisioningEntity=t;var i=this._executionDeferred=Q.defer();Q(i.promise).finally((function(){o.dispose()})).catch(e.noop)}return Object.defineProperty(t.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!1,configurable:!0}),t.prototype.executeProvisioning=function(e,t){var o=this,n=this._provisioningEntity;n.enableProvisioning()||u.notEnabled();var r=e;if(n.executeProvisioning&&n.mapOutputsForProvisioning){var s=FxImpl.createError("You can only override 'executeCustomProvisioning' or 'mapOutputsForProvisioning', but not both.");return a.error(s),Q.reject(s)}if(!n.executeProvisioning){var c=t&&t[l],d=c&&c.galleryItem,p=d&&d.categoryIds||[];if(p.length>0)if(p.some((function(e){return e.toLowerCase()===i.noSubCreateCategoryId}))){s=FxImpl.createError("The gallery item '".concat(d.itemDisplayName,"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"));return a.error(s),Q.reject(s)}}if(n.mapOutputsForProvisioning&&(e=n.mapOutputsForProvisioning(r)),n.executeProvisioning){this._traceProvisioningStarted();var f=n.executeProvisioning(e);return f?f.then((function(){o._traceProvisioningEnded(!0)}),(function(){o._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(void 0),f}return this._beginExecution(e,t)},t.prototype.dispose=function(){this._lifetimeManager.dispose()},t.prototype._beginExecution=function(t,o){var i=this,n=this._executionDeferred;if(Q.isPending(n.promise)){this._data=t,this._options=o;var r=this._provisioningEntity.privatePcPrBI,a=this._lifetimeManager;a&&(r.provisioningCommand.fxOnce(a,(function(e){e.status(f.Idle),i._executeProvisioning(e)})),r.triggerProvisioningCommand(e.getUniqueId()))}return n.promise},t.prototype._executeProvisioning=function(e){var t=this;e.status(f.InProgress),this._traceProvisioningStarted();var o=e.execute({options:this._options,data:this._data}),i=this._executionDeferred;o?o.then((function(o){t.deploymentResponse=o,t._provisioningEntity.privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[s],configurationOptions:t._options[l],deploymentResponse:o}),e.status(f.Succeeded),t._traceProvisioningEnded(!0),i.resolve()}),(function(){e.status(f.Failed),t._traceProvisioningEnded(!1),i.reject()})):(this._traceProvisioningEnded(void 0),i.resolve())},t.prototype._createEventBase=function(){var e=this._options,t=e&&e[l],o=t&&t.launchingContext,i={name:void 0,data:{oldCreateApi:!0}};return o&&(i.name=o.galleryItemId,i.data.launchingContext=o),i},t.prototype._traceProvisioningStarted=function(){return r.traceProvisioningStarted(this._createEventBase())},t.prototype._traceProvisioningEnded=function(e){var t,o,i=this._createEventBase(),n=r.ActionModifier,a=r.ProvisioningStatus;return void 0===e?(t=n.Succeeded,o=a.NoPromise):e?(t=n.Succeeded,o=a.Resolved):(t=n.Failed,o=a.UnknownFailure),i.actionModifier=t,i.data.provisioningStatus=o,r.traceProvisioningEnded(i)},t=__decorate([__metadata("fx:diagnostics",[require,"Provisioner"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object])],t)}();t.Provisioner=b,function(e){e[e.Idle=0]="Idle",e[e.InProgress=1]="InProgress",e[e.Succeeded=2]="Succeeded",e[e.Failed=3]="Failed"}(f=t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));var v=function(){this.triggerProvisioningCommand=ko.observable(),this.provisioningPartExtensionName=ko.observable(),this.provisioningPartName=ko.observable(),this.triggerProvisioningInStartboardPart=ko.observable(),this.masterIsProvisioningPart=ko.observable(!1),this.forceDiscardJourney=ko.observable(!0),this.provisioningCommand=ko.observable(),this.provisioningAttempted=ko.observable(),this.provisioningStarted=ko.observable(),this.provisioningCompleted=ko.observable()};t.ProvisioningEntityBindingInternals=v}(t.Internal||(t.Internal={}))}(t.ParameterCollection||(t.ParameterCollection={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Base.Images,i=e.Resources.Strings,n="error",r={hasNotBeenImplemented:""},a=FxImpl.getErrorMap(r),s=function(){};t.CommandContainerContract=s;var l=function(){this.enabled=ko.observable(!0),this.icon=ko.observable(),this.text=ko.observable(),this.ariaLabel=ko.observable(),this.tooltip=ko.observable()};t.CommandBase=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.status=ko.observable(0),t.dialog=ko.observable(),t}return __extends(t,e),t.prototype.execute=function(e){a.hasNotBeenImplemented("execute")},t.prototype.dialogClick=function(e){a.hasNotBeenImplemented("dialogClick")},t}(l);t.Command=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.navigateUri=ko.observable(""),t.navigateTarget=ko.observable("_blank"),t}return __extends(t,e),t}(l);t.UriCommand=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.navigateUri=ko.observable(""),t.navigateUriCallback=ko.observable(null),t.navigateTarget=ko.observable("_blank"),t.showUriCallbackConfirmationDialog=ko.observable(!1),t}return __extends(t,e),t}(l);t.UriCallbackCommand=d;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listItems=ko.observableArray(),t.selectedItem=ko.observable(""),t}return __extends(t,e),t}(l);t.ListCommand=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.viewModel=ko.observable(null),t}return __extends(t,e),t}(l);t.DynamicCommand=f;var b=function(e,t,o){this.status=e,this.statusCode=t,this.errorMessage=o};t.FileDownloadStatus=b;var v=function(t){function r(r){var a,s=t.call(this)||this;if(s.targetUri=ko.observable(""),s.targetUriCallback=ko.observable(null),s.httpMethod=ko.observable("GET"),s.httpRequestContent=ko.observable(""),s.httpRequestContentType=ko.observable("application/json"),s.headers=ko.observable({}),s.authorizationToken=ko.observable(null),s.targetFileName=ko.observable(""),s.errorMessage=ko.observable(""),s.downloadType=ko.observable(1),s.downloadStatus=ko.observable(),s.showUriCallbackConfirmationDialog=ko.observable(!1),s.uriCallbackConfirmationDialogOptions=null,s.showDownloadProgressDialog=ko.observable(!1),s.downloadProgressDialogOptions=null,s.icon(o.Download()),!0===r?a={resourceName:""}:r&&(a=r.authorizationOptions),a){var l={resourceName:a.resourceName};e.require("FxInternal/ExtensionRuntime").then((function(e){return e.getInnerRuntime().getAuthorizationToken(l)})).then((function(e){e&&e.header?s.authorizationToken(e.header):s.downloadStatus(new b(n,412,i.FileDownloadCommand.authTokenNotAvailable))}),(function(e){s.downloadStatus(new b(n,412,e))}))}return s}return __extends(r,t),r}(l);t.FileDownloadCommand=v;var m=function(e){function o(t){var i=e.call(this)||this,n=t.selectable;return n&&n.selectedValue||(t.selectable=o.createSelectableViewModel()),i}return __extends(o,e),o.createSelectableViewModel=function(e){return new t.Selectable({selectedValue:1===arguments.length?e:{}})},o}(l);t.OpenBladeCommand=m,function(t){!function(t){var o=e.ViewModels,i=ko.observable("");function n(e){e.enabled(null),(e.icon||i)(null),(e.text||i)(null)}var r=function(e){function t(t){var o=e.call(this,t)||this;return n(o),o}return __extends(t,e),t}(o.OpenBladeCommand);t.OpenBladeCommand=r;var a=function(e){function t(){var t=e.call(this)||this;return n(t),t}return __extends(t,e),t}(o.FileDownloadCommand);t.FileDownloadCommand=a;var s=function(e){function t(){var t=e.call(this)||this;return n(t),t}return __extends(t,e),t}(o.Command);t.ExecutableCommand=s;var l=function(e){function t(){var t=e.call(this)||this;return n(t),t}return __extends(t,e),t}(o.UriCallbackCommand);t.UriCallbackCommand=l;var c=function(e){function t(){var t=e.call(this)||this;return n(t),t}return __extends(t,e),t}(o.UriCommand);t.UriCommand=c}(t.Dynamic||(t.Dynamic={}))}(t.Commands||(t.Commands={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=function(){this.title=ko.observable(),this.shortTitle=ko.observable(),this.description=ko.observable(),this.icon=ko.observable(e.Base.Images.Polychromatic.DefaultBlade()),this.size=ko.observable(1)};t.ButtonPart=o}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t=function(){this.inputParameters={},this.inputMetadata={},this.options={}};e.ParameterCollectionInput=t;var o=function(){this.outputParameters={}};e.ParameterCollectionOutput=o;var i=function(){function e(){}return e.modelToParameters=function(e){var t={};for(var o in e)for(var i in o in t||(t[o]={}),e[o])t[o][i]=e[o][i]()||"";return t},e.parametersToModel=function(e){var t={};for(var o in e)for(var i in e[o]){if(o in t||(t[o]={}),ko.isObservable(e[o][i])||ko.isComputed(e[o][i]))throw new Error("Parameters cannot be knockout observables.");t[o][i]?t[o][i](e[o][i]):t[o][i]=ko.observable(e[o][i])}return t},e}();e.Models=i}(e.ParameterCollection||(e.ParameterCollection={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t,o,i,n,r;r=e.ParameterCollection||(e.ParameterCollection={}),t=r.Internal||(r.Internal={}),o={onProviderCommitMissing:"",onCommitSuccessActionMissing:"",onCommitFailedActionMissing:""},i=FxImpl.getErrorMap(o),n=function(){function e(e){this._provisioner=null,this._previousOutputs=null,this._previousCommit="",this._previousDetailBladeOutput=null,this._provisioner=e}return e.prototype.onProviderBindingInternalsReceived=function(e,t,o,n,r,a){var s=this;if(n||i.onProviderCommitMissing(),r||i.onCommitSuccessActionMissing(),a||i.onCommitFailedActionMissing(),e){var l=ko.unwrap(e.commit),c=ko.unwrap(e.outputs),u=function(){r(),s._provisioner.executeProvisioning(c,t)};if(l&&l!==this._previousCommit&&c&&c!==this._previousOutputs&&o&&o!==this._previousDetailBladeOutput){this._previousOutputs=c,this._previousCommit=l;var d=n(null,c);d?d.then((function(e){e?u():a()}),(function(){a()})):u()}}},e}(),t.CollectorBase=n}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=MsPortalFx.ViewModels,i=MsPortalFx.ViewModels.ParameterCollection.Internal,n=" is not implemented";var r=function(t){function o(o,n,r,a){var s=t.call(this)||this;s.editScopeId=ko.observable(),s._commit=ko.observable(),s._baseButtonContainer=null,s._baseProviderCommit=null,s._initialLoadComplete=!1;var l=n&&n.container;o.selectable=new e.ViewModels.ObsoleteSelectable({selectedValue:!0,isSelected:!!l&&l.selectable.isSelected});var c={stepStatuses:[]},u=n&&n.content,d=u&&u.currentState;return d&&(c=d),s.beginExecuteCommand=ko.observable(!1),s.savedState=ko.observable(c),s.currentState=ko.observable(c),s.stepInput=function(e,t,o){var i=e&&e.stepStatuses,n=i&&i.length?i[0].status:0;return ko.observable({stepId:"NoWizardStep",status:n,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:o})}(c,!1!==r,a),s.stepOutput=ko.observable(),s.parameterCollectionErrors=ko.observable(),s.privateFcTpBI=new i.CollectorBindingInternals,s._baseButtonContainer=o,s._ltm=o.createChildLifetime(),s}return __extends(o,t),o.prototype.onInputsSet=function(e){var t=this,o=this.privateFcTpBI;if(o.inputs(this.getProviderInputs(null)),!this._initialLoadComplete){var i=this._ltm;this.parameterCollectionErrors.subscribe(i,(function(e){var t=o.errors;t(e),t([])})),this.stepOutput.subscribe(i,(function(e){t._processStepOutput(e)})),this._baseButtonContainer.selectable.isSelected.subscribe(i,(function(e){t.savedState(t.currentState())})),this._initialLoadComplete=!0}var n=e.fromProviderBindingInternals;if(n){var r=n.commit;if(r&&r!==this._baseProviderCommit)this._baseProviderCommit=r,this.onProviderCommit(null,n.outputs).then((function(e){e?(t._baseButtonContainer.selectable.isSelected(!1),t._commit(r)):t.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])}))}var a=e.stepOutput;a&&this.stepOutput(a);var s=this.savedState;return s()||s(e.savedState),null},o.prototype.getProviderInputs=function(e){throw new Error("'getProviderInputs'"+n)},o.prototype.onProviderCommit=function(e,t){throw new Error("'onProviderCommit'"+n)},o.prototype.dispose=function(){this._ltm.dispose()},o.prototype._processStepOutput=function(e){e&&(this.currentState({stepStatuses:[{stepId:e.stepId,status:e.status}],selectedStepId:e.stepId}),this.beginExecuteCommand(3===e.status))},o}(o.ButtonPart);t.BaseGalleryButtonPartViewModel=r}(t.ParameterCollection||(t.ParameterCollection={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(e){!function(e){e.BaseGalleryButtonPartViewModel=FxImpl.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel}(e.ParameterCollection||(e.ParameterCollection={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=/(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((:?\/[^/]+\/[^/]+)*)$/i,i=/\/([^/]+)\/([^/]+)/g,n=/\/subscriptions\/([^/\s]+)(?:\/resourceGroups\/([^/\s]+))?/i,r=/^\/subscriptions\/([^/\s]+)$/i,a=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)$/i,s=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)\/deployments\/([^/]+)$/i,l=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)\/providers\/microsoft.resources\/deployments\/([^/]+)$/i,c=/^\/subscriptions\/([^/\s]+)\/tagNames\/([^/]+)(?:\/tagValues\/([^/]+))?$/i;function u(t,o){var i,n,r=function(){i={},n=0};return r(),function(a){var s=i[a];return void 0===s&&(s=t(a),1e3==n++&&e.nextTick(r),i[a]=s),o(s)}}function d(e){return u((function(t){return JSON.stringify(e(t))}),JSON.parse)}function p(t){return u((function(e){return t.test(e)}),e.identity)}t.isTenantResource=p(/^(?:\/providers\/[^/]+(?:\/[^/]+\/[^/]+)*)*(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((?:\/[^/]+\/[^/]+)*)$/i),t.isSubscriptionId=p(r),t.isResourceGroupId=p(a),t.isResourceId=p(/^(?:\/subscriptions\/[^/\s]+(\/resourceGroups\/[^/\s]+)?)?(?:\/providers\/[^/]+(?:\/[^/]+\/[^/]+)*)*(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((?:\/[^/]+\/[^/]+)+)$/i);var f=p(l),b=p(s);function v(e){return f(e)||b(e)}t.isDeploymentId=v,t.isTagId=p(c);var m=p(/^(?:\/subscriptions\/[^/\s]+(\/resourceGroups\/[^/\s]+)?)?(?:\/providers\/[^/]+(?:\/[^/]+\/[^/]+)*)*(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((?:\/[^/]+\/[^/]+)*)$/i);function h(e,o){if(!e||"string"!=typeof e)return!1;var i=m(e)||t.isSubscriptionId(e)||t.isResourceGroupId(e);return o?i:i||v(e)||t.isTagId(e)}t.isResourceManagerId=h;var g=e.getJoinFunc("/"),y=FxImpl.getErrorMap({invalidDeployment:"",invalidId:"",invalidRG:"",invalidSub:"",invalidTag:"",notForNestedResource:""});function x(e){return e.toLowerCase()}function M(e){return d((function(t){var r;return e(t)&&(r=function(e){var t="/providers/Microsoft.Resources"+e,r=o.exec(t);if(r){for(var a={resourceMap:{}},s=[],l=[],c=a.provider=r[1],u=r[2],d=void 0;d=i.exec(u);){if(!d)return;s.push(a.type=d[1]),l.push(a.resource=d[2]),c+="/"+a.type,a.resourceMap[c]=a.resource}a.types=s,a.resources=l;var p=n.exec(e);return p&&p.length&&(a.subscription=p[1],a.resourceGroup=p[2]),a}}(t))||y.invalidId(),r}))}function P(e){return w(e.subscription)}function _(e){var t=e.subscription;return t?w(t):""}function w(e){return"/subscriptions/".concat(e)}function k(e){return S(e.subscription,e.resourceGroup)}function S(e,t){return e?"/subscriptions/".concat(e).concat(t?"/resourceGroups/".concat(t):""):""}function F(e){var t=e.provider;return t=g(t,g.apply(void 0,e.types||[]))}function C(e){return function(t){return F(e(t))}}function I(e){for(var t="/subscriptions/".concat(e.subscription,"/resourceGroups/").concat(e.resourceGroup,"/providers/").concat(e.provider),o=e.types,i=e.resources,n=0;n<o.length;n++)t+="/".concat(o[n],"/").concat(i[n]);return t}function V(e,t){return"".concat(e,":").concat(I(t))}function T(e){return function(o){return V(e,t.parseResourceDescriptor(o))}}function B(e){return function(t,o){return t&&o?t===o||e(t)&&x(t)===x(o):!t==!o}}function D(e){return function(t){return e(t),x(t)}}t.sanitizeId=function(t){return h(t)?e.sanitizeMessage(t):"_REDACTED_"},t.parseSubscriptionDescriptor=d((function(e){t.isSubscriptionId(e)||y.invalidSub();var o=r.exec(e);return o&&2===o.length||y.invalidSub(),{subscription:o[1]}})),t.parseResourceGroupDescriptor=d((function(e){t.isResourceGroupId(e)||y.invalidRG();var o=a.exec(e);return o&&3===o.length||y.invalidRG(),{subscription:o[1],resourceGroup:o[2]}})),t.parseResourceDescriptor=M(t.isResourceId),t.parseResourceManagerDescriptor=M(h),t.parseDeploymentDescriptor=d((function(e){var t=l.exec(e);return t&&4===t.length||(t=s.exec(e)),t&&4===t.length||y.invalidDeployment(),{subscription:t[1],resourceGroup:t[2],deploymentName:t[3]}})),t.parseTagDescriptor=d((function(e){var t=c.exec(e);return t&&4===t.length||y.invalidTag(),{subscription:t[1],tagName:t[2],tagValue:t[3]}})),t.buildDeploymentId=function(e,t,o){return S(e,t)+"/providers/Microsoft.Resources/deployments/".concat(o)},t.buildSubscriptionIdFromDescriptor=function(e){return w(e.subscription)},t.buildSubscriptionIdFromResourceGroupDescriptor=P,t.buildSubscriptionIdFromResourceDescriptor=_,t.buildSubscriptionIdFromResourceGroupId=function(e){return P(t.parseResourceGroupDescriptor(e))},t.buildSubscriptionIdFromResourceId=function(e){return _(t.parseResourceDescriptor(e))},t.buildSubscriptionIdFromSubscriptionName=w,t.buildResourceGroupIdFromDescriptor=function(e){return S(e.subscription,e.resourceGroup)},t.buildResourceGroupIdFromResourceDescriptor=k,t.buildResourceGroupIdFromResourceId=function(e){return k(t.parseResourceDescriptor(e))},t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=S,t.buildSubscriptionFromId=w,t.buildResourceTypeFromResourceDescriptor=F,t.buildResourceTypeFromResourceId=C(t.parseResourceDescriptor),t.buildResourceTypeFromResourceManagerId=C(t.parseResourceManagerDescriptor),t.buildResourceIdFromDescriptor=I,t.buildTopmostParentResourceIdFromDescriptor=function(e){return"/subscriptions/".concat(e.subscription,"/resourceGroups/").concat(e.resourceGroup,"/providers/").concat(e.provider,"/").concat(e.types[0],"/").concat(e.resources[0])},t.buildParentResourceIdFromDescriptor=function(e){e.types.length<2&&y.notForNestedResource();for(var t="/subscriptions/".concat(e.subscription,"/resourceGroups/").concat(e.resourceGroup,"/providers/").concat(e.provider),o=e.types,i=e.resources,n=0;n<o.length-1;n++)t+="/".concat(o[n],"/").concat(i[n]);return t},t.isParentResource=function(t,o){var i=x(t)+"/";return e.startsWith(x(o),i)},t.buildTagName=V,t.buildRelatedTagName=T("hidden-related"),t.buildLinkTagName=T("hidden-link"),t.compareSubscriptionId=B(t.isSubscriptionId),t.compareResourceGroupId=B(t.isResourceGroupId),t.compareResourceId=B(t.isResourceId),t.compareResourceManagerId=B(h),t.buildLowerCaseResourceGroupId=D(t.parseResourceGroupDescriptor),t.buildLowerCaseSubscriptionId=D(t.parseSubscriptionDescriptor),t.buildLowerCaseResourceId=D(t.parseResourceDescriptor),t.tryBuildResourceManagerKey=function(e){return h(e)?x(e):null},t.subscriptionContainsResourceGroup=function(e,o){return e&&o&&t.compareSubscriptionId(e,P(t.parseResourceGroupDescriptor(o)))},t.subscriptionContainsResource=function(e,o){return e&&o&&t.compareSubscriptionId(e,_(t.parseResourceDescriptor(o)))},t.resourceGroupContainsResource=function(e,o){return e&&o&&t.compareResourceGroupId(e,k(t.parseResourceDescriptor(o)))}}(t.ResourceTypes||(t.ResourceTypes={}))}(t.Services||(t.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){this.refreshPacket=ko.observable(null)}return e.prototype.signalResourceGroupRefresh=function(e){this.refreshPacket({resourceGroupId:e})},e.prototype.signalResourceRefresh=function(e){this.refreshPacket({resourceId:e})},e.prototype.signalAssetRefresh=function(e,t,o){this.refreshPacket({assetOwner:e,assetType:t,assetId:o})},e}();e.ResourcePartExtender=t}(e.ResourceTypes||(e.ResourceTypes={}))}(e.Services||(e.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(){this.assetType=ko.observable(),this.assetName=ko.observable(),this.icon=ko.observable(),this.assetId=ko.observable(),this.status=ko.observable(),this.state=ko.observable(),this.size=ko.observable(1)};e.AssetPart=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=t.Controls.Visualization.Chart.InteractionBehavior,i=function(t){function i(i){var n=t.call(this,i)||this;n.size=ko.observable(1),n.editButtonText=ko.observable(e.Resources.Strings.Part.Chart.editButtonText);var r=n.size,a=n.interactionBehavior;return r.subscribe(i,(function(e){switch(e){case 2:case 1:case 3:a(o.ChartArea_Off|o.XSlider_Off);break;default:a(o.All)}})),r.notifySubscribers(r()),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.ChartPart","custom part with Fx/Controls/LineChart, Fx/Controls/BarChart, Fx/Controls/AreaChart, or Fx/Controls/ScatterChart"),n}return __extends(i,t),i}(e.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=i}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o,i=e.ViewModels.Controls.Lists.Grid;!function(e){e[e.None=0]="None",e[e.Data=1]="Data",e[e.Rollup=2]="Rollup"}(o=t.GridMode||(t.GridMode={}));var n=[];[0,1,2,3,4,10,5,6,11,99].forEach((function(e){n[e]=!0}));var r=function(){function t(t,n){var r=this;this.size=ko.observable(2),this.alwaysShowRollupCount=ko.observable(!1),this.rollupCount=ko.observable(),this.rollupCountIconUri=ko.observable(),this.rollupCountIcon=ko.observable(),this.rollupCountLabel=ko.observable(),this._options=null,this._container=null,this._container=t,this._options=n,this.gridMode=ko.observable(o.None),this.hasMoreData=ko.observable(!1);var a=n.selectableRowExtensionOptions?i.Extensions.SelectableRow:null;this.grid=new i.ViewModel(t,ko.observableArray(),a,__assign({scrollable:{horizontal:!1,vertical:!1}},n.selectableRowExtensionOptions)),this.grid.showHeader=!!n.showHeader,this.grid.columns=ko.observableArray(),t.registerForDispose(this.grid),this.emptyGrid=ko.observable(!0),n.noRowsHtml?this.noRowsHtml=n.noRowsHtml:this.noRowsHtml=ko.observable(null),n.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=ko.observable()),ko.computed(t,(function(){r.grid.noRowsMessage(n.noRowsMessage())}))),this.selectableData=this.grid.selectableData,this._reactToDataChange(t,n.data,(function(e){return e===o.Data})),this._reactToDataChange(t,n.rollupData,(function(e){return e===o.Rollup})),this._reactToSizeChange(),this.noRollupCount=ko.computed(t,(function(){return e.isNullOrUndefined(r.rollupCount())}))}return t.prototype._reactToDataChange=function(e,t,o){var i=this;t&&(t.items.subscribe(e,(function(e){i.emptyGrid(!e.length),o(i.gridMode())&&i._updateGrid(t)})),ko.computed(e,(function(){if(o(i.gridMode())){var e=t.columns();i.grid.columns(e)}})))},t.prototype._reactToSizeChange=function(){var e=this;ko.computed(this._container,(function(){var t=e._options,i=e.size();e.alwaysShowRollupCount(),!function(e){return 0===e||1===e}(i)&&(t.data||t.rollupData)?t.rollupData&&function(e){return 2===e||3===e}(i)||t.rollupData&&!t.data?e.gridMode(o.Rollup):t.data&&e.gridMode(o.Data):e.gridMode(o.None),ko.ignoreDependencies((function(){switch(e.gridMode()){case o.Data:e._updateGrid(t.data);break;case o.Rollup:e._updateGrid(t.rollupData);case o.None:}}))}))},t.prototype._updateGrid=function(e){if(e){var t=e.items(),o=this.size(),i=n[o]?function(e,t,o){var i;switch(e){case 8:case 9:case 7:i=20;break;case 6:i=14;break;case 10:case 5:case 4:i=9;break;default:i=3}return i=t?i-1:i,o?i-1:i}(o,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>i);var r=t.slice(0,i),a=this.grid.items.peek();(a.length!==r.length||ko.utils.compareArrays(a,r,{sparse:!0}).length>0)&&this.grid.items(r)}},t}();t.ViewModel=r}(t.Collection||(t.Collection={}))}(t.Parts||(t.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=function(){this.resourceCount=ko.observable(0),this.countIsMinimum=ko.observable(!1),this.description=ko.observable(""),this.icon=ko.observable(e.Base.Images.Polychromatic.DefaultBlade()),this.label=ko.observable(""),this.size=ko.observable(2)};t.CollectionSummary=o}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.createName=ko.observable(""),t}return __extends(t,e),t}(e.ButtonPart);e.CreatePart=t}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=ko.utils.wrap,i="string",n=function(e,t){this.text=o(e),typeof t===i||ko.isObservable(t)&&typeof t()===i?this.uri=o(t):this.bladeSelection=o(t)};t.Link=n;var r=function(){function t(t){this.sections=ko.observableArray(),this.bladeLinks=ko.observableArray(),this.selection=new e.ViewModels.SelectableSet(this.bladeLinks,(function(e,t){return e.bladeSelection().detailBlade===t.detailBlade}),(function(e){return e.bladeSelection()}),t&&t.content&&t.content.selection)}return t.prototype.dispose=function(){this.selection.dispose()},t.prototype.addSection=function(e,t,i,r){var a,s=this;a=Array.isArray(i)?new n("",void 0):new n("",i),this.sections.push({title:o(e),description:o(t),selection:a,links:Array.isArray(i)?i:null,icon:r}),(Array.isArray(i)?i:[a]).forEach((function(e){e.bladeSelection&&s.bladeLinks.push(e)}))},t}();t.ViewModel=r}(t.InfoList||(t.InfoList={}))}(t.Parts||(t.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.Base,i=e.ViewModels,n=i.equalDynamicSelections,r=i.SelectableSet,a=e.ViewModels.Controls.Forms.CopyableLabel,s=ko.utils.wrap,l="_msPortalFxPropertiesPartSelectionKey",c=e.Resources.Strings.Part.PropertiesPart,u=new o.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart");function d(e){return"object"==typeof e}var p=function(){function t(e){this._openBladeProperties=null,this._openBladeAsyncProperties=null,this._moveResourceProperties=null,this.properties=ko.observableArray(),this._openBladeProperties=ko.observableArray(),this.selection=new r(this._openBladeProperties,(function(e,t){return n(e.bladeSelection(),t)}),(function(e){return e.bladeSelection()}),e&&e.content&&e.content.selection),this._moveResourceProperties=ko.observableArray(),this.moveResourceSelection=new r(this._moveResourceProperties,(function(e,t){var o=ko.unwrap(e.editBlade.bladeSelection);return n(o,t)}),(function(e){return ko.unwrap(e.editBlade.bladeSelection)}),e&&e.content&&e.content.moveResourceSelection);var t=function(e){return e.label};this._openBladeAsyncProperties=ko.observableArray(),this.asyncSelection=new r(this._openBladeAsyncProperties,(function(e,o){return function(e){return e[l]}(o)===t(e)}),(function(){return null}),e&&e.content&&e.content.asyncSelection),FxImpl.ViewModels.SelectableSet.setCreateDelayedBladeSelection(this.asyncSelection,(function(e){return{bladeWidth:1,selectedValuePromise:e.resolveBlade().then((function(o){return function(e,o){e[l]=t(o)}(o,e),o}))}}))}return t.prototype.setProperties=function(e){var t=[],o=[],i=[];e.forEach((function(e){switch(e.getType()){case 7:e.bladeLinks().forEach((function(e){t.push(e)}));break;case 8:o.push(e),e.editBlade&&1===e.editBlade.editType&&i.push(e);break;default:e.bladeSelection&&t.push(e),e.editBlade&&1===e.editBlade.editType&&i.push(e)}})),this.properties(e),this._openBladeProperties(t),this._openBladeAsyncProperties(o),this._moveResourceProperties(i)},t.prototype.removeAllProperties=function(){this._openBladeAsyncProperties([]),this._moveResourceProperties([]),e.disposeDisposable(this.properties()),this.properties([]),this._openBladeProperties([])},t.prototype.dispose=function(){this.removeAllProperties(),this.selection.dispose(),this.moveResourceSelection.dispose()},t}();t.ViewModel=p;var f=function(){function e(e){var t=this;this.displayValue=ko.observable(""),this.editBladeText=c.changeLabel,this.label=e.label,this.value=s(e.value);var o=e.blade,i=o&&o.displayValue;this.displayValue=s(i||e.displayValue),this.copyableValue=s(e.copyableValue),this.visible=s(void 0===e.visible||e.visible),this.wrappable=s(void 0!==e.wrappable&&e.wrappable);var n=o&&o.bladeSelection;this.bladeSelection=n?s(n):null,this.infoBalloon=e.infoBalloon,this.editBlade=e.editBlade;var r=e.isLoading;this.isLoading=ko.pureComputed((function(){return r&&r()})),this._supportsIsLoading=!!r,this.type=this.getType();var a=this._lifetimeManager=new FxImpl.TriggerableLifetimeManager,l=this.hasValidBladeSelection=ko.computed(a,(function(){var e=t.bladeSelection;return!(!e||!e())||8===t.type})),d=l();l.subscribe(a,(function(e){d&&!e&&u.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value."),d=e}))}return Object.defineProperty(e.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!1,configurable:!0}),e.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.")},e.prototype.dispose=function(){this._lifetimeManager.dispose()},e}();t.Property=f;var b=function(e){function t(t,o){var i,n=this;return(i=d(t)?t:{label:t,value:o}).copyableValue=i.value,(n=e.call(this,i)||this).icon=s(i.icon),n}return __extends(t,e),t.prototype.getType=function(){return 0},t}(f);t.TextProperty=b;var v=function(t){function o(o,i,n){var r,a=this;return d(o)?(r=o).displayValue||(r.displayValue=r.value):r={label:o,value:i,displayValue:n||i,target:"_blank"},(a=t.call(this,r)||this).target=r&&r.target||"_blank",a.copyableValue=ko.pureComputed((function(){var t=ko.unwrap(a.displayValue),o=ko.unwrap(a.value);return e.isNullOrWhiteSpace(t)?o:o&&t.toLowerCase()===o.toLowerCase()?t:"".concat(t," <").concat(o,">")})),a}return __extends(o,t),o.prototype.getType=function(){return 1},o}(f);t.LinkProperty=v;var m=function(e){function t(t,o,i){var n,r=this,s=new FxImpl.TriggerableLifetimeManager;n=d(o)?o:{label:o,value:i};var l=new a.ViewModel(s,{shellUseOnly:!0});return l.readOnly(!0),n.copyableValue=n.value,r=e.call(this,n)||this,ko.computed(s,(function(){var e=ko.unwrap(n.value);l.value(e)})),r.value=l,r.lifetimeManager.registerForDispose(s),t.registerForDispose(r),r}return __extends(t,e),t.prototype.getType=function(){return 2},t}(f);t.CopyFieldProperty=m;var h=function(e){function t(t,o,i,n){var r,a=this;return(r=d(t)?t:{label:t,displayValue:o,callback:i,icon:n}).copyableValue=r.displayValue,(a=e.call(this,r)||this).callback=r.callback,a.icon=s(r.icon),a.callbackWrapper=function(){return a.callback(),!1},a}return __extends(t,e),t.prototype.getType=function(){return 3},t}(f);t.CallbackProperty=h;var g=function(t){function o(o,i,n){var r,a=this;r=d(o)?o:{label:o,displayValue:i,bladeSelection:n};var l=e.extend2({blade:{displayValue:r.displayValue,bladeSelection:r.bladeSelection}},r);return(a=t.call(this,l)||this).copyableValue=s(r.displayValue),a}return __extends(o,t),o.prototype.getType=function(){return 4},o}(f);t.OpenBladeProperty=g;var y=function(e){function t(t,o,i){var n,r=this;n=d(o)?o:{label:o,bladeLinks:i};var a=(r=e.call(this,n)||this).lifetimeManager;return r.bladeLinks=ko.observableArray(),n.bladeLinks.map(a,(function(e,t){return new g({label:"",displayValue:t.displayValue,bladeSelection:t.bladeSelection})})).subscribeAndRun(a,r.bladeLinks),t.registerForDispose(r),r}return __extends(t,e),t.prototype.getType=function(){return 7},t}(f);t.MultiOpenBladeProperty=y;var x=function(e){function t(t,o){var i,n=this;return i=d(t)?t:{label:t,links:o},(n=e.call(this,i)||this).links=i.links,n}return __extends(t,e),t.prototype.getType=function(){return 5},t}(f);t.MultiLinksProperty=x;var M=function(e){function t(t,o){var i,n=this;return i=d(t)?t:{label:t,icon:o},(n=e.call(this,i)||this).icon=s(i.icon),n}return __extends(t,e),t.prototype.getType=function(){return 6},t}(f);t.ImageProperty=M}(t.Properties||(t.Properties={}))}(t.Parts||(t.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){var t=MsPortalFx.ViewModels.Parts.Properties,o=ko.utils.wrap,i=function(e){function t(t){var i=this,n=MsPortalFx.extend2({blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);return(i=e.call(this,n)||this).resolveBlade=t.resolveBlade,i.copyableValue=o(t.displayValue),i}return __extends(t,e),t.prototype.getType=function(){return 8},t}(t.Property);e.OpenBladeAsyncProperty=i}(e.Properties||(e.Properties={}))}(e.Parts||(e.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o=MsPortalFx.Base.Images,i=MsPortalFx.Resources.Strings.Part.Provisioning.description,n=function(e){function t(t,n,r){var a=e.call(this,t,n,!1!==r,!0)||this;return a._partContainer=null,a.title=ko.observable(""),a.description=ko.observable(i),a.icon=ko.observable(o.Polychromatic.DefaultBlade()),a.errorMessage=ko.observable(),a._partContainer=t,a.icon=ko.observable(o.Gear()),a}return __extends(t,e),t.prototype.onInputsSet=function(t){return e.prototype.onInputsSet.call(this,t)},t.prototype.mutate=function(e){this._partContainer.mutate({containerModel:e})},t}(e.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=n}(t.ProvisioningPart||(t.ProvisioningPart={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=function(t){function o(){var o=t.call(this)||this;return o.backgroundColor=e.Parts.PartColor.Theme,o.title(e.Resources.Strings.Part.Quickstart.title),o.icon(e.Base.Images.AzureQuickstart()),o}return __extends(o,t),o}(t.ButtonPart);t.QuickStartPart=o}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){var t,o;o=e.ViewModels||(e.ViewModels={}),function(t){var o=e.Base,i=o.Constants,n=e.ViewModels,r=n.Selectable,a=n.Controls.Lists.Grid,s=a.Extensions,l=o.Diagnostics.Telemetry,c=o.Images,u=c.Polychromatic,d=e.isNullOrUndefined,p=ko.utils,f=i.ResourceTypes.ResourceGroups,b=FxImpl.Azure,v=e.Resources.Strings.Part.SettingList,m=v.Group,h=v.Keywords,g=p.arrayFirst,y="aggregatedKeywords";function x(e,t,o,i){return{key:e,extension:t,name:o,name2:i}}var M=e.isFeatureEnabled("linknewquesttosupportblade"),P=x("__users","Microsoft_Azure_AD","UserAssignmentsBlade"),_=x("__tags","HubsExtension","ResourceTagsBlade"),w=x("__locks","HubsExtension","LocksBlade"),k=x("__exportTemplate","HubsExtension","ResourceGroupTemplateViewer"),S=x("__troubleshoot","Microsoft_Azure_Support","TroubleshootBlade"),F=x("__troubleshootV2","Microsoft_Azure_Support","TroubleshootV2Blade"),C=x("__supportRequest","Microsoft_Azure_Support",M?"HelpAndSupportBlade":"NewSupportRequestBlade"),I=x("__resourceHealth","Microsoft_Azure_Support","ResourceHealthDetailBlade"),V=x("__eventLogs","Microsoft_Azure_ActivityLog","ActivityLogBlade"),T=[P,_,w,k,S,F,C,I,V],B=/^\/subscriptions\/([^/\s]+)$/i,D=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)$/i,A=/^\/subscriptions\/([^/\s]+)/i,O=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)/i,R=/(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((:?\/[^/]+\/[^/]+)*)$/i,E=/\/([^/]+)\/([^/]+)/g,L=/^(?:\/providers\/[^/]+(?:\/[^/]+\/[^/]+)*)*(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((?:\/[^/]+\/[^/]+)*)$/i,N=/^(?:\/subscriptions\/[^/\s]+(\/resourceGroups\/[^/\s]+)?)?(?:\/providers\/[^/]+(?:\/[^/]+\/[^/]+)*)*(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((?:\/[^/]+\/[^/]+)+)$/i,U=e.getJoinFunc("/");function G(e){return B.test(e)}var z=e.isFeatureEnabled("hidesupport"),H=e.isFeatureEnabled("hidehealthcheck");function q(e){return T.some((function(t){return e.key===t.key}))}var j=function(){function t(e,t,o,i,n){this.displayText=ko.observable(""),this.icon=ko.observable(),this.keywords=ko.observableArray(),this.group=ko.observable(" "),this.aggregatedKeywords=ko.observable(""),this._key=e,this._blade=p.wrap(t),this._bladeInputs=o,this._extension=p.wrap(i),this._options=n}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),t.prototype.getOptions=function(){return this._options},t.prototype.toSelection=function(){var e=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!(!e||!e.parameterCollector)}},t=__decorate([__metadata("fx:diagnostics",[require,"Setting"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[String,Object,Function,Object,Object])],t)}();function W(t){e.isNullOrWhiteSpace(t.group())&&t.group(m.general)}function K(e,t){var o=e[y];ko.reactor(t,(function(){var t=e.displayText()+" "+e.group()+" "+(e.keywords()||[]).join(" ");o(t)}))}t.Setting=j;var J=function(){function t(t,o,i,n){var r=this,l=this.resourceId=ko.observable();this.searchBoxPlaceholder=ko.observable(v.searchBoxPlaceholder);var c,u=p.wrapArray(i);n=n||{};var f,b=function(){r._updateSettings(t,u,n,c),r._processSettings(t)};l.subscribe(t,(function(t){f=(f||Q()).then((function(){var o=G(t),i=Q();return o&&(i=e.Azure.getSubscriptionInfo(function(e){var t=A.exec(e);if(t)return{subscription:t[1],subscriptionId:"/subscription/".concat(t[1])};throw new Error("Invalid ID")}(t).subscription).then((function(e){c=e}),(function(e){}))),i.then(b)}))}));var m=s.SelectableRow|s.Filterable,h=this._searchText=ko.observable(""),x={selectableRow:{selectionMode:1,itemMatchesSelection:function(e,t){return e.key===t.key},createSelection:function(e){return e.toSelection()},activateOnSelected:ko.observable(!0),initialSelection:o&&o.content&&o.content.settingList&&o.content.settingList.selectableData},filterable:{searchableColumns:ko.observableArray([y]),searchBoxCloseButtonVisible:ko.observable(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:h}},M=!(n&&!d(n.groupable))||n.groupable;M&&(m|=s.Groupable,x.groupable={groupKey:ko.observable("group"),sortFunction:a.SortFunction.SettingListGroupOrder},u().forEach((function(e){W(e)})));var P=new a.ViewModel(t,u,m,x);this.settingList=P,P.columns=ko.observableArray(function(e){var t="<div data-bind='image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",o=function(e,t,o){var i=a.Format.HtmlBindings,n={htmlBindingsTemplate:t};return{itemKey:e,template:t,format:i,formatOptions:n,filterableFormat:i,filterableFormatOptions:n,width:o?ko.observable(o):null}},i=[o("icon",t.format("value",15,0),"25px"),o("displayText","<div data-bind='text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),o("",t.format("MsPortalFx.Base.Images.Chevron()",14,"8px 0 9px 3px"),"30px")];return e&&i.unshift(o("__placeholder__","","1px")),i}(M)),P.showHeader=!1,P.selectableData.activatedItems.subscribe(t,(function(e){if(e&&e.length>0){var t=e[0];r._trace(t)}}));var _=P.items,w=[];_.subscribe(t,(function(e){w=e}),null,"beforeChange"),_.subscribe(t,(function(e){(f||Q()).then((function(){var t=!d(g(w,q)),o=!d(g(e,q));t&&!o&&b()}))})),_.subscribeArrayChanges(t,(function(e){r._removeSetting(e)||(K(e,t),W(e))}),null),this._processSettings(t)}return t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(t,o,i,n){var r,a=o().slice(),s=this.resourceId();if(e.remove(a,q),!d(s)){var l=(r=s,L.test(r)),p=G(s),g=function(e){return D.test(e)}(s),y=function(e){return N.test(e)}(s),x=p||g||y&&!l,M=g?s:y?function(e){var t=O.exec(e);if(t)return{resourceGroup:t[2],resourceGroupId:"/subscriptions/".concat(t[1],"/resourceGroups/").concat(t[2])};throw new Error("Invalid ID")}(s).resourceGroupId:null,T=g?f:y?function(e){var t=R.exec(e);if(t){for(var o=void 0,i=t[1],n=t[2],r=[];o=E.exec(n);){if(!o)throw new Error("Invalid resource ID");r.push(o[1])}return U(i,U.apply(void 0,r))}throw new Error("Invalid resource ID")}(s):null,B=T&&T.toLowerCase().startsWith("microsoft.classic"),A=ko.observable({scope:s}),Q=ko.observable({resourceId:s}),W=ko.observable({assetId:s}),K=!d(i),J=p&&n&&b.isZeroCapSubscription(n),$=function(e,t,o,i,n,r,s,l){var c=new j(e.key,e.name,r,e.extension,l);return c.displayText(i),c.icon(o),c.group(t?m.support:m.resourceManagement),c.keywords([n]),a[s?"unshift":"push"](c),c};!this.isPCv3()||z||K&&!1===i.enableSupportHelpRequest||$(C,!0,c.Support(),v.helpRequest,h.helpRequest,W,!1,{parameterCollector:{supplyInitialData:e.wrap(""),receiveResult:e.wrap({}),supplyProviderConfig:e.wrap({provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}})}}),!z&&!H&&K&&i.enableSupportResourceHealth&&$(I,!0,c.HeartPulse(),v.resourceHealth,h.resourceHealth,Q,!0),!x||K&&!1===i.enableSupportEventLogs||$(V,!0,u.Log(),v.eventLogs,h.eventLogs,ko.observable({queryInputs:{id:s}}),!0),x&&!B&&K&&i.enableTags&&$(_,!1,c.Polychromatic.Tags(),v.tags,"",Q,!1),x&&!J&&$(w,!1,c.Lock(),p?v.locksForSubscriptions:v.locks,"",Q,!1),!x&&!l||K&&!1===i.enableRbac||$(P,!1,c.PersonWithFriend({palette:3}),v.users,v.access,A,!1),!x||B||p||!1===i.enableExportTemplate||$(k,!1,c.Polychromatic.Download(),v.exportTemplate,h.exportTemplate,ko.observable({options:{resourceGroup:M,telemetryId:T}}),!1),!z&&K&&(i.enableSupportTroubleshoot||i.enableSupportTroubleshootV2)&&$(i.enableSupportTroubleshootV2?F:S,!0,c.Tools(),v.troubleshoot,h.troubleshoot,W,!0),o(a)}},t.prototype._processSettings=function(e){var t=this;this.settingList.items().slice().forEach((function(o){t._removeSetting(o)||(K(o,e),W(o))}))},t.prototype._removeSetting=function(e){var t=this,o=e.toSelection(),i=o.extension,n=o.detailBlade,r=o.key,a=!1;return T.forEach((function(o){var s=t.settingList.items,l=s().some((function(e){return e.key===o.key}));(z&&"Microsoft_Azure_Support"===i||i===o.extension&&(n===o.name||n===o.name2)&&r!==o.key&&l)&&(s.remove(e),a=!0)})),a},t.prototype._trace=function(t){var o={extension:t.extension,detailBlade:t.detailBlade},i=this._searchText.peek();e.isNullOrWhiteSpace(i)||(o.searchText=i),l.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:o})},t}();t.BaseViewModel=J;var $=function(e){function t(t,o,i,n){return e.call(this,t,o,i,n)||this}return __extends(t,e),t}(J);t.ViewModel=$;var X=function(t){function o(e,o,i,n){var a=t.call(this,e,o,i,n)||this,s=a.selectable=new r,l=a.pcSelectable=new r;a.settingList.selectableData.selectedItems.subscribe(e,(function(e){var t=a.pcSelectable,o=a.selectable;if(e.length<1)o.isSelected(!1),t.isSelected(!1);else{var i=e[0],n=i.isParameterCollector?t:o;n.selectedValue(i),n.isSelected(!0)}}));var c=function(){var e=a.settingList.selectableData;e.selectedItems([]),e.activatedItems([])};return s.isSelected.subscribe(e,(function(e){!e&&c()})),l.isSelected.subscribe(e,(function(e){!e&&c()})),a._initParameterCollector(e),a}return __extends(o,t),o.prototype.isPCv3=function(){return!0},o.prototype._initParameterCollector=function(t){var o=this,i=function(t){var i=t.selectedValue.peek();return e.find(o.settingList.items.peek(),(function(e){return e.key===i.key}))},r={selectable:this.pcSelectable,supplyInitialData:function(){return i(o.pcSelectable).getOptions().parameterCollector.supplyInitialData()},receiveResult:function(e){i(o.pcSelectable).getOptions().parameterCollector.receiveResult(e)},supplyProviderConfig:function(){var e=i(o.pcSelectable).getOptions().parameterCollector;return e.supplyProviderConfig?e.supplyProviderConfig():null}};this.parameterCollector=new n.ParameterCollector(t,r)},o}(J);t.ViewModelV2=X}((t=o.Parts||(o.Parts={})).SettingList||(t.SettingList={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=MsPortalFx.ViewModels.ParameterCollection.Internal,i=MsPortalFx.ViewModels.ActionBars.Base,n=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),r=MsPortalFx.Services.Gallery.Constants.GalleryOptionsKey,a=function(e){function t(t,i){var n=e.call(this,t,i,!1)||this;return n._setupPartContainer=null,n._previousCommit=null,n._outputs=null,n._setupPartContainer=t,n.provisioningEntity={enableProvisioning:ko.observable(!0),privatePcPrBI:new o.ProvisioningEntityBindingInternals},n}return __extends(t,e),t.prototype.onInputsSet=function(t){return this._loadContent(),e.prototype.onInputsSet.call(this,t)},t.prototype.mutateOnLoad=function(){return null},t.prototype.mutate=function(e,t){this._setupPartContainer.mutate({partName:e,extensionName:t})},t.prototype.onProviderCommit=function(e,t){return this._outputs=t,Q(!0)},t.prototype._loadContent=function(){var e=this,t=this._setupPartContainer,o=this.mutateOnLoad(),i=function(){e._commit.subscribe(t,(function(t){e._executeProvisioningIfApplicable(t)}))};o?o.then((function(e){e?"string"==typeof e?t.mutate({partName:e}):t.mutate(e):i()}),(function(){n.error("mutateOnLoad() returned a failed promise"),i()})):i()},t.prototype._executeProvisioningIfApplicable=function(e){var t=this;if(this._outputs){var a=this._previousCommit;if(this._previousCommit=e,!MsPortalFx.deepEquals(a,e)&&i.isCompleted(this.stepOutput())){var s=this._setupPartContainer;s.selectable.isSelected(!1),s.contentState(0);var l=new o.Provisioner(this.provisioningEntity),c=this._outputs,u=this.privateFcTpBI.inputs().options,d=l.executeProvisioning(c,u);s.operations.add(d,{blockUi:!0});var p=u[r].uiDefinition.markup.reference,f=p.partName,b=p.partExtension;d.then((function(){s.mutate({partName:f,extensionName:b})}),(function(){n.error("executeProvisioning callback failed."),s.contentState(3),t.beginExecuteCommand(!1)}))}}},t}(e.ViewModels.ProvisioningPart.ContentViewModel);t.Content=a}(t.SetupPart||(t.SetupPart={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=e.Data,i=FxImpl.fromSerializableObject,n=FxImpl.isSerializedObject,r={bothCallbacks:"",alreadySubscribed:""},a=FxImpl.getErrorMap(r),s=function(){function r(e,t){this.defaultActionBarInput=ko.observable({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null}),this._configFromCollector=ko.observable(),this._hasSentResult=!1,this._getResultSubscribers=[],!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync&&a.bothCallbacks(),this._options=t,this._prepareEditScopeWithInitialData(e),this._setUpActionBarWatcher(e)}return Object.defineProperty(r.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"configFromCollector",{get:function(){return this._configFromCollector},enumerable:!1,configurable:!0}),r.prototype.getResultsBeforeCommit=function(e){this._getResultSubscribers.some((function(t){return t===e}))&&a.alreadySubscribed(),this._getResultSubscribers.push(e)},r.prototype.getResults=function(){var e,t=this._editScopeView.editScope&&this._editScopeView.editScope();return t&&(e=this._options.mapOutgoingDataForCollector(t.root)),e},r.prototype._prepareEditScopeWithInitialData=function(e){var r,a,s=this;this.bladeCallable=new t.Internal.BladeCallable(e,{receiveParams:function(e){var t=e.initialData,o=e.providerConfig;n(t)&&(t=i(t)),n(o)&&(o=i(o)),s._configFromCollector(o),s._options.mapIncomingDataForEditScope?(a=s._options.mapIncomingDataForEditScope(t),r=Q({})):r=s._options.mapIncomingDataForEditScopeAsync(t).then((function(e){a=e}))}});var l,c=this._editScopeCache=o.EditScopeCache.createNew({entityTypeName:this._options.editScopeMetadataType,supplyNewData:function(){return a}});e.registerForDispose(c),this._editScopeView=c.createView(e),e.onInputsSetCallbacks.add((function(t){if(t.editScopeId&&t.editScopeId!==s._editScopeId){s._editScopeId=t.editScopeId,l=r.then((function(){return s._editScopeView.fetchForNewData(s._editScopeId)}));var o=e;"function"==typeof o.revealContent&&(l=l.then((function(){o.revealContent()})))}return l}))},r.prototype._setUpActionBarWatcher=function(e){var t=this,o=function(e){e&&3===e.status&&(t._hasSentResult||(t._hasSentResult=!0,t._discardEditScopeAndSendResult({actionBarOutput:e})))};e.onInputsSetCallbacks.add((function(e){o(e.internal_parameterProviderActionBarOutput)})),ko.reactor(e,(function(){if(ko.isObservable(e._actionBar)){var t=e._actionBar();t&&o(t.output())}}))},r.prototype._discardEditScopeAndSendResult=function(e){var t=this._editScopeView,o=t.editScope&&t.editScope();if(o){var i=this._options.commitResult;i&&i(o.root);var n=this._options.mapOutgoingDataForCollector(o.root,e);this.bladeCallable.sendResult({resultData:FxImpl.toSerializableObject(n)}),this._getResultSubscribers.forEach((function(e){e.receiveResult(n)})),this._editScopeCache.disposeAndDiscardEdits(this._editScopeId,t)}},r=__decorate([__metadata("fx:diagnostics",[require,"ParameterProvider"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.ContainerContract,Object])],r)}();t.ParameterProvider=s}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){var t={missingSelectable:"",bothSelectables:"",fieldAccessorAndCallbacks:"",missingCallbacks:""},o=FxImpl.getErrorMap(t),i=function(t,i){var n=i.selectable,r=i.selectableSet?null:n||t.selectable;r||i.selectableSet||o.missingSelectable(),n&&i.selectableSet&&o.bothSelectables(),i.formFieldValueAccessor?(i.receiveResult||i.supplyInitialData)&&o.fieldAccessorAndCallbacks():i.receiveResult||o.missingCallbacks(),this.bladeCaller=new e.Internal.BladeCaller(t,{forceInvocation:i.fxInternalFI,invokeOnSelectable:r,invokeOnSelectableSet:i.selectableSet,supplyParams:function(e){var o=null;return i.supplyInitialData?o=i.supplyInitialData(e):i.formFieldValueAccessor&&(o=i.formFieldValueAccessor.getEditableObservable(t)()),{initialData:FxImpl.toSerializableObject(o),providerConfig:i.supplyProviderConfig?i.supplyProviderConfig(e):null}},receiveResult:function(e,o){var n=FxImpl.fromSerializableObject(e.resultData);i.receiveResult?i.receiveResult(n,o):i.formFieldValueAccessor.getEditableObservable(t)(n)}})};e.ParameterCollector=i}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=MsPortalFx.Base,i=e.Rpc,n=e.Constants.RpcMethods,r=i.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(n.initiateProvisioningRequest),t.getProvisioningRequestEndPoint=new r(n.getProvisioningRequest),t.getProvisioningOperationEndPoint=new r(n.getProvisioningOperation),t.getProvisioningOperation=function(n,r){return Q(t.getProvisioningOperationEndPoint.acquireObject(r||i.client,o.Constants.Shell,n).then((function(t){var o=t&&t.value;if(o){var i=o.provisioningPromise;return i?(i.finally((function(){t.dispose()})),Q(o)):(t.dispose(),Q.reject(e.createError("The provisioning operation was invalid.",{data:{refkey:n}})))}})))}}(t.ParameterCollectionV3||(t.ParameterCollectionV3={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o=MsPortalFx.Base,i=e.ViewModels.ParameterCollectionV3,n=e.Rpc,r=o.Diagnostics.Telemetry,a=e.ProvisioningTelemetry,s=a.ActionModifier,l=a.ProvisioningStatus,c=void 0,u="",d={optionsMissing:u,supplyProvisioningPromiseMissing:u,supplyStartboardInfoMissing:u,providerAndActionBar:u,automaticProvisioning:u,invalidStarboardInfo:u,badStarboardInfo:u,requestAlreadyExists:u,refKeyDoesntMatch:u,provisionerIdMissing:u,provisionerNotFound:u,refKeyMissing:u,requestNotFound:u},p=e.getErrorMap(d);function f(e){return"function"==typeof e}var b=function(){function t(e,o){var i=this;this.provisioningConfig=ko.observable(),this.provisioningPromise=ko.observable(),this.provisionOnStartboard=ko.observable(!1),this._isCustomProvisioning=!0,this._actionBarSupportsForceInProgressStatus=!1,this._actionBarSupportsIsProvisioningBlade=!1,this._actionBarSupportsProvisionOnStartboardPart=!1,this._actionBarSupportsSecondaryLinkDisplayText=!1,this._actionBarSupportsSecondaryLinkValidation=!1,this._actionBarSupportsShowActionBar=!1,this._validationEvents=[],function(e){e||p.optionsMissing(),f(e.supplyProvisioningPromise)||p.supplyProvisioningPromiseMissing(),f(e.supplyStartboardInfo)||p.supplyStartboardInfoMissing();var t=e.parameterProvider;(e.actionBar?!t:t)&&p.providerAndActionBar()}(o),Object.defineProperty(this,"_launchingContext",{get:ko.computed(e,(function(){var e=i.provisioningConfig(),t=e&&e.galleryCreateOptions;return t&&t.launchingContext||{}}))}),this._options=o;var n=this._actionBar=o&&o.actionBar,a=!1;n&&(a=this._actionBarSupportsIsProvisioningBlade=f(n.isProvisioningBlade),this._actionBarSupportsForceInProgressStatus=f(n.forceInProgressStatus),this._actionBarSupportsProvisionOnStartboardPart=f(n.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=f(n.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=f(n.secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=f(n.showActionBar));var s=this._provisionerId=MsPortalFx.getUniqueId();t.provisionersList[s]=this;var l=r.Context.getPartContext(),c=o.parameterProvider;if(c){c.getResultsBeforeCommit(this);var u=function(e){var t=e&&e.provisioningConfig;if(t){var o=(t=MsPortalFx.clone(t,!0)).galleryCreateOptions,r=o&&o.launchingContext;r&&(r.extVersion=MsPortalFx.getEnvironmentValue("version"),r.bladeInstanceId=l.bladeInstanceId),i.provisioningConfig(t),a&&n.isProvisioningBlade(e.provisioningConfig.provisioningEnabled)}};u(c.configFromCollector()),c.configFromCollector.subscribe(e,u)}t._registerRpcCallbacks()}return Object.defineProperty(t.prototype,"_telemetryId",{get:function(){var e=this._launchingContext;return e&&e.telemetryId},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._validationEvents.length&&a.traceDeployment(MsPortalFx.extend2(this._createEventBase(),{validationEvents:this._validationEvents})),delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(t){this._actionBar&&p.automaticProvisioning();var o=this._options.supplyStartboardInfo(t);return o&&!e.ViewModels.Provisioning.isValid(o)&&p.invalidStarboardInfo(),this.provisionOnStartboard(!!o),this._initiateProvisioningRequest(t,o)},t.prototype._traceValidation=function(e){var t={source:c,action:e};this._validationEvents.push(t)},t.prototype.receiveResult=function(e){(this.provisioningConfig()||{}).provisioningEnabled&&this._beginProvisioning(e)},t.prototype._beginProvisioning=function(t){var o,i=this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(o=this._options.supplyStartboardInfo(t)||this.provisioningConfig().startboardProvisioningInfo,e.ViewModels.Provisioning.isValid(o)||p.badStarboardInfo()),this._initiateProvisioningRequest(t,o)},t.prototype._initiateProvisioningRequest=function(n,r){var a=this;this._postProvisioningInputsDeferred=Q.defer();var s=this._launchingContext||{};s.telemetryId||(s.telemetryId=MsPortalFx.newGuid()),s.extVersion||(s.extVersion=MsPortalFx.getEnvironmentValue("version")),this._traceProvisioningStarted(this._createEventBase());var l=this._options.supplyProvisioningPromise(n);if(this.provisioningPromise(l),l){l.then((function(e){a._traceProvisioningEnded(e,!0,a._createEventBase())}),(function(e){a._traceProvisioningEnded(e,!1,a._createEventBase())}));var u=MsPortalFx.getUniqueId();t.provisioningRequestsLookup[u]&&p.requestAlreadyExists();var d={provisioningConfig:MsPortalFx.extend({postProvisioningBladeInputs:Q(this._postProvisioningInputsDeferred.promise)},this.provisioningConfig()),provisioningRefKey:u,provisioningPromise:l,startboardInfo:r};t.provisioningRequestsLookup[u]=d,e.internalEnv.isShell?Promise.all([MsPortalFx.require("Fx/DependencyInjection"),MsPortalFx.require("MsPortalImpl/Services/Services.ShellProvisioner")]).then((function(e){var t=e[0];e[1].create(t.container).processProvisioningRequest(d)})):i.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,o.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:u}).then((function(e){e.value.provisioningRefKey!==u&&p.refKeyDoesntMatch(),e.dispose()}))}else this._traceProvisioningEnded(c,c,this._createEventBase());return l},t._registerRpcCallbacks=function(){t._rpcRegistered||(i.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[o.Constants.Shell],allowRemoteChanges:!0,handler:function(e){var o=e.provisionerId;o||p.provisionerIdMissing();var i=t.provisionersList[o];if(i)return Q(i.getProvisioningRequest(e.provisioningRefKey));p.provisionerNotFound(o)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(e){e||p.refKeyMissing();var o=t.provisioningRequestsLookup[e];o||p.requestNotFound(e);var i=o.provisioningPromise;return i&&i.finally((function(){delete t.provisioningRequestsLookup[e]})),o},t.prototype._createEventBase=function(){var e=this._launchingContext,t={source:c,action:c,name:e&&e.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return e&&(t.data.launchingContext=e),t},t.prototype._traceProvisioningStarted=function(e){return this._validationEvents.length&&(e.data=MsPortalFx.extend2(e.data,{validationEvents:this._validationEvents}),this._validationEvents=[]),a.traceProvisioningStarted(e)},t.prototype._traceProvisioningEnded=function(e,t,o){var i=o||{};return i.actionModifier||(i.actionModifier=t===c||t?s.Succeeded:s.Failed),i.data||(i.data={}),i.data.provisioningStatus||(i.data.provisioningStatus=t===c?l.NoPromise:t?l.Resolved:l.UnknownFailure),a.traceProvisioningEnded(i)},t.rpcClient=n.client,t.provisioningRequestsLookup={},t.provisionersList={},t._rpcRegistered=!1,t}();t.Provisioner=b,t.isValid=function(e){var t=(e=e||{}).provisioningPart||{},o=e.startboardPart||{};return!!(t.name&&t.extension&&o.name&&o.extension&&e.startboardPartKeyId)}}(t.Provisioning||(t.Provisioning={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(e){!function(e){var t;e.StartboardInfo=((t=function(){}).isValid=FxImpl.ViewModels.Provisioning.isValid,t)}(e.ParameterCollectionV3||(e.ParameterCollectionV3={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),Object.defineProperty(MsPortalFx.ViewModels.ParameterCollectionV3,"Provisioner",{value:FxImpl.ViewModels.Provisioning.Provisioner}),function(e){!function(t){!function(o){!function(o){var i=e.Base,n=e.ViewModels,r=i.Diagnostics,a=n.Controls.Lists.Grid,s=r.Log.writeEntry;function l(e){return"function"==typeof e}var c=function(o){function r(e,t,i){var r=o.call(this,e)||this;if(r.showSelectButton=ko.observable(!1),r.triggerSelectAction=ko.observable(""),r.showInfoBox=ko.observable(!1),r._basicTemplate="<div style='height: 40px; margin-top: 10px'>\x3c!-- ko if: settings.item.icon --\x3e<div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'></div>\x3c!-- /ko --\x3e<div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'></div></div><div>\x3c!-- ko if: settings.item.subtitle --\x3e<div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'></div>\x3c!-- /ko --\x3e\x3c!-- ko if: settings.item.detail --\x3e<div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'></div>\x3c!-- /ko --\x3e</div></div></div>",!i.dataNavigator==!i.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");r.showSelectButton(i.allowMultiSelect||!1);var a=i.createNewOptions;r.showCreateAction=ko.observable(a&&!!a.title&&!!a.dynamicBladeSelection),r._buildAddNewGrid(e,a),r._buildPickerGrid(e,i),r.pickerGrid.selectableData.selectedItems.subscribe(e,(function(e){var t=r.showSelectButton();if(e&&e.length>0){r.addNewGrid&&r.addNewGrid.selectableData&&r.addNewGrid.selectableData.selectedItems&&r.addNewGrid.selectableData.selectedItems([]);var o=void 0;if(!t){var n=e[0];o=r.dataModel&&!i.isItemInDataModel(n,r.dataModel())}if(o||t){var a=i.mapItemsToDataModel(e);r._saveToEditScope(a)}}else t&&r._saveToEditScope(null)})),r.pickerGrid.items.subscribeArrayAdds(e,(function(e){e.disabled&&e.disabled()?r._disableGridItem(e):r.dataModel&&i.isItemInDataModel(e,r.dataModel())&&r._selectGridItem(e)})),r.parameterProvider=new n.ParameterProvider(e,{mapIncomingDataForEditScope:function(e){return{pickedItems:ko.observable(i.mapIncomingDataToDataModel(e))}},mapOutgoingDataForCollector:function(e){return e.pickedItems()}}),r.addNewItemCollector=new n.ParameterCollector(e,{supplyInitialData:function(){return l(a.supplyInitialData)?a.supplyInitialData():{}},receiveResult:function(e){l(a.receiveResults)&&a.receiveResults(e),r.addNewGrid.selectableData.selectedItems([]),r._saveToEditScope(e)},supplyProviderConfig:function(e){if(l(a.supplyProviderConfig))return a.supplyProviderConfig()},selectableSet:r.addNewGrid.selectableData}),r.addNewGrid.selectableData&&r.addNewGrid.selectableData.selectedItems&&r.addNewGrid.selectableData.selectedItems.subscribe(e,(function(e){e&&e.length>0&&r.pickerGrid.selectableData.selectedItems([])}));var s=e.createChildLifetime();return ko.computed(s,(function(){if(r.parameterProvider.editScope()){var e=r.parameterProvider.configFromCollector();i.loadPickerItems(e||{},r.dataModel()),s.dispose()}})).extend({throttle:50}),r}return __extends(r,o),r.prototype.openCreateNewBlade=function(){var e=this.addNewGrid.items,t=e&&e()||[];t.length&&this.addNewGrid.getRowMetadata(t[0]).selected(!0)},r.prototype.disableCreateNewOption=function(){var e=this.addNewGrid.items,t=e&&e()||[];t.length&&this.addNewGrid.getRowMetadata(t[0]).disabled(!0)},r.prototype._saveToEditScope=function(t){this.dataModel(t),this.showSelectButton()||this.triggerSelectAction(e.getUniqueId())},r.prototype._buildPickerGrid=function(t,o){var i,n=[{name:ko.observable(""),itemKey:"title",format:a.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:a.Format.HtmlBindings,width:ko.observable("35px"),formatOptions:{htmlBindingsTemplate:"\x3c!-- ko if: value --\x3e<div data-bind='pcDockedBalloon:value'></div>\x3c!-- /ko --\x3e"}}],r={selectionMode:o.allowMultiSelect?2:1};(i=o.dataNavigator?this.pickerGrid=new a.ViewModel(t,null,a.Extensions.SelectableRow|a.Extensions.Pageable,{selectableRow:r,pageable:{type:a.PageableType.Sequential,dataNavigator:o.dataNavigator}}):this.pickerGrid=new a.ViewModel(t,o.items,a.Extensions.SelectableRow,{selectableRow:r})).columns=ko.observableArray(n),i.showHeader=!1,i.noRowsMessage(e.Resources.Strings.ViewModels.Controls.noRowsMessage)},r.prototype._buildAddNewGrid=function(t,o){var n,r={activateOnSelected:ko.observable(!0),selectionMode:1},s=ko.observableArray();o&&o.title&&o.dynamicBladeSelection&&(n=[{name:ko.observable(""),itemKey:"title",format:a.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}}],s([{title:ko.observable(o.title),icon:ko.observable(i.Images.Add()),item:null}]),r=e.extend(r,{itemMatchesSelection:function(e,t){return!0},createSelection:function(e){return o.dynamicBladeSelection}}));var l=this.addNewGrid=new a.ViewModel(t,s,a.Extensions.SelectableRow,{selectableRow:r});n&&(l.columns=ko.observableArray(n)),l.showHeader=!1},Object.defineProperty(r.prototype,"dataModel",{get:function(){var e=this.parameterProvider.editScope();return e&&e.root&&e.root.pickedItems},enumerable:!1,configurable:!0}),r.prototype._selectGridItem=function(e){if(e){var t=this.pickerGrid.getRowMetadata(e);t?t.selected()||t.selected(!0):s(1,"Pickers","Metadata is null. Unable to set selected flag.")}},r.prototype._disableGridItem=function(e){if(e){var t=this.pickerGrid.getRowMetadata(e);t?(t.disabled(!0),t.selected()&&t.selected(!1)):s(1,"Pickers","Metadata is null. Unable to set disabled flag.")}},r=__decorate([__metadata("fx:diagnostics",[require,"PickerBase"]),e.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object,Object])],r)}(n.Controls.Loadable.ViewModel);o.PickerBase=c}(o.Pickers||(o.Pickers={}))}(t.ParameterCollectionV3||(t.ParameterCollectionV3={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=e.Base,i=FxImpl.Rpc,n=new o.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),r="Only one of asset/blade/uri can be specified",a=["status","title","notificationId","description","descriptionAsHtml","percentComplete","asset","uri","linkedBlade","additionalProperties"];!function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.InProgress=3]="InProgress",e[e.Success=4]="Success"}(t.NotificationStatus||(t.NotificationStatus={}));var s=function(){function t(e){var o=this;if(e.asset&&e.linkedBlade)throw new Error(r);a.forEach((function(t){o[t]=e[t]}));var i=t.generateClientNotificationId();this.notificationId||(this.notificationId=e.notificationId||i),this.correlationIds=[i];var n=e.correlationIds;n&&n.length&&Array.prototype.push.apply(this.correlationIds,n)}return t.prototype.validate=function(){if((this.title||"").trim()&&(this.description||"").trim())return!0;n.error("Missing title/description")},t.prototype.package=function(){return{timestamp:new Date,notificationId:this.notificationId,status:this.status,title:this.title,description:this.description,descriptionAsHtml:this.descriptionAsHtml,correlationIds:this.correlationIds,percentComplete:this.percentComplete,asset:this.asset,isRecommendation:!1,uri:this.uri,linkedBlade:this.linkedBlade,additionalProperties:this.additionalProperties}},t.generateClientNotificationId=function(){return"clientNotification-"+e.getUniqueId()},t.prototype.publish=function(){if(this.validate()){if(this.asset&&this.linkedBlade)throw new Error(r);FxImpl.Hubs.Notifications.addClientNotificationEndpoint.invoke(i.client,o.Constants.Shell,this.package())}},t.publish=function(e){var o=new t(e);return o.publish(),o},t}();t.ClientNotification=s}(t.Notifications||(t.Notifications={}))}(e.Hubs||(e.Hubs={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=MsPortalFx.Base,i=e.Rpc,n=MsPortalFx.Hubs.Notifications,r=e.Constants.RpcMethods,a=i.FuncEndPointDefinition;t.addClientNotificationEndpoint=new a(r.addClientNotification),t.addClientNotificationsEndpoint=new a(r.addClientNotifications),function(e){e[e.NavigatePortal=0]="NavigatePortal",e[e.OpenInNewTab=1]="OpenInNewTab",e[e.OpenInCurrentTab=2]="OpenInCurrentTab"}(t.ClientNotificationUriAction||(t.ClientNotificationUriAction={})),t.showModalNotificationEndpoint=new a("showModalNotification");var s=function(e){function n(t){var o=e.call(this,t)||this;return o.inlineForm=t.inlineForm,o.toastDuration=t.toastDuration,o.irisNotificationDetails=t.irisNotificationDetails,o.caller=t.caller,o.uriAction=t.uriAction,o.modalNotificationData=t.modalNotificationData,o}return __extends(n,e),n.prototype.publish=function(){if(this.validate()){var e=this.package();return e.isServerEvent=!1,e.inlineForm=this.inlineForm,e.toastDuration=this.toastDuration,e.irisNotificationDetails=this.irisNotificationDetails,e.caller=this.caller,e.modalNotificationData=this.modalNotificationData,t.addClientNotificationEndpoint.invoke(i.client,o.Constants.Shell,e),e.timestamp}},n.internalPublish=function(e){var t=new n(e);return t.publish(),t},n}(n.ClientNotification);t.InternalClientNotification=s}(t.Notifications||(t.Notifications={}))}(e.Hubs||(e.Hubs={}))}(FxImpl||(FxImpl={})),function(e){!function(e){var t=MsPortalFx.Resources.Strings.Azure,o=t.errorMessageWithCode;function i(e){return"string"==typeof e}function n(e){return"object"==typeof e}function r(e){if(e)return MsPortalFx.forEachKey(e,(function(e,t,o){var a=t;try{a=JSON.parse(a)}catch(e){}a&&(o[i(e)&&e.toLowerCase()||e]=n(a)&&r(a)||a)}),{})}function a(e,r,s){n(e.message)&&!e.details&&(e.message.error&&(e.message.error.target||MsPortalFx.extend(e.message.error,{target:e.target})),e=e.message.error||e);var l,c,u=e.message,d=MsPortalFx.map(e.details||[],(function(e){return[e]})),p=[];if(u){var f=u.error||{};l=f.message||u.message,c=f.code||u.code,l||i(u)?l&&!i(l)&&(l=JSON.stringify(l)):l=JSON.stringify(u)}d.length&&(p=d.map((function(e){return a(e,r,s-1)}))),l=l||u,c=c||e.code;var b=e.target,v=r?c||"NoCode":c&&(b?t.errorMessageWithTarget:o).format(l,c,b)||l;if(p.length){if(s>1)return{error:v,details:p};v=v.concat(" "+p.join(", "))}return v}function s(e,t,i){var n;if(e){(i<=0||!i)&&(i=1);var s=r(e);n={error:t?s.code:s.code&&o.format(s.message,s.code)||s.message,details:($.map(s.details,(function(e){return[e]}))||[]).map((function(e){return a(e,t,i)}))}}return n}function l(e,t){var o=s(e),i=o.error||t||"";return MsPortalFx.forEachKey(o.details,(function(e,t){i+=" ".concat(t)})),i}function c(e){return e&&n(e)&&(delete(e=Object.getOwnPropertyNames(e).reduce((function(t,o){return void 0!==e[o]&&(t[o]=e[o]),t}),Array.isArray(e)?[]:{})).message,e.error?e.error=c(e.error):e.details||e.code||(e.code="NoCode"),Array.isArray(e.details)?e.details=e.details.map(c):e.details&&(e.details=c(e.details))),e}e.parseArmError=s,e.parseArmErrorToMessage=l,e.buildSimplifiedError=function(e){var o,n,r="content"in e?e.content:e.responseJSON,a=r&&(r.error||r.Error||r);if(a&&(a.message||a.Message))o=l(a),n=a.code;else if(e.message)o=e.message;else{if(e instanceof Error)return e;if(i(e))try{var s=JSON.parse(e);o=JSON.parse(s.jqXHR.responseText).message}catch(t){o=e}else o=t.unknownErrorOccured}return function(e,t,o){var i,n,r;void 0===o&&(o="unknown");var a=__assign(__assign(__assign(__assign(__assign(__assign(__assign({message:t,code:o},"name"in e&&{name:e.name}),"stack"in e&&{stack:null===(n=null===(i=e.stack)||void 0===i?void 0:i.slice)||void 0===n?void 0:n.call(i,0,6e3)}),"code"in e&&{code:null!==(r=e.code)&&void 0!==r?r:o}),"readyState"in e&&{readyState:e.readyState}),"status"in e&&MsPortalFx.isNumeric(e.status)&&{status:e.status}),"httpStatusCode"in e&&{status:e.httpStatusCode}),"statusText"in e&&{statusText:e.statusText});return 0!==a.readyState||a.status||("status"in a&&(a.status=0),a.statusText="ajax readyState was zero"),a}(e,o,n)},e.scrubError=function(e){return c(e)}}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){e.Azure||(e.Azure={})}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=MsPortalFx.Base,i=MsPortalFx.ViewModels,n=i.Obsolete.Forms.FilterComboBox,r=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,a=new o.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),s=i.getValidationResultPromise,l=MsPortalFx.localeCompareIgnoreCase,c="",u={optionsUndefined:c,formUndefined:c,accessorUndefined:c,configUndefined:c,fetchItemsUndefined:c,filterObjUndefined:c,mapItemUndefined:c,cannotWriteValidate:c},d=e.getErrorMap(u);function p(e){return"function"==typeof e}var f=function(){function t(t,o,a){var l=this;this._itemsObs=ko.observableArray(),this._firstLoad=!0,o||d.optionsUndefined(),o.form||d.formUndefined(),o.accessor||d.accessorUndefined(),a||d.configUndefined(),p(a.fetchItems)||d.fetchItemsUndefined(),p(a.filterObjectByName)||d.filterObjUndefined(),p(a.itemToHierarchicalFormOption)||d.mapItemUndefined(),this._bContainer=t,this._loadingDeferred=Q.defer(),this._loading=ko.observable(!0);var c={options:ko.observableArray(),filterOptions:{datasetType:0},validations:ko.observableArray()};MsPortalFx.extend(c,o),this._bOptions=c,this._setOptions=c.options;var u,f={allowCreateNew:!1,blockLoadingItems:ko.observable(!1),nameForInitialValue:ko.observable(),getSortedListForInitialSelection:function(){return l._items},fetchItems:void 0,filterObjectByName:void 0,itemToHierarchicalFormOption:void 0};MsPortalFx.extend(f,a),this._bConfig=f,this._bConfig.allowCreateNew||this._bOptions.validations.push(new i.CustomValidation(r.creatingResourcedDisabledValidationMessage,(function(e){var t=!l.getObjectByName(e);return Q(s(t&&r.creatingResourcedDisabledValidationMessage))}))),u=p(a.filterComboBoxCreateCallback)?a.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new n.ViewModel(t,this._bOptions),control:null};var b,v=this._filterCombo=u.filterComboBox;this.control=a.control||u.control||u.filterComboBox;var m=a.optionsFilter;ko.reactor(t,(function(){var e=l._itemsObs();l._setOptions((m?m(e):e).map(a.itemToHierarchicalFormOption)),v.value.peek()&&l.triggerValidation()}));var h=!1;if(ko.reactor(t,(function(){var e=a.createNewOption&&a.createNewOption(),t=e?null:v.value();e=e||l.getObjectByName(t)||f.nullValue,t&&!~v.items.peek().map((function(e){return e.text.peek()})).indexOf(t)||!h&&b&&b(e)})),this.value=ko.observable(),this.value.subscribe(t,(function(e){if(h||e!==b()){var t=e&&l._bConfig.itemToHierarchicalFormOption(e),o=t&&t.text(),i=l.getObjectByName(o)||l.getObjectByName(t&&t.value);o=i&&l._bConfig.itemToHierarchicalFormOption(i).text()||o,v.value()!==o&&v.value(o)}})),ko.pureComputed((function(){return!!o.form.editScope()&&!l._bConfig.blockLoadingItems()})).fxOnceAndRun(t,(function(){(b=o.accessor.getEditableObservable(t)).subscribe(t,(function(e){try{h=!0,l.value(e)}finally{h=!1}})),l._loadItems()}),(function(e){return e})),p(v.valid)&&(this.valid=ko.computed(t,{read:function(){return u.valid?u.valid():v.valid()},write:function(e){d.cannotWriteValidate()}})),p(v.enabled)){var g=ko.observable(!0);this.enabled=ko.computed(t,{read:function(){return v.enabled()},write:function(e){g(e),g.valueHasMutated()}}),ko.computed(t,(function(){v.enabled(g())})),ko.computed(t,(function(){v.loading(l._loading())}))}p(v.infoBalloonContent)&&(this.infoBalloonContent=ko.computed(t,{read:function(){return v.infoBalloonContent()},write:function(e){v.infoBalloonContent(e)}}));var y=function(e){return l._loadingDeferred.promise.then((function(){t.onInputsSetCallbacks.remove(y)}))};t.onInputsSetCallbacks.add(y),e.logObsoleteAPI("FxImpl.Azure.BaseResourceDropDown","Fx/Controls/BaseResourceDropDown")}return Object.defineProperty(t.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(e){this._itemsObs(e)},enumerable:!1,configurable:!0}),t.prototype.clearValidation=function(){var e=this._filterCombo;return e&&p(e.clearValidation)?Q(e.clearValidation()):Q()},t.prototype.triggerValidation=function(){var e=this._filterCombo;return!this._firstLoad&&e&&p(e.triggerValidation)?Q(e.triggerValidation()):Q(!0)},t.prototype.getObjectByName=function(e){var t=this;return MsPortalFx.find(this._items,(function(o){return t._bConfig.filterObjectByName(o,e)}))},t.prototype._loadItems=function(){var e=this,t=function(t){var o=e._bOptions.validations,i=(p(o)&&o()||[]).map((function(e){var o=e.validate;return p(o)&&o(t)||void 0}));return Promise.all(i).then((function(e){return e.every((function(e){return!e||e.valid}))}),(function(e){return a.warning("Failed to validate '".concat(t,"'. Assuming valid.")),!0}))},o=function(i,n){if((n=n||0)<i.length){var r=i[n],a=e._bConfig.itemToHierarchicalFormOption(r).text();return e._filterCombo.items().some((function(e){return e.text()===a}))?t(a).then((function(e){return e?r:o(i,n+1)}),(function(){})):o(i,n+1)}return Q(void 0)},i=function(t){if(t){var o=e._bOptions.form.editScope();o.isDisposed||o.resetValue(e._bOptions.accessor,{newInputValue:t})}};this._loading(!0),this._bConfig.fetchItems().catch((function(e){return a.warning("Failed to fetch items: ".concat(e.message)),[]})).then((function(n){void 0===n&&(n=[]),e._items=n,e._bOptions.form.editScope().isDisposed||function(){var n,r=e._bConfig,a=r.itemToHierarchicalFormOption,s=e._filterCombo,c=r.createNewOption,u=c&&c(),d=!1;if(e._firstLoad){if(!e._bOptions.form.editScope().isDisposed){var f=e._bOptions.accessor.getEditableObservable(e._bContainer);n=f&&f()}MsPortalFx.keysLength(n)||(n=void 0)}else n=e.value();if(n){var b=a(n),v=b&&b.text(),m=b&&b.value;n=(v||m)&&MsPortalFx.find(s.items(),(function(e){return!l(e.value,m)||!l(e.text(),v)}))&&e.getObjectByName(v)||u?(d=!0)&&n:void 0}if(!e._firstLoad&&n)return Q();if(e._firstLoad&&!n){var h=p(r.nameForInitialValue)?r.nameForInitialValue():void 0;n=!!h&&e.getObjectByName(h)||void 0}if(!n&&!n&&r.allowCreateNew&&p(c))return s.value(""),e._firstLoad&&MsPortalFx.nextTick((function(){i(n=u)})),Q();var g,y=n,x=e._items;return Q().then((function(){if(!d)return n?(g=a(n),t(g.text()).then((function(e){e||(n=void 0)}))):void 0})).then((function(){if(!n&&x.length)return o(r.getSortedListForInitialSelection()).then((function(e){n=e}))})).finally((function(){n||(n=y||x[0]),i(n),n&&(d?c&&c(n):(g=a(n),s.value(g.text())))}))}().finally((function(){e._firstLoad=!1,e._loading(!1),e._loadingDeferred.resolve(),e.triggerValidation()}))}))},t.prototype._hasPermission=function(e,t,i){var n=p(t)&&t(),r=n&&n.actions||[];return r.length<1?s():o.Security.hasPermission(e,r).then((function(e){return s(!e&&(n.message||i||"{0}").format(r.toString()))}),(function(t){return a.warning("Failed to get permissions on [".concat(r.toString(),"] over scope '").concat(e,"'.")),s()}))},t}();t.BaseResourceDropDown=f}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=MsPortalFx.Base,i=e.Rpc,n=e.Constants.RpcMethods,r=i.FuncEndPointDefinition;t.getLocationsAndResourceTypesForCreate=new r(n.getLocationsForCreate),t.getLocationsEndPoint=new r(n.getLocations),t.lastUsedLocationsKey="deployments_lastUsed_locations",t.getLocationsForCreate=function(e,i){return t.getLocationsAndResourceTypesForCreate.invoke(e,o.Constants.Shell,i)},t.getLocationDisplayNames=function(e){return Q(t.getLocationDisplayNamesEndPoint.invoke(e,"fxw",void 0))},t.getLastUsedLocations=function(e){return t.ResourceManager.readUserSettingsEndPoint.invoke(e,o.Constants.Shell,[t.lastUsedLocationsKey]).then((function(e){var o=e[t.lastUsedLocationsKey]||{};return Object.keys(o).sort((function(e,t){var i=o[e],n=o[t];return i<n?1:i>n?-1:0}))}))},t.locationsComparer=function(e,t){return e.displayName.toLowerCase().localeCompare(t.displayName.toLowerCase())}}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(e){var t=FxImpl.Rpc,o=FxImpl.Azure;e.getLocations=function(){return Q(o.getLocationDisplayNames(t.client))}}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Rpc,i=e.Constants.RpcMethods,n=o.FuncEndPointDefinition;t.getResourceGroupsFromSubscriptionEndPoint=new n(i.hubsGetResourceGroupsFromSubscription),t.getResourceGroupsFromSubscription=function(e,o,i){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(e,"HubsExtension",{subscriptionIds:o,uniqueResourceGroups:i})}}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=e.ViewModels.getValidationResult;!function(t){var i=e.Azure,n=e.Base.Diagnostics,r=e.ViewModels;!function(e){e[e.UseExisting=0]="UseExisting",e[e.CreateNew=1]="CreateNew"}(t.Mode||(t.Mode={})),function(e){e[e.UseExisting=0]="UseExisting",e[e.CreateNew=1]="CreateNew",e[e.Both=2]="Both"}(t.AllowedMode||(t.AllowedMode={}));var a=e.Resources.Strings.ResourceGroup.Validation;t.NameMaxLength=90;var s,l=["\\s","~","!","@","#","$","%","^","&","*","+","=","<",">",",","`","\\?","/","\\\\","\\:",";","'",'"',"\\[","\\]","\\{","\\}","\\|"].join(""),c=new RegExp("^[^".concat(l,"]*[^.").concat(l,"]$"),"i"),u="subscriptions";!function(s){s.validateResourceGroupName=function(s,l,d,p,f){if(!s)return Q(o());var b=function(e){if(e=e||"",e.length>t.NameMaxLength)return o(a.lengthValidationMessage);if(e&&!c.test(e))return o(a.invalidMessage);return o()}(s);return b.valid?l?Q(i.getSubscriptionInfo(l)).then((function(e){return e&&e.uniqueDisplayName||l})).then((function(t){var i,r=f||e.Base.Security.hasPermission("/".concat(u,"/").concat(l),["Microsoft.Resources/".concat(u,"/resourcegroups/write")]).then((function(e){return e?o():o(a.subscriptionHasNoPermissionsMessage.format(t))}),(function(){return n.Log.writeEntry(1,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),o()}));return i=d?~d.map((function(e){return e.toLocaleLowerCase()})).indexOf((s||"").toLocaleLowerCase())?o(a.alreadyExistsMessage.format(t)):o():p?p():o(),Q.all([r,i]).spread((function(e,t){return e.valid?t:e}))})):Q(r.getValidationResultPromise()):Q(b)}}(s=t.Internal||(t.Internal={})),t.validateResourceGroupName=function(e,t,o,i,n){return Q(s.validateResourceGroupName(e,t,o,i,n))}}(t.ResourceGroups||(t.ResourceGroups={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){var t,o=MsPortalFx.Base,i=e.Rpc;!function(t){t.getSasUriForQueueEndPoint=new i.FuncEndPointDefinition(e.Constants.RpcMethods.getSasUriForQueue)}(t=e.InternalAzure||(e.InternalAzure={})),function(e){!function(e){e.getSasUriForQueue=function(e){return t.getSasUriForQueueEndPoint.invoke(i.client,o.Constants.Shell,e)}}(e.Storage||(e.Storage={}))}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=e.Rpc,i=o.FuncEndPointDefinition;function n(e,t,o){var i=(e&&e.subscriptionPolicies&&e.subscriptionPolicies.quotaId||"").toLowerCase();return o?i.startsWith(t):t===i}t.setInSessionSelectedSubscriptionsEndPoint=new o.ActionEndPointDefinition("setInSessionSelectedSubscriptions"),t.searchForSubscriptionsEndPoint=new i("searchForSubscriptions"),t.canRegisterSubscriptionWithRPs=function(e,t){return void 0===t&&(t=[]),Promise.all([MsPortalFx.require("Fx/DependencyInjection"),MsPortalFx.require("FxInternal/ResourceManagement/ArmTemplate")]).then((function(o){var i=o[0];return o[1].canRegisterSubscriptionWithRPs(i.container,e,t)}))},t.isFreeTrialSubscription=function(e){return n(e,"freetrial_",!0)},t.isDreamSparkSubscription=function(e){return n(e,"dreamspark_",!0)},t.isBizSparkSubscription=function(e){return n(e,"bizspark_",!0)},t.isZeroCapSubscription=function(e){return n(e,"aad_2015-09-01",!1)}}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){var o=e.Base,i=o.Constants,n=FxImpl.Rpc,r=o.Diagnostics.Telemetry,a=FxImpl.Azure,s=e.localeCompareIgnoreCase,l=e.isFeatureEnabled("getselectedsubstelemetry");!function(e){e.filterObjectByName=function(e,t){return!s(e.subscriptionId,t)||!s(e.uniqueDisplayName,t)},e.itemToHierarchicalFormOption=function(e){return{text:ko.observable(e.uniqueDisplayName),value:e.subscriptionId}}}(t.Subscriptions||(t.Subscriptions={})),t.getSubscriptionInfo=function(t){return t?Q(a.getSubscriptionInfoEndPoint.invoke(n.client,e.getEnvironmentValue("extensionName")===i.Shell?i.Shell:"fxw",t)):Q(Q.reject("Invalid subscription ID."))},t.getSelectedSubscriptions=function(){var e=l?r.start({source:"MsPortalFx.Azure.Subscriptions.GetSelectedSubscriptions",action:"InvokeRpc"}):"",t=a.getInSessionSelectedSubscriptionsEndPoint.invoke(n.client,"fxw",null);return t.then((function(t){l&&r.completeTrace(e,{selectedSubscriptionsCount:t.length})})),Q(t)}}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.ViewModels;!function(e){var t=function(e){function t(t,o){var i=e.call(this,t)||this;return i.noFilterVisible=ko.observable(!1),i.subscriptionsFiltered=ko.observable(!1),i.selectedTypes=ko.observable([]),i.selectedSubscriptions=ko.observable([]),i.selectedResourceGroups=ko.observable([]),i.invertResourceGroupFilter=ko.observable(),i.selectedLocations=ko.observable([]),i.filterText=ko.observable(""),o=o||{},i.controlType=114,i.showTextFilter=o.showTextFilter||ko.observable(!1),i.showTypeFilter=o.showTypeFilter||ko.observable(!1),i.showSubscriptionFilter=o.showSubscriptionFilter||ko.observable(!1),i.showResourceGroupFilter=o.showResourceGroupFilter||ko.observable(!1),i.showLocationFilter=o.showLocationFilter||ko.observable(!1),i.showSubscriptionSummary=o.showSubscriptionSummary||ko.observable(!0),i.showTenantLevelSubscriptionSummary=o.showTenantLevelSubscriptionSummary||ko.observable(!1),i.selectedSubscriptionId=o.selectedSubscriptionId||ko.observable(),i.textFilterPlaceholder=o.textFilterPlaceholder||ko.observable(),i.assetTypes=o.assetTypes||ko.observableArray([]),i.context=o.context||ko.observable(),i._msPortalFxSectionOptions=o.sectionOptions,i.autoSelectAllResourceGroups=o.autoSelectAllResourceGroups||ko.observable(!0),i.isPersistentSubscriptionFilter=!!ko.unwrap(o.isPersistentSubscriptionFilter),i.showAllSubscriptions=!!o.showAllSubscriptions,i.showDirectoryFilter=!!o.showDirectoryFilter,i.deferSelectedSubscriptionsUpdate=o.deferSelectedSubscriptionsUpdate,i.isSubscriptionPopupOpen=ko.observable(!1),i.subscriptionsLoaded=ko.observable(!1),i}return __extends(t,e),t}(o.Controls.Base.ViewModel);e.ViewModel=t}(t.ResourceFilter||(t.ResourceFilter={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Base,i=o.Net2,n=e.ViewModels,r=n.CustomValidation,a=e.Resources.Strings.Azure.Validators,s=n.getValidationResult,l=function(e){function t(t){return e.call(this,{validate:function(e){return Q(t(e)).then((function(e){if(!e)return s();var t,i=Q.defer();return o.Security.hasPermission(e.entityId,e.actions).then((function(o){o||(t=s((e.message||a.RequiredPermission.message).format(e.actions.join(", "))))})).finally((function(){i.resolve(t||s())})),i.promise}))}})||this}return __extends(t,e),t}(r);t.RequiredPermissionsValidator=l;var c=function(e){function t(t,o,n){return e.call(this,{validate:function(e){if(!e)return Q(s());var r,l=Q.defer(),c=n||i.Internal.getArmEndpoint();return i.postJSON({uri:c+"providers/microsoft.resources/checkresourcename?api-version=2015-01-01",setAuthorizationHeader:!0},{name:e,type:t}).then((function(t){t&&"reserved"===(t.status||"").toLowerCase()&&(r=s((o||t.error&&t.error.message||a.ReservedResourceName.message).format(e)))})).finally((function(){l.resolve(r||s())})),l.promise}})||this}return __extends(t,e),t}(r);t.ReservedResourceNameValidator=c}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){e[e.Windows=0]="Windows",e[e.Linux=1]="Linux"}(e.FirstPartyOperatingSystem||(e.FirstPartyOperatingSystem={})),function(e){e[e.Default=0]="Default",e[e.TemplateDeployment=1]="TemplateDeployment",e[e.ProgrammaticAccess=3]="ProgrammaticAccess"}(e.LegalTermsLanguageEnum||(e.LegalTermsLanguageEnum={}))}(e.Legal||(e.Legal={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=e.ViewModels,i=e.Resources.Strings.Part.PropertiesPart;function n(t,i){var n=e.isFeatureEnabled("resourcesextmoveresources"),r=e.isFeatureEnabled("moveresourcesreact"),a=r?"MoveResources.ReactView":"MoveResourceBlade",s=r&&n?"Microsoft_Azure_Resources":"HubsExtension";return o.getBladeSelection(s,a,{resourceId:t,moveType:i})}t.getMoveResourceBlade=function(e,t){if(!e)throw new Error("Can't move resource without resource id.");return{bladeSelection:n(e,t),displayValue:1===t?i.changeResourceGroupLabel:i.changeSubscriptionLabel,editType:1}},function(e){!function(e){e[e.NotSet=0]="NotSet",e[e.Allowed=1]="Allowed",e[e.NotAllowed=2]="NotAllowed"}(e.GalleryItemAccess||(e.GalleryItemAccess={}))}(t.Internal||(t.Internal={}))}(t.ResourceManager||(t.ResourceManager={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=e.Rpc;t.lastDeployedGalleryItemsMaxCount=10,t.lastUsedLocationsMaxCount=5,t.readUserSettingsEndPoint=new o.FuncEndPointDefinition("HubsExtension.readUserSettings")}(t.ResourceManager||(t.ResourceManager={}))}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o;function i(e){return 0===e.deploymentStatusCode?Q(e):Q.reject(FxImpl.createError("Deploy failed with deploymentStatusCode (".concat(o[e.deploymentStatusCode],")"),{data:e}))}!function(e){e[e.InitialSetup=0]="InitialSetup",e[e.SanityCheck=1]="SanityCheck",e[e.FulfillPrerequisites=2]="FulfillPrerequisites",e[e.ProvisionResourceGroup=3]="ProvisionResourceGroup",e[e.RegisterResourceProviders=4]="RegisterResourceProviders",e[e.GetDeploymentName=5]="GetDeploymentName",e[e.ValidateTemplate=6]="ValidateTemplate",e[e.SubmitDeploymentRequest=7]="SubmitDeploymentRequest",e[e.GetDeploymentStatus=8]="GetDeploymentStatus"}(t.DeploymentStages||(t.DeploymentStages={})),function(e){e.Accepted="accepted",e.Initializing="initializing",e.Succeeded="succeeded",e.Failed="failed",e.Canceled="canceled",e.Running="running",e.Deploying="deploying",e.Waiting="waiting",e.Deleting="deleting",e.Deleted="deleted"}(t.DeploymentStates||(t.DeploymentStates={})),function(e){e[e.Failure=-1]="Failure",e[e.Success=0]="Success",e[e.DeploymentRequestFailed=1]="DeploymentRequestFailed",e[e.DeploymentFailed=2]="DeploymentFailed",e[e.DeploymentStatusUnknown=3]="DeploymentStatusUnknown",e[e.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup",e[e.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest",e[e.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus",e[e.InvalidArgs=7]="InvalidArgs",e[e.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders",e[e.DeploymentCanceled=9]="DeploymentCanceled",e[e.UnknownError=10]="UnknownError"}(o=t.DeploymentStatusCode||(t.DeploymentStatusCode={}));var n=function(){return Promise.all([e.require("FxInternal/ResourceManagement/ArmTemplate"),e.require("Fx/DependencyInjection")])};t.deployTemplate=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.deployTemplate(i.container,e)})).then(i)},t.pollForDeployment=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.pollForDeployment(i.container,e)})).then(i)},t.validateTemplate=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.validateTemplate(i.container,e)}))},function(e){e.deployTemplate=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.deployTemplate(i.container,e)}))},e.pollForDeployment=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.pollForDeployment(i.container,e)}))},e.validateTemplate=function(e){return Q(n()).then((function(t){var o=t[0],i=t[1];return o.validateTemplate(i.container,e)}))}}(t.Deployments||(t.Deployments={}))}(t.ResourceManager||(t.ResourceManager={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){!function(e){var t=MsPortalFx.ViewModels,o=function(e,o,i,n){var r=this;this.collector=new t.ParameterCollector(e,{supplyInitialData:function(e){var t=n.supplyInitialData(),o=i();if(o){var a=o.selectedSpecId;t.selectedSpecId=a,t.selectedSpecIds=[a]}return t.originControl=r.controlType,{fromCollectorToProvider:t,fromProviderToCollector:null}},receiveResult:function(e){var t=e.fromProviderToCollector;i(t),"function"==typeof n.receiveResult&&n.receiveResult(t)},selectable:o})};e.CollectorControl=o}(e.Specs||(e.Specs={}))}(e.Pickers||(e.Pickers={}))}(e.ResourceManager||(e.ResourceManager={}))}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){!function(t){!function(t){var o=FxImpl.Azure.ResourceManager.Pickers.Specs,i=e.ViewModels.Forms.Selector;t.Selector=function(t){function o(o,n){var r=this,a=n;a=e.extend({label:ko.observable(e.Resources.Strings.Pickers.Specs.pricingTier),validations:ko.observableArray(),displayText:ko.pureComputed((function(){var e=s.value();return e?e.selectedSpecIds&&e.selectedSpecIds.join(", ")||e.selectedSpecId:""}))},a);var s=new i.ViewModel(o,a.form,a.pathOrAccessor,a);return(r=t.call(this,o,s.selectable,s.value,a)||this).controlType=2,r.control=s,r}return __extends(o,t),o}(o.CollectorControl)}(t.Specs||(t.Specs={}))}(t.Pickers||(t.Pickers={}))}(t.ResourceManager||(t.ResourceManager={}))}(e.Azure||(e.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=MsPortalFx.Base,i=MsPortalFx.ViewModels,n=HubsExtension.Azure.Pricing,r=e.ProvisioningTelemetry,a=o.Diagnostics.Telemetry,s=r.ProvisioningStatus,l=r.ActionModifier,c=MsPortalFx.Azure.ResourceManager.DeploymentStatusCode,u=i.ActionBars.Base,d=MsPortalFx.Resources.Strings.Azure.ResourceManager.Provisioner,p=d.ArmValidation,f=i.getValidationResult,b=function(){return Promise.all([MsPortalFx.require("FxInternal/ResourceManagement/ArmTemplate"),MsPortalFx.require("FxInternal/Composition/ExtensionTelemetry")])};t.armValidateFeatureForced=!1;var v=["microsoft_azure_datacatalog","microsoft_azure_mobileengagement"],m=l.Succeeded,h=l.Failed,g=n.Constants,y=g.PricingSummaryBlade,x=g.LegalTermsBlade,M="",P={canNotProvision:M,invalidGalleryOptions:M,launchPricingBladeFailure:M,legalTermsUnsupported:M,optionsUndefined:M,secondaryLinksUnsupported:M,supplyPricingUndefined:M,supplyTemplateUndefined:M},_=e.getErrorMap(P);function w(e){return"function"==typeof e}function k(t,o){void 0===o&&(o={});var i=new e.ViewModels.ObsoleteSelectable({allowUnselect:!1,selectedValue:o.selectedValue,isSelected:o.isSelected,isActivated:o.isActivated});return t.registerForDispose(i),i}var S=function(o){function n(e,t,i,n){var r=this;!function(e){e||_.optionsUndefined(),w(e.supplyTemplateDeploymentOptions)||_.supplyTemplateUndefined(),e.createFeatures&&(1&e.createFeatures||2&e.createFeatures)&&!w(e.supplyPricingConfig)&&_.supplyPricingUndefined()}(n);var a=n.actionBar;(r=o.call(this,t,{supplyProvisioningPromise:function(e){return r._supplyProvisioningPromise(e,t)},supplyStartboardInfo:function(e){return r._supplyStartboardInfo(e)},actionBar:a,parameterProvider:n.parameterProvider})||this)._diContainer=e,r.deploymentStartedPromise=ko.observable(),r._armOptions=n,r._showPricingSummary=ko.observable(!1),r._showAutomationOptions=ko.observable(!1),r._legalTermsBladeShown=r._purchaseInProgress=r._isCustomProvisioning=!1;var s=i&&i.content||{};r.pricingSelectable=k(t,s.pricingSelectable),r.errorsSelectable=k(t,s.errorsSelectable),r.pricingSelectable.isSelected.subscribe(t,(function(e){e||r._purchaseInProgress||r._setActionBarProgress(!1)})),a&&(r._setUpActionBarWatcher(t),r._setUpActionBarValidation(t,n));var l=function(){var e=n.createFeatures,t=!!(1&e),o=!!(2&e),i=!!(4&e)||!(8&e);a&&(r._actionBarSupportsSecondaryLinkDisplayText?(r._showPricingSummary(t),r._showAutomationOptions(i)):t&&_.secondaryLinksUnsupported(),r._actionBarSupportsForceInProgressStatus?a.forceInProgressStatus(o):o&&_.legalTermsUnsupported())};return r._parameterProvider=n.parameterProvider,n.parameterProvider&&n.parameterProvider.configFromCollector.subscribe(t,l),l(),w(t.registerSelectable)&&(t.registerSelectable(t.createChildLifetime(),MsPortalFx.newGuid(),r.pricingSelectable),t.registerSelectable(t.createChildLifetime(),MsPortalFx.newGuid(),r.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0})),r}var r;return __extends(n,o),r=n,Object.defineProperty(n.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!1,configurable:!0}),n.prototype.startProvisioning=function(e){w(this._armOptions.supplyGalleryCreateOptions)||_.canNotProvision();var t=this._armOptions.supplyGalleryCreateOptions(),i=MsPortalFx.clone(this.provisioningConfig())||{},n=t&&t.galleryItem;return n&&n.itemDisplayName?(MsPortalFx.extend(i,{galleryCreateOptions:t}),this.provisioningConfig(i)):_.invalidGalleryOptions(),o.prototype.startProvisioning.call(this,e)},n.prototype.validateTemplate=function(e){return this._validateTemplate(e)},n.prototype._deployTemplate=function(e,t){return __awaiter(this,void 0,void 0,(function(){var t,o,i,n,r,a,s=this;return __generator(this,(function(l){switch(l.label){case 0:return[4,b()];case 1:return t=l.sent(),o=t[0],i=t[1],this._diContainer?[3,3]:(n=this,[4,MsPortalFx.require("Fx/DependencyInjection")]);case 2:n._diContainer=l.sent().container.createChildContainer("viewModel"),l.label=3;case 3:return[4,this._diContainer.get(i.ExtensionTelemetry).extensionName];case 4:return r=l.sent(),(a=o.deployTemplate(this._diContainer,e)).progress((function(t){if(s._postProvisioningInputsDeferred&&t){var o=s.armProvisioningConfig.galleryCreateOptions.galleryItem,i=t.deployment&&t.deployment.id||"/subscriptions/".concat(e.subscriptionId)+"/resourceGroups/".concat(e.resourceGroupName)+"/providers/Microsoft.Resources/deployments/".concat(e.deploymentName),n=e.resourceId;t=t||{},s.deploymentStartedPromise(Q({correlationId:t.correlationId,resourceId:t.resourceId,deploymentId:t.deployment&&t.deployment.id,provisioningState:t.provisioningState})),e.deploymentName?s._postProvisioningInputsDeferred.resolve({deploymentId:i,primaryResourceId:n,assetTypeId:e.assetType?r+">"+e.assetType:void 0,galleryItemId:s._launchingContext.galleryItemId,galleryItemIconUri:o&&o.mediumIconUri,provisioningHash:e.provisioningHash,createBlade:{bladeInstanceId:s._launchingContext.bladeInstanceId,bladeName:s._launchingContext.createBlade,extension:r,telemetryId:s._launchingContext.telemetryId}}):s._postProvisioningInputsDeferred.reject("deploymentName not supplied")}return t})),[2,a]}}))}))},n.prototype._validateTemplate=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,b()];case 1:return[2,t.sent()[0].validateTemplate(this._diContainer,e)]}}))}))},n.prototype._supplyProvisioningPromise=function(e,t){var o=this,i=this._deploymentOptions?Promise.resolve(this._deploymentOptions):this._armOptions.supplyTemplateDeploymentOptions(e,0);return new Promise((function(n,a){requirejs(["FxInternal/ResourceManagement/ArmProvisioner"],(function(s){return r.prototype._supplyProvisioningPromise=s.supplyProvisioning,s.supplyProvisioning.call(o,e,t,i).then(n).catch(a)}))}))},n.prototype._supplyStartboardInfo=function(e){var t=this._armOptions.supplyStartboardInfo;if(w(t))return t(e)},n.prototype._setUpActionBarValidation=function(o,i){var n=this,s=i.actionBar,l=!!(16&i.createFeatures),c=!!(32&i.createFeatures),u=ko.isObservable(s.showActionBar),d=v.some((function(e){return MsPortalFx.getEnvironmentValue("extensionName")===e})),b={delayExecution:!0,validate:function(t){if(!(n.armProvisioningConfig||{}).provisioningEnabled||u&&!s.showActionBar())return Q(f());var i,l,c,d=n._launchingContext,b={telemetryId:d.telemetryId,bladeInstanceId:d.bladeInstanceId,galleryItemId:d.galleryItemId,createBlade:d.createBlade},v=a.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:b}),g=function(t){return a.endTrace(v,h,MsPortalFx.extend2(b,{error:e.Azure.scrubError(t)})),0===(t.error||t).status||0===t.status?f(p.networkFailure):{valid:!1,message:p.validationFailed,blade:{extension:"HubsExtension",detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:MsPortalFx.extend2(b,t.details||t)}}}},y=Q().then((function(){return s.infoBoxSelectable.isSelected(!1),n._armOptions.supplyTemplateDeploymentOptions(c=n._parameterProvider.getResults(),2)})).then((function(e){l=e.suppressDefaultNotifications,e.suppressDefaultNotifications=!0,e.launchingContext=d;var t=Q(n._validateTemplate(e)).then((function(e){return Q(w(n._armOptions.postValidationCallback)?n._armOptions.postValidationCallback(e.validationResult||e):f()).then((function(t){return i=MsPortalFx.clone(e),a.endTrace(v,m,b),t}))})).catch(g);return Q.timeout(t,r.armValidationTimeout).catch((function(e){return MsPortalFx.extend(b,{error:{message:e.message,code:e.code}}),a.endTrace(v,h,b),f()}))})).then((function(e){if(!i||0!==t)return e;var r=n._getPinToDashboardArgs(c,i);return MsPortalFx.extend(i,{suppressDefaultNotifications:!0,skipPreflight:!0,submitDeployment:!0,validateTemplate:!1,pollForUpdates:!1,notifications:{pinToDashboard:r}}),n._skipDeploy||!e.valid?Q(e):n._deployTemplate(i,o).then((function(t){return n._deploymentOptions=MsPortalFx.clone(t),n._deploymentOptions.suppressDefaultNotifications=l,e})).catch(g)})).catch((function(e){return a.cancelTrace(v,MsPortalFx.extend2(b,{error:e.message})),f()}));return o.operations&&o.operations.add(y,{blockUi:!0,shieldType:1}),y}};!l&&(c||t.armValidateFeatureForced||!d)&&(s.infoBoxSelectable=this.errorsSelectable,s.asyncValidations.push(b))},n.prototype._setActionBarProgress=function(e){ko.isObservable(this._actionBar.actionInProgress)&&this._actionBar.actionInProgress(e)},n.prototype._getPinToDashboardArgs=function(e,t){var o,i,n=this._supplyStartboardInfo(e)||(i=this.provisioningConfig()).startboardProvisioningInfo,r=i&&i.supplyDashboardPartReference&&i.supplyDashboardPartReference(t.resourceId);return r?{name:r.partName,extension:r.options.extensionName,parameters:r.parameters}:n?{name:n.startboardPart.name,extension:n.startboardPart.extension,parameters:(o={},o[n.startboardPartKeyId]=t.resourceId,o)}:void 0},n.prototype._setUpActionBarWatcher=function(e){var t=this,o=this._armOptions.supplyPricingConfig,i=o&&o(),n=i&&i.showPricingSummaryLink,r=this._actionBar;ko.computed(e,(function(){if(t._actionBarSupportsSecondaryLinkDisplayText){var e=null,o=!1;t._showPricingSummary()&&(!n||ko.unwrap(n))?e=d.pricingSummaryLinkLabel:t._showAutomationOptions()&&(e=d.seeTemplateLink,o=!0),r.secondaryLinkDisplayText(e),t._actionBarSupportsSecondaryLinkValidation&&r.secondaryLinkTriggerValidation(o)}})),ko.reactor(e,(function(){var e=r.output(),o=e&&t._actionBarSupportsForceInProgressStatus&&r.forceInProgressStatus()&&1===e.status&&4===e.action,i=e&&e.commitId;if(o&&t._legalTermsCommitId!==i)return t._legalTermsCommitId=i,t._legalTermsBladeShown=!0,t._setActionBarProgress(!0),t._launchPricingSelectable(x.bladeExtension,x.bladeName),null;var n=r.secondaryLinkDisplayText(),a=null==e?void 0:e.secondaryLinkClicked;e&&t._actionBarSupportsSecondaryLinkDisplayText&&!!a&&a===n&&t._pricingSummaryCommitId!==i&&(t._pricingSummaryCommitId=i,t._setActionBarProgress(!1),n===d.seeTemplateLink?t._launchTemplateViewerBlade():t._launchPricingSelectable(y.bladeExtension,y.bladeName))})),e.onInputsSetCallbacks.add((function(e){if(t.pricingSelectable.isSelected()&&u.isCompleted(e.pricingOutput)&&e.pricingOutput.actionButtonClicked){if(t._legalTermsBladeShown){t._legalTermsBladeShown=!1,t._purchaseInProgress=!0;var o=e.pricingOutput.pinToStartboard;t._actionBarSupportsShowActionBar&&!r.showActionBar()&&"boolean"==typeof o&&r.provisionOnStartboardPart(o),r.forceInProgressStatus(!1),r.triggerSelectAction(MsPortalFx.getUniqueId())}t.pricingSelectable.isSelected(!1)}}))},n.prototype._launchTemplateViewerBlade=function(){var e=this,t=this._parameterProvider.getResults();if(t){var o=this._armOptions.supplyTemplateDeploymentOptions(t,1).then((function(t){var o=e.armProvisioningConfig.galleryCreateOptions.galleryItem;return i.getBladeSelection("HubsExtension","TemplateViewerBlade",{options:{templateLink:t.templateLinkUri,templateJson:t.templateJson,parameters:t.parameters,telemetryId:o&&o.id}})})),n=this.pricingSelectable;n.delayedBladeSelection({bladeWidth:2,selectedValuePromise:o}),n.isSelected(!0)}},n.prototype._launchPricingSelectable=function(e,t){this.pricingSelectable.selectedValue(i.getBladeSelection(e,t,this._getPricingBladeInputs())),this.pricingSelectable.isSelected(!0)},n.prototype._getPricingBladeInputs=function(){var e=this._armOptions.supplyPricingConfig(),t=e&&e.supplyPricingInfo();t||_.launchPricingBladeFailure();var o=(this.armProvisioningConfig.galleryCreateOptions||{}).galleryItem,i=this._armOptions.supplyGalleryCreateOptions;if(!o&&w(i)){var n=i();o=n&&n.galleryItem}return(o=o&&MsPortalFx.clone(o)||{categoryIds:[],products:[],productsWithNoPricing:[]}).products=o.products.concat(t.products||[]),o.productsWithNoPricing=o.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:o}},n.prototype._traceProvisioningStarted=function(){return o.prototype._traceProvisioningStarted.call(this,this._createEventBase())},n.prototype._traceProvisioningEnded=function(e,t){var i=this._createEventBase(),n=h,r=s.UnknownFailure;if(t)if(e){var a=e.deploymentStatusCode;a&&a!==c.Success?r=c[a]:(n=m,r=a===c.Success?c[a]:s.Resolved)}else n=m,r=s.Resolved;return i.actionModifier=n,i.data.provisioningStatus=r,o.prototype._traceProvisioningEnded.call(this,e,t,i)},n=r=__decorate([__metadata("fx:diagnostics",[require,"2"]),MsPortalFx.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,i.ContainerContract,Object,Object])],n)}(e.ViewModels.Provisioning.Provisioner);t.Provisioner=S,function(e){e.armValidationTimeout=1e4,e.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:"HubsExtension"}}(S=t.Provisioner||(t.Provisioner={}))}(t.Provisioner||(t.Provisioner={}))}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o=function(e){function t(t,o,i,n){var r,a=this;return"createChildLifetime"in t&&(o=(r=[t,o,i])[0],i=r[1],n=r[2],t=r[3]),(a=e.call(this,t,o,i,n)||this)._skipDeploy=!0,a}return __extends(t,e),t.prototype.traceValidation=function(e){this._traceValidation(e)},t}(e.Azure.Provisioner.Provisioner);t.Provisioner=o}(t.ResourceManager||(t.ResourceManager={}))}(e.Azure||(e.Azure={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(o){!function(o){var i=e.ViewModels,n=e.Base.Constants.BladeNames.Hubs,r=i.Parts.Properties,a=FxImpl.ViewModels.Parts.Properties,s=e.Base,l=e.Assets,c=e.Azure,u=e.Azure.ResourceManager,d=e.Resources.Strings.Part,p=new s.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),f=d.ResourceSummary,b=new r.TextProperty("",""),v=d.PropertiesPart,m="MsPortalFx.Parts.ResourceSummary.ViewModel2";o.includedResourceTypes={},["microsoft.classiccompute/domainnames","microsoft.compute/availabilitysets","microsoft.containerservice/containerservices","microsoft.devices/iothubs","microsoft.network/dnszones","microsoft.network/trafficmanagerprofiles","microsoft.servicefabric/clusters","microsoft.classicnetwork/networksecuritygroups","microsoft.classicnetwork/reservedips","microsoft.classicnetwork/virtualnetworks","microsoft.certificateregistration/certificateorders","microsoft.compute/disks","microsoft.compute/virtualmachinescalesets","microsoft.db.mysql/servers","microsoft.db.postgresql/servers","microsoft.insights/components","microsoft.insights/eventdetail","microsoft.insights/webtests","microsoft.network/applicationgateways","microsoft.network/connections","microsoft.network/expressroutecircuits","microsoft.network/localnetworkgateways","microsoft.network/networkwatchers","microsoft.network/virtualnetworkgateways","microsoft.recoveryservices/vaults","microsoft.servermanagement/gateways","microsoft.servermanagement/nodes"].forEach((function(e){o.includedResourceTypes[e]=3}));var h=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)$/i,g=/^\/subscriptions\/([^/\s]+)/i,y=/^\/subscriptions\/([^/\s]+)\/resourceGroups\/([^/\s]+)/i,x=/(?!(?:\/[^/]+\/[^/]+)+\/providers)\/providers\/([^/]+)((:?\/[^/]+\/[^/]+)*)$/i,M=/\/([^/]+)\/([^/]+)/g,P=e.getJoinFunc("/");function _(t,i){if(a=t,!h.test(a))try{var n=function(e){var t=x.exec(e);if(t){for(var o=void 0,i=t[1],n=t[2],r=[];o=M.exec(n);){if(!o)throw new Error("Invalid resource ID");r.push(o[1])}return P(i,P.apply(void 0,r))}throw new Error("Invalid resource ID")}(t),r=o.includedResourceTypes[n.toLowerCase()];return r?r===i||3===r:e.isFeatureEnabled("autoenablemove")}catch(e){return p.error("Failed to get resource type from the resource id"),!1}var a;return!0}var w="",k={onlyStatic:w,propertyReused:w,setPropertiesNotAvail:w,noResourceGroupWithLayout:w,statusMissing:w,noSubId:w,maxColumns:w,missingProperties:w,maxProperties:w},S=FxImpl.getErrorMap(k);function F(e){var t={resourceGroup:null,resourceGroupId:null,success:!1};try{var o=function(e){var t=y.exec(e);if(t)return{resourceGroup:t[2],resourceGroupId:"/subscriptions/".concat(t[1],"/resourceGroups/").concat(t[2])};throw new Error("Invalid ID")}(e);t.resourceGroup=o.resourceGroup,t.resourceGroupId=o.resourceGroupId,t.success=!0}catch(t){p.error("Error getting RG name from resource id '".concat(e,"'."))}return t}function C(e,o){return new t.Selectable({isSelected:!!(e&&e[o]&&e[o].isSelected)})}function I(e,t){e.builtInPropertyKind=t}function V(e,t,o){I(o,t),e[t]=o}var T=[3,1,4,8,0];function B(e){return!!T.includes(e.getType())||(p.error("Only Callback, Link, OpenBlade and Text properties are allowed on resource summary."),!1)}var D,A=function(t){function a(e,i,n){var r=t.call(this,e)||this;r._editRg=ko.observable(),r._currentResourceId=ko.observable(),r._partContainer=n,r._options=i,r.collapsed=ko.observable(void 0),r.tagsVisible=ko.observable(!0),r.hasQuickStart=ko.observable(!!i.getQuickStartSelection),r.hasKeys=ko.observable(!!i.getKeysSelection),r.hasSettings=ko.observable(!!i.getSettingsSelection),r.noTags=ko.observable(!!i.noTags),r.noRbac=ko.observable(!!i.noRbac);var a=i.supportsResourceMove;r._editRg(1===a||3===a),r.title=ko.observable(""),r.settingsLabel=ko.observable("");var s,l,c="Selectable";return r.resourceGroupSelectable=C(e,"resourceGroup".concat(c)),r.quickStartSelectable=C(e,"quickStart".concat(c)),r.settingsSelectable=C(e,"settings".concat(c)),r.accessSelectable=C(e,"access".concat(c)),r.tagsSelectable=C(e,"tags".concat(c)),r.keysSelectable=C(e,"keys".concat(c)),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Parts.ResourceSummary","Fx/Controls/Essentials"),n?(s=n,r.collapsed.subscribe(s,(function(e){r._updateDataLoading(n,e)}))):s=new FxImpl.TriggerableLifetimeManager,r._ensureRGProperty=function(){return l||I(l=r._createResourceGroupProperty(s),o.BuiltInPropertyKind.ResourceGroup),l},i.noResourceGroup||t.prototype.setProperties.call(r,[r._ensureRGProperty()]),r}return __extends(a,t),a.prototype.onInputsSet=function(t,o){var n=this._options;if(arguments.length<2){p.error("OnInputsSet method of resource summary viewmodel requires the second *settings* argument.")}if(t.actionBarOutput)return this.moveResourceSelection.activatedItems([]),Q();this._inputs=t;var r=t.resourceId;r!==this._currentResourceId()&&this._startRebind(r),n.noRbac||this.accessSelectable.selectedValue(i.getBladeSelection("Microsoft_Azure_AD","UserAssignmentsBlade",{scope:r})),n.noTags||this.tagsSelectable.selectedValue(i.getBladeSelection("HubsExtension","ResourceTagsBlade",{resourceId:r})),n.getSettingsSelection&&this.settingsSelectable.selectedValue(n.getSettingsSelection(t)),n.getQuickStartSelection&&this.quickStartSelectable.selectedValue(n.getQuickStartSelection(t)),n.getKeysSelection&&this.keysSelectable.selectedValue(n.getKeysSelection(t));var a=this.collapsed,s=a.peek();e.isNullOrUndefined(a())&&a(n.collapsed);var l=this._partContainer,c=a.peek();return l&&s===c&&this._updateDataLoading(l,c),Q()},a.prototype.onExpanded=function(e,t){return Q()},a.prototype.setProperties=function(e){var o=!this._options.noResourceGroup,i=10-(o?1:0);e.length>i&&p.error("Resource summary cannot have more than ".concat(i," properties"));var n=[];o&&n.push(this._ensureRGProperty()),e.slice(0,i).forEach((function(e){B(e)&&n.push(e)})),t.prototype.setProperties.call(this,n)},a.prototype._setProperties=function(e){t.prototype.setProperties.call(this,e)},a.prototype._startRebind=function(e){this._currentResourceId(e)},a.prototype._updateDataLoading=function(e,t){this._resetLoadingState(e);var o=this._inputs;if(!t&&o){var i=this._loadingLM=e.createChildLifetime(),n=this._loadingPromise=this.onExpanded(i,o);n&&e.operations.add(n,{blockUi:!0})}},a.prototype._resetLoadingState=function(e){var t=this._loadingPromise;t&&(e.operations.remove(t),this._loadingPromise=null);var o=this._loadingLM;o&&(o.dispose(),this._loadingLM=null)},a.prototype._createResourceGroupProperty=function(e){var t=this,o=ko.observable(),a=ko.observable(),s=ko.observable();ko.reactor(e,(function(){var e=t._currentResourceId();if(e){var r=t._editRg();t._editRg(r||_(e,1));var l=F(e);if(l.success&&(o(l.resourceGroup),a(i.getBladeSelection("HubsExtension",n.ResourceMenuBlade,{id:l.resourceGroupId})),t._editRg())){var c=u.getMoveResourceBlade(e,1).bladeSelection;s(c)}}}));var l={label:f.resourceGroupPropertyLabel,displayValue:o,bladeSelection:a};return l.editBlade={bladeSelection:s,editType:1,displayValue:v.changeResourceGroupLabel,showLink:!0},new r.OpenBladeProperty(l)},a}(r.ViewModel);o.ViewModel=A,function(e){e[e.ResourceGroup=0]="ResourceGroup",e[e.Status=1]="Status",e[e.Location=2]="Location",e[e.SubscriptionName=3]="SubscriptionName",e[e.SubscriptionId=4]="SubscriptionId"}(D||(D={})),o.BuiltInPropertyKind=D;var O=function(t){function i(i,n,r){var a=t.call(this,i,n,r)||this;a._dynamicProperties=ko.observable([]),a._editSub=ko.observable(),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.Parts.ResourceSummary","Fx/Controls/Essentials"),a._dependencies={getLocation:function(t){return e.require("FxInternal/ExtensionRuntime").then((function(e){return e.getInnerRuntime().getResource(t,"resourcesummarypartviewmodel")})).then((function(e){return e.locationString}))},getSubscriptionName:function(e){return c.getSubscriptionInfo(e).then((function(e){return e.displayName}))},getSubscriptionBlade:function(e){return l.mapResourceIdToDynamicSelection("/subscriptions/".concat(e))}};var s=a._options.supportsResourceMove;a._editSub(0===s||3===s);var u=a._createBuiltInProperties(r,n),d=n.staticProperties||[];d.forEach((function(e){e._supportsIsLoading||S.onlyStatic(m)}));var p=r;return ko.reactor(p,(function(){var e=a._dynamicProperties(),t=a._layoutProperties(u,d,e,n.layout);a._setProperties(t)})),ko.reactor(p,(function(){var e=u[o.BuiltInPropertyKind.SubscriptionId],t=u[o.BuiltInPropertyKind.ResourceGroup];if((!t||t.displayValue())&&(!e||e.value())){var i=a._loadingPromise;i?r.operations.update(i,{blockUi:!1}):r.revealContent()}})),a}return __extends(i,t),i.prototype.setDynamicProperties=function(e){var t=e||[],o=this._dynamicProperties(),i=[];t.forEach((function(e){!e._supportsIsLoading&&o.includes(e)?S.propertyReused(m):B(e)&&i.push(e)})),this._dynamicProperties(i)},i.prototype.setProperties=function(e){S.setPropertiesNotAvail(m)},i.prototype._createBuiltInProperties=function(t,i){var n,s=this;if(i.layout){i.noResourceGroup&&S.noResourceGroupWithLayout(m);var l=[i.layout.left||[],i.layout.right||[]];n=e.unique(e.mapMany(l,(function(e){return e.filter((function(e){return"number"==typeof e}))})))}else n=[],i.noResourceGroup||n.push(o.BuiltInPropertyKind.ResourceGroup),i.status&&n.push(o.BuiltInPropertyKind.Status),n.push(o.BuiltInPropertyKind.Location),n.push(o.BuiltInPropertyKind.SubscriptionName),n.push(o.BuiltInPropertyKind.SubscriptionId);var c=function(e){return n.includes(e)},d={};if(c(o.BuiltInPropertyKind.ResourceGroup)&&V(d,o.BuiltInPropertyKind.ResourceGroup,this._ensureRGProperty()),c(o.BuiltInPropertyKind.Status)&&(i.status||S.statusMissing(m),V(d,o.BuiltInPropertyKind.Status,new r.TextProperty({label:f.statusPropertyLabel,value:i.status.value,isLoading:i.status.isLoading}))),c(o.BuiltInPropertyKind.Location)){var b,h=ko.observable(),y=ko.observable();ko.reactor(t,(function(){if(!s.collapsed()){var e=s._currentResourceId();if(e){y(!0);var t=b=s._dependencies.getLocation(e);t.then((function(e){t===b&&h(e)})).catch((function(o){t===b&&(p.warning("Failed to get location for resource id '".concat(e,"'. '").concat(o,"'")),h(f.notAvailable))})).finally((function(){t===b&&y(!1)}))}}}));var x=ko.computed(t,(function(){return i.location&&i.location()||h()}));V(d,o.BuiltInPropertyKind.Location,new r.TextProperty({label:f.locationPropertyLabel,value:x,isLoading:y}))}var M=ko.computed(t,(function(){var e,t=s._currentResourceId();if(!t)return"";try{e=function(e){var t=g.exec(e);if(t)return{subscription:t[1],subscriptionId:"/subscriptions/".concat(t[1])};throw new Error("Invalid ID")}(t).subscription}catch(e){p.error("Failed to get subscription name from the resource id '".concat(t,"'."))}return e}));if(c(o.BuiltInPropertyKind.SubscriptionId)&&V(d,o.BuiltInPropertyKind.SubscriptionId,new r.TextProperty(f.subscriptionIdPropertyLabel,M)),c(o.BuiltInPropertyKind.SubscriptionName)){var P,w=ko.observable(),k=ko.observable(),F=ko.observable(),C=this._currentResourceId();ko.reactor(t,(function(){if(!s.collapsed()){var e=s._currentResourceId();if(e&&e!==C){C=e;var t=M();if(t){var o=s._editSub();if(s._editSub(o||_(e,0)),s._editSub()){var i=u.getMoveResourceBlade(e,0).bladeSelection;F(i)}k(!0);var n=P=s._dependencies.getSubscriptionName(t).then((function(e){n===P&&w(e)})).catch((function(){n===P&&(p.error("Failed to get the subscription name for the subscription id '".concat(t,"'.")),w(f.notAvailable))})).finally((function(){n===P&&k(!1)}))}}}}));var I={label:f.subscriptionNamePropertyLabel,displayValue:w,resolveBlade:function(){var e=M();if(!e){var t=s._currentResourceId();S.noSubId(t)}return s._dependencies.getSubscriptionBlade(e)},isLoading:k};I.editBlade={bladeSelection:F,editType:1,displayValue:v.changeSubscriptionLabel,showLink:!0},V(d,o.BuiltInPropertyKind.SubscriptionName,new a.OpenBladeAsyncProperty(I))}return d},i.prototype._layoutProperties=function(e,t,i,n){var r=[],a=0;if(n){var s=n.left||[],l=n.right||[];(s.length>5||l.length+i.length>5)&&S.maxColumns(5);for(var c=0,u=0,d=function(o){var n,d=o?s:l;if((o?c:u)<d.length){var p=d[o?c++:u++];"number"==typeof p?n=e[p]:(n=p,t.includes(n)||S.missingProperties())}else n=!o&&a<i.length?i[a++]:b;r.push(n)},p=0;p++<5&&(c<s.length||u<l.length||a<i.length);)d(!0),d(!1)}else{t.length+i.length>5&&S.maxProperties(5);var f=0,v=function(){var e;e=f<t.length?t[f++]:a<i.length?i[a++]:b,r.push(e)};this._options.noResourceGroup||(r.push(e[o.BuiltInPropertyKind.ResourceGroup]),v());var m=e[o.BuiltInPropertyKind.Status];for(m&&(r.push(m),v()),r.push(e[o.BuiltInPropertyKind.Location]),v(),r.push(e[o.BuiltInPropertyKind.SubscriptionName]),v(),r.push(e[o.BuiltInPropertyKind.SubscriptionId]),v();f+a<5&&(f<t.length||a<i.length);)r.push(b),v()}return r},i.prototype._startRebind=function(e){t.prototype._startRebind.call(this,e),this._dynamicProperties([])},i}(A);o.ViewModel2=O}(o.ResourceSummary||(o.ResourceSummary={}))}(t.Parts||(t.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){e.setDependencies=function(e,t){var o=e._dependencies;t.getLocation&&(o.getLocation=t.getLocation),t.getSubscriptionName&&(o.getSubscriptionName=t.getSubscriptionName),t.getSubscriptionBlade&&(o.getSubscriptionBlade=t.getSubscriptionBlade)}}(e.ResourceSummary||(e.ResourceSummary={}))}(e.Parts||(e.Parts={}))}(e.ViewModels||(e.ViewModels={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){!function(t){var o=e.Services,i=function(){function e(){var e=this;this.initialized=ko.observable(!1),this.results=ko.observableArray(),this.canceled=ko.observable(!1),this._lifetimeManager=new FxImpl.TriggerableLifetimeManager,this.canceled.subscribe(this._lifetimeManager,(function(t){t&&(e.results([]),e._releaseDataSub())}))}return e.prototype.dispose=function(){this._lifetimeManager.dispose()},e.prototype.onInputsSet=function(e){return this._releaseDataSub(),this.initialized(!1),this.canceled(!1),this.results([]),null},e.prototype.connectDataSource=function(e,t){this._releaseDataSub();var i=this._dataLifetime=this._lifetimeManager.createChildLifetime();return o.DataSetAssetExpansionMapper.connectDataSet(i,e,this.results,t),this.initialized(!0),null},e.prototype._releaseDataSub=function(){this._dataLifetime&&this._dataLifetime.dispose()},e}();t.Service=i;var n=function(){function e(){}return e.serialize=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=null);var i={browseCriteria:e,newBrowse:t,useBrowseKey:o};return JSON.stringify(i)},e.deserialize=function(e){var t=JSON.parse(e);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},e}();t.BrowseSerializer=n;var r=function(e,t){this.initialized=ko.observable(!1),this.results=ko.observableArray(),this.browseCriteria=e,this.results(t)};t.ResultsViewModel=r}(t.Browse||(t.Browse={}))}(t.Services||(t.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.ViewModels,i=function(){this.extensionName=ko.observable(null),this.bladeName=ko.observable(null)};t.Service=i,t.prepareDynamicSelection=function(e,t,i,n){var r=function(){return o.getAssetSelection(i,n,{id:t})};if(e){var a=void 0;if("function"==typeof e.onInputsSet&&(a=e.onInputsSet({assetId:t})),a)return a.then((function(){return(n=e.bladeName())?o.getBladeSelection(e.extensionName()||i,n,{id:t}):r();var n}))}return Q(r())}}(t.DynamicBlade||(t.DynamicBlade={}))}(t.Services||(t.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){!function(t){var o=e.Services.AssetExpansion,i=e.Resources.Strings.Services.AssetHandler,n=function(){function e(){}return Object.defineProperty(e,"base",{get:function(){return[{id:"title",name:ko.observable(i.titleGridColumn),itemKey:o.titlePropertyName},{id:"assetType",name:ko.observable(i.assetTypeGridColumn),itemKey:o.assetTypeStringPropertyName}]},enumerable:!1,configurable:!0}),e}();t.BaseColumns=n;var r=function(){this.includeAssetIcon=ko.observable(!0),this.columns=ko.observable([])};t.Service=r}(t.GridColumns||(t.GridColumns={}))}(t.Services||(t.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){var t=function(){function e(){this.properties=ko.observableArray()}return e.prototype.setProperty=function(e,t){var o=this.properties;o().some((function(o){return o.property===e&&(o.value=t,!0)}))||o.push({property:e,value:t})},e}();e.Service=t}(e.PropertyProvider||(e.PropertyProvider={}))}(e.Services||(e.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){!function(e){var t=function(){this.actions=ko.observableArray()};e.Service=t}(e.Security||(e.Security={}))}(e.Services||(e.Services={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=function(){return e.require("FxInternal/ResourceManagement/ArmEvents")};t.notifyAssetDeleted=function(e,t,i){o().then((function(o){o.notifyAssetDeleted(e,t,i)}))},t.notifyAssetDeletedBulk=function(e){o().then((function(t){t.notifyAssetDeletedBulk(e)}))},t.notifyResourceDeleted=function(e){o().then((function(t){t.notifyResourceDeleted(e)}))}}(t.AssetManager||(t.AssetManager={}))}(e.UI||(e.UI={}))}(MsPortalFx||(MsPortalFx={})),function(e){var t=new e.Rpc.ActionEndPointDefinition("OpenFeedbackPane");e.feedbackEndPoint=t}(FxImpl||(FxImpl={})),function(e){!function(t){var o="MsPortalFx.UI.NotificationManager",i=e.Rpc.ActionEndPointDefinition;t.addNotificationsEndPoint=new i(o+".AddNotifications"),t.addNotification2EndPoint=new i(o+".AddNotifications2"),t.updateNotificationEndPoint=new i(o+".UpdateNotification")}(e.NotificationManager||(e.NotificationManager={}))}(FxImpl||(FxImpl={})),function(e){!function(t){!function(t){var o=FxImpl.Rpc,i=FxImpl.NotificationManager;function n(e,t,o){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:e,propertyName:t,propertyValue:o})}i.rpcClient=o.client;var r=function(){function t(t){this._id=e.getUniqueId(),this._name=t}return t.prototype.raise=function(e,t,o){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:e.status,subStatus:e.subStatus,assetId:t,properties:o})},t.prototype.updateCorrelationId=function(e){n(this._id,"correlationId",e)},t.prototype.reportProgress=function(e){n(this._id,"percentComplete",e)},t}();t.Notification2=r,t.create=function(e){return new r(e)},function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.InProgress=3]="InProgress",e[e.Success=4]="Success"}(t.NotificationState||(t.NotificationState={}));var a=function(e,t,o,i,n,r,a,s){if(void 0===o)throw new Error("Invalid state arg.");if(r&&!n)throw new Error("Sub id must be specified when operation id is specified.");this.source=e,this.eventType=t,this.state=o,this.timestamp=new Date,this.descriptionArgs=i,this.subscriptionId=n,this.operationId=r,this.percentOperationComplete=a,this.assetId=s};function s(e){e&&e.length&&i.addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:e})}t.Notification=a,t.addNotification=function(e){s([e])},t.addNotifications=s}(t.NotificationManager||(t.NotificationManager={}))}(e.UI||(e.UI={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.Base,i=function(){this.title=ko.observable(),this.subtitle=ko.observable(),this.description=ko.observable(),this.helpUri=ko.observable(),this.icon=ko.observable(o.Images.Polychromatic.DefaultBlade()),this.titleImageUri=ko.observable(),this.statusBar=null,this.contentState=ko.observable(0),this.contentStateDisplayText=ko.observable()};t.Blade=i}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(e){!function(e){var t=1;e.isBladeCallerInput=function(e){return e.startsWith("internal_bladeCall")};var o=function(e,o){var i=this;this.internal_bladeCallId=ko.observable(),this.internal_bladeCallerParams=ko.observable();var n=o.invokeOnSelectable,r=o.invokeOnSelectableSet;if(!!n==!!r)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");var a=void 0,s=function(e){if(a=function(){if(n)return n.value();if(r){var e=r.activatedItems();return e?e[0]:null}return null}(),e){i.internal_bladeCallId(void 0);var s=o.supplyParams(a);i.internal_bladeCallerParams(s)}i.internal_bladeCallId(t++)},l=!1;e.onInputsSetCallbacks.add((function(t){if(!l){l=!0;var c=function(){if(n)return n.isSelected();if(r){var e=r.activatedItems().length;if(e>1)throw new Error("Multiselection is not supported with parameter collectors.");return e>0}};c()&&s(o.forceInvocation);var u=function(){c()&&s(!0)};n?n.isSelected.subscribe(e,u):r&&r.activatedItems.subscribe(e,u)}if(t){var d=t.internal_bladeCallerResult;d&&d.bladeCallId===i.internal_bladeCallId()&&(i.internal_bladeCallId(void 0),o.receiveResult(d.result,a),n?n.isSelected(!1):r&&r.activatedItems([]))}return null}),!0)};e.BladeCaller=o;var i=function(){function e(e,t){var o,i=this;this.internal_bladeCallerResult=ko.observable(),e.onInputsSetCallbacks.add((function(e){if(i._bladeCallId||(i._bladeCallId=e.internal_bladeCallId),void 0!==e.internal_bladeCallerParams){var n=ko.toJSON(e.internal_bladeCallerParams);n!==o&&i._bladeCallId&&i._bladeCallId===e.internal_bladeCallId&&(o=n,t.receiveParams(e.internal_bladeCallerParams))}return null}))}return e.prototype.sendResult=function(e){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:e})},e}();e.BladeCallable=i}(e.Internal||(e.Internal={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){var t;(function(t){var o=e.ViewModels,i=e.Base,n=function(e,t){this.signature="FxAppBlade",this.kind=e,this.data=t};t.Message=n;var r=function(e){function t(t,o){var i=e.call(this,t)||this;return i.controlIsReady=ko.observable(!1),i.controlType=113,i.src=o.src,i.postMessage=o.postMessage||ko.observable(),i.receiveMessage=o.receiveMessage||ko.observable(),i}return __extends(t,e),t}(e.ViewModels.Controls.Base.ViewModel),a=function(e){function t(t,o){var i=e.call(this)||this;i._handlers={},i._queue=[];var n=i.iFrame=new r(t,{src:o.source});return n.controlIsReady.subscribe(t,(function(e){e&&i._queue.forEach((function(e){i.iFrame.postMessage(e)}))})),n.receiveMessage.subscribe(t,(function(e){var t=i._handlers[e.kind];t&&t.fire(e.data)})),i}return __extends(t,e),t.prototype.postMessage=function(e){var t=this.iFrame;t.controlIsReady()?t.postMessage(e):this._queue.push(e)},t.prototype.on=function(e,t){var o=this._handlers,n=o[e];n||(n=o[e]=new i.Callbacks),n.add(t)},t.prototype.off=function(e,t){var o=this._handlers[e];o&&o.remove(t)},t}(o.Blade);t.ViewModel=a})((t=e.ViewModels||(e.ViewModels={})).AppBlade||(t.AppBlade={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){!function(t){var o=e.UI,i=o.NotificationManager,n=e.ViewModels,r=e.Resources.Strings,a=e.ViewModels.Controls.DeleteAssetConfirmation,s=new e.Base.Diagnostics.Log("OnSendErrorNotification"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=ko.observable(),t}return __extends(t,e),t.prototype.onInputsSet=function(e){var t=e.data;return this.data(t),this.title(this._onGetTitle(t)),Q.resolve(null)},t.prototype._onGetTitle=function(e){return r.DeleteAssetConfirmation.bladeTitle.format(e.assetName)},t}(n.Blade),c=function(t){function n(n,r){var a=t.call(this,n)||this;return a.data=ko.observable(),a.result=ko.observable(0),a._container=null,a._assetType=null,a._data=null,a._selectedItems=null,a._previousUserActionId="",a._container=n,a._assetType=r,ko.computed(n,(function(){var e=a.data();a.enabled(a._onValidateCommand(e))})),a.result.subscribe(n,(function(e){if(1===e)o.AssetManager.notifyAssetDeleted(a._assetType,a._data.assetId);else if(2===e){var t=a._onSendErrorNotification(a._data,a._selectedItems);t&&(s.warning("MsPortalFx.ViewModels.DeleteAssetConfirmation: Use of deprecated MsPortalFx.UI.NotificationManager.Notification API"),t.state=i.NotificationState.Error,i.addNotification(t))}})),a.enabled(!1),a.icon(e.Base.Images.Delete()),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.DeleteAssetConfirmation.CommandViewModel","Fx/Controls/"),a}return __extends(n,t),n.prototype.onInputsSet=function(e){var t=e.data,o=e.selectedItems,i=e.actionBarOutput;return this.data(t),i&&(4!==i.action&&5!==i.action||this._container.selectable.isSelected(!1),4===i.action&&i.userActionId&&this._previousUserActionId!==i.userActionId&&(this._previousUserActionId=i.userActionId,this._data=t,this._selectedItems=o,this._onDelete(t,o))),Q.resolve(null)},n.prototype._onValidateCommand=function(t){return!e.isNullOrUndefined(t)},n}(n.OpenBladeCommand),u=function(t){function o(o,i){var n=t.call(this,o,i)||this;return n.data=ko.observable(),n._data=null,n.data.subscribe(n.lifetimeManager,(function(t){!e.deepEquals(n._data,t)&&n._options.grid&&(n._onPopulateGrid(t),n._selectAll()),n._data=t})),FxImpl.logObsoleteAPI("MsPortalFx.ViewModels.DeleteAssetConfirmation.PartViewModel","Fx/Controls/"),n}return __extends(o,t),o.prototype.onInputsSet=function(t){var o=t.data;return this._assetName(o.assetName),e.isNullOrWhiteSpace(o.assetTypeDisplayName)||this._assetTypeDisplayName(o.assetTypeDisplayName),this.data(o),Q.resolve(null)},o}(a.ViewModel);t.BladeViewModel=l,t.CommandViewModel=c,t.PartViewModel=u}(t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=e.UI.NotificationManager,i=e.ViewModels,n=i.Dialogs,r=e.Resources.Strings.DeleteCommand,a=r.Confirmation,s=r.Failure,l=new e.Base.Diagnostics.Log("OnSendErrorNotification"),c=function(t){function i(i,r){var a=t.call(this)||this;return a._assetType=null,a._confirmationDialog=null,a._errorDialog=null,a._data=null,a._assetType=r,a.data=ko.observable(),a.result=ko.observable(0),ko.computed(i,(function(){var e=a.data(),t=a._onValidateCommand(e);a.enabled(t)})),a.result.subscribe(i,(function(t){var i=a._data;if(1===t)e.UI.AssetManager.notifyAssetDeleted(a._assetType,a._onGetAssetId(i)),a.status(0);else if(2===t){var r=a._onSendErrorNotification(i);r&&(l.warning("MsPortalFx.ViewModels.DeleteAssetCommand: Use of deprecated MsPortalFx.UI.NotificationManager.Notification API"),r.state=o.NotificationState.Error,o.addNotification(r)),setTimeout((function(){var e=a._onShowError(i);a._errorDialog=new n.MessageBox(e.title,e.message,3),a.dialog(a._errorDialog)}),100)}})),a.icon(e.Base.Images.Delete()),a}return __extends(i,t),i.prototype.onInputsSet=function(e){return this.data(e.data),Q.resolve(null)},i.prototype.execute=function(e){this._data=this.data();var t=this._onShowConfirmation(this._data);this._confirmationDialog=new n.MessageBox(t.title,t.message,4),this.dialog(this._confirmationDialog)},i.prototype.dialogClick=function(e){var t=this.dialog();t===this._confirmationDialog&&6===e||t===this._errorDialog&&5===e?(this.result(0),this._onDelete(this._data)):this.status(0)},i.prototype._onShowConfirmation=function(e){return{title:a.title,message:a.message}},i.prototype._onShowError=function(e){return{title:s.title,message:s.message}},i.prototype._onValidateCommand=function(t){return!e.isNullOrUndefined(t)},i}(i.Command);t.DeleteAssetCommand=c}(e.ViewModels||(e.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(e){!function(t){var o=function(t){this.lifetime=t.lifetime,this.asyncStore=t.asyncStore,this.functionProxy=t.functionProxy;var o=this.functionProxy,i=function(t){return function(o){return e.require("Fx/Ajax").then((function(e){return e[t](o)}))}};o.register("___ajax___getEndpoints",i("getEndpoints")),o.register("___ajax___batch",(function(e){return i("batch")(__assign(__assign({},e),{includeResponseHeaders:!1}))})),o.register("___ajax___batchMultiple",(function(e){return i("batchMultiple")(__assign(__assign({},e),{includeResponseHeaders:!1}))})),o.register("___ajax___ajax",(function(e){return i("ajax")(e).catch((function(e){throw{textStatus:e.textStatus,data:e.data,message:e.message,errorThrown:e.errorThrown,responseText:e.jqXHR.responseText,responseJSON:e.jqXHR.responseJSON}}))})),o.register("___resources___getContentUri",(function(t){return e.Base.Resources.getContentUri(t,!0)})),o.register("___resources___getAbsoluteUri",(function(t){return e.Base.Resources.getAbsoluteUri(t)})),o.register("___getClientIP___getClientIPv4",(function(){return e.require("Fx/GetClientIP").then((function(e){return(0,e.getClientIPv4)()}))})),o.register("___getClientIP___getClientIPv6",(function(t){return e.require("Fx/GetClientIP").then((function(e){return(0,e.getClientIPv6)(t)}))})),o.register("___ajax___trace",(function(e){FxImpl.NetDiagnostics.traceReactViewAjax(e)})),o.register("___ajax___isTrustedDomain",(function(e){var t;return null===(t=FxImpl.authTokenDomainValidator)||void 0===t?void 0:t.validateDomain(e)})),o.register("___experimentation___onExtensionVariantsAssigned",(function(){return t.extensionAssignments})),o.register("___feedbackPolicies___fetchFeedbackPolicySettings",(function(){return e.require("Fx/FeedbackPolicies").then((function(e){return e.fetchFeedbackPolicySettings()}))})),o.register("___notifications___getAuthDetails",(function(t){return e.require("FxInternal/Notifications").then((function(e){return e.getAuthDetails(t)}))})),o.register("___diagnostics___trace",(function(t){var o=t.telemetryContext,i=t.events,n=function(){return i.forEach((function(t){e.Base.Diagnostics.Telemetry.trace(t)}))};o.Blade&&FxImpl.TelemetryContext.provideContext(n,FxImpl.TelemetryContext.ContextType.Blade,o.Blade),o.Part&&FxImpl.TelemetryContext.provideContext(n,FxImpl.TelemetryContext.ContextType.Part,o.Part)})),o.register("___diagnostics___log",(function(e){e.entries.forEach((function(e){FxImpl.Base.Diagnostics.writeEntry(e.level,e.area,e.entryType,e.message,e.code,e.args,e.timestamp)}))})),o.register("___policyDataCore___validatePolicy",(function(t){var o=t.additionalTelemetry;return(o||(o={})).__platform="React",t=__assign(__assign({},t),{additionalTelemetry:o}),e.require("FxInternal/ResourceManagement/Policy/PolicyDataCore").then((function(e){return e.getPolicyJourney(t)}))})),o.register("___ajax___isTrustedDomainOverride",(function(t){return FxImpl.Rpc.client.invokeRpc("MsPortalFx.Internal.Constants.RpcMethods.experimentationValuesHelper",e.Base.Constants.ExtensionNames.Hubs,["tempTrustedDomains"]).then((function(o){var i=JSON.parse(o[0])||Object.create(null);return e.Base.Security.getUserInfo().then((function(e){var o=e.directoryId,n=FxImpl.getHashCode(o.toLowerCase());return FxImpl.getDomainValidator(i[n]||[],!0).validateDomain(t)}))}))})),o.register("___auth___getAuthorizationTokenForChallenge",(function(t){return FxImpl.Rpc.client.invokeRpc("MsPortalFx.Internal.Constants.RpcMethods.getAuthorizationTokenForChallenge",e.Base.Constants.Shell,t)}))};t.React=o}(e.Models||(e.Models={}))}(MsPortalFx||(MsPortalFx={})),function(e){e.RequireMetadata={"Fx/Composition/Pdl/MenuBlade":["MsPortalImpl.Controls/Controls/Lists/Menu"]}}(FxImpl||(FxImpl={})),function(e,t){var o={},i="object";!function(){function n(e,t){e&&Object.keys(e).forEach((function(o){t(o,e[o])}))}function r(e,t){return typeof e===i&&typeof t===i&&n(t,(function(t,o){var i=e[t];i?r(i,o):e[t]=o})),e}r(e,{Resources:{getResources:function(){}}}),n(t,(function(e,t){var i=o[e];i||(i=o[e]={}),r(i,t)}))}();var n=e.Resources,r=n.getResources;n.getResources=function(e){return r(e)||o[e]}}(this,{"fx.culture":{formats:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],ampm:["AM","PM"],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM d, yyyy",F:"dddd, MMMM d, yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM yyyy",Y:"MMMM yyyy"},firstDayOfWeek:0,agoStrings:null}}}),function(e){var t=window,o=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),i=MsPortalFx.isFeatureEnabled("enablefetchpolyfilltelemetry"),n=function(e,t){return MsPortalFx.Base.Diagnostics.Telemetry.trace({source:"MsPortalFxEnd",action:e,data:t})},r=function(e,t){return MsPortalFx.Base.Diagnostics.Telemetry.startTrace({source:"MsPortalFxEnd",action:e,data:t})},a=function(e,t){return MsPortalFx.Base.Diagnostics.Telemetry.completeTrace(e,t)},s=function(e,t){return MsPortalFx.Base.Diagnostics.Telemetry.cancelTrace(e,t)},l=t.performance,c=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"];var u=t.requirejs;function d(t,o){return e.reshapeRequireConfigCore(t,e.features,o)}function p(t){var i=t.headers,r=t.throwOnErrors,a=t.originalUri,s=t.polyfillName,l=e.authTokenDomainValidator,c=MsPortalFx.isUriAbsolute(a),u=i.Authorization||i["Authorization".toLowerCase()];if(l&&u&&c&&!l.validateDomain(a)){var d=i||{},p=d["x-ms-command-name"]||d["x-ms-command-name".toLowerCase()]||"<not provided>",f=new MsPortalFx.Base.UriBuilder(a).getAuthority(),b="Security issue: Request to send auth token to untrusted domain '".concat(f,"'. Only a fixed set of domains should be configured to receive auth tokens. Command name: ").concat(p);if(n("UntrustedDomainDetectedInPolyfill",{originalUri:a,polyfillName:s}),o.error(b),r)throw b}}var f=Q.defer();function b(t,i){!function(t){t.onNodeCreated=t.onNodeCreated||function(t,o,i,n){e.Diagnostics.addScriptErrorListener(6,t,n,i)},t.getPathFallback=function(e,t){if(t){var i=new MsPortalFx.Base.UriBuilder(t);if(!i.query.getParameter("retryAttempt"))return o.warning("Retrying download",0,e,t),Object.keys(i.query.getParameters()).length||(i.path+=".js"),i.query.setParameter("retryAttempt",1),i.toString();o.error("Download failed even after retry: ".concat(e),0,e,t)}},e.addLoggingToRequireConfig(t,o)}(t),u.config(d(t)),u.configureMetadata&&u.configureMetadata(e.RequireMetadata,i),e.internalEnv.isShell&&f.resolve()}function v(){var t=this,o=window.XMLHttpRequest,l=window.fetch;e.isAjaxInterceptedViaPolyfill().then((function(e){e||(n("RevertXmlHttpRequestOverride"),window.fetch=l,window.XMLHttpRequest=o)}));var u=!1;e.getExperimentBooleanValue("ajaxpolyfillthrowonerrorsexp").then((function(e){u=e})),window.fetch=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return __awaiter(t,void 0,void 0,(function(){var t,o,n,c,d,f,b,v,m,h,g,y;return __generator(this,(function(x){switch(x.label){case 0:t=e[0],o=e[1],n=t instanceof Request?t.clone():t,c=new Request(n,o),d={},c.headers.forEach((function(e,t){d[t.toLowerCase()]=e})),f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p({headers:d,throwOnErrors:u,originalUri:c.url,polyfillName:"fetch"}),l.apply(void 0,e)},b=f.apply(void 0,e),i&&(v=r("fetchPolyfill",{uri:c.url})),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,b];case 2:return m=x.sent(),h=m.clone(),g=h.headers,v&&a(v,{uri:c.url,type:c.method,headers:d,requestText:c.text(),isError:(M=null==m?void 0:m.status,!("number"==typeof M&&(304===M||M>=200&&M<300))),status:null==m?void 0:m.status,wwwAuthenticateReceived:!!(null==g?void 0:g.get("WWW-Authenticate")),responseCorrelationId:(null==g?void 0:g.get("x-ms-correlation-request-id"))||(null==g?void 0:g.get("client-request-id"))}),[3,4];case 3:throw y=x.sent(),v&&s(v,{uri:c.url,type:c.method,headers:d,requestText:c.text(),exception:y.message||y.toString()}),y;case 4:return[2,b]}var M}))}))};window.XMLHttpRequest=function(e){var t=Object.create(e.prototype),o=function(){var o=new e;return Object.setPrototypeOf(o,t),o};return c.forEach((function(t){o[t]=e[t]})),o.prototype=t,Object.defineProperty(t,"constructor",{value:o,enumerable:!1,writable:!0}),t.open=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.open.apply(this,t);var i=t[1];"string"!=typeof i&&(i=i.toString()),this._persistedParams={originalUri:i,headers:{}}},t.setRequestHeader=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.setRequestHeader.apply(this,t);var i=t[0],n=t[1];this._persistedParams.headers[i]=n},t.send=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=__assign({},this._persistedParams),n=i.headers,r=i.originalUri;p({headers:n,throwOnErrors:u,originalUri:r,polyfillName:"xhr"}),e.prototype.send.apply(this,t)},o}(o)}e.requireReady=Q(f.promise),e.injectShellScripts=b,e.interceptAjax=v,e.requireExtension=function(){e.setEnvironment();var o=MsPortalFx.getEnvironmentValue("typesMetadata");o&&MsPortalFx.Data.Metadata.setTypesMetadata(o);var i=MsPortalFx.getEnvironmentValue("requireConfig"),n=MsPortalFx.getEnvironmentValue("copilotFxRequireConfig");n&&u.config(n),e.toAbsoluteUrisRequire(i),t.fx.bootstrapTelemetry.fxScriptsEnd=t.fx.getTimestamp(),l.mark("MsPortalFxEnd"),u.config(d(i,!0)),f.resolve(),e.Base.Diagnostics.Metric.Internal.initialize({extensionName:e.postBootEnv.extensionName,userQuery:e.postBootEnv.userQuery}),MsPortalFx.Base.Diagnostics.Telemetry.Internal.initialize({extensionName:e.postBootEnv.extensionName,userQuery:e.postBootEnv.userQuery});var r=e.bootEnv.shellRequireConfig?Q(MsPortalFx.require("FxInternal/ExtensionRuntime")).then((function(e){e.ensureInitialized(),n&&MsPortalFx.require("@microsoft/azureportal-copilot-ko/internal/KOViewExtractor").then((function(e){e.registerEndpoint()}))})):Q();return r.finally((function(){v()})),r},e.bootEnv.shellRequireConfig&&(b(MsPortalFx.clone(e.internalEnv.fxRequireConfig),e.bootEnv.shellRequireConfig),MsPortalFx.require("FxInternal/ExtensionRuntime")),ko.tasks.scheduler=MsPortalFx.nextTick}(FxImpl||(FxImpl={}));