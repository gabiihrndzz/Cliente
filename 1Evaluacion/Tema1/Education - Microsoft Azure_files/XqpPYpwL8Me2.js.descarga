define("MsPortalImpl/Commands/Commands.OAuthCommand",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeOAuthCommand=t.oauthCookieName=t.oauthCallbackName=void 0;const o=window;t.oauthCallbackName="oauthbuttonCallback",t.oauthCookieName="oAuthToken";const a={};t.executeOAuthCommand=function(e,n,c,i){const l=o.screen;let h=c||Math.max(l.width/2,1060),r=i||l.height/2;h=h>=l.width?l.width:h,r=r>=l.height?l.height:r;const u=`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width=${h}, height=${r}, top=${l.height/2-r/2}, left=${l.width/2-h/2}`,s=e=>{let n;if(e&&(n=a[e],delete a[e]),0===Object.keys(a).length&&(delete o[t.oauthCallbackName],document.cookie=t.oauthCookieName+"=; expires="+new Date(0).toUTCString()+"; path=/"),clearInterval(m),clearInterval(d),n&&n.close)try{n.close()}catch(e){return}};o[t.oauthCallbackName]=t=>{try{C&&a[C]}catch(e){return}e(t),s(C)};const m=setInterval((()=>{const a=new RegExp(`${t.oauthCookieName}=(.*?)(?:$|;)`).exec(document.cookie),n=a&&a[1];if(n)return e(n),document.cookie=t.oauthCookieName+"=; expires="+new Date(0).toUTCString()+"; path=/",void s(C);o[t.oauthCallbackName]||s(C)}),500),d=setInterval((()=>{C&&a[C]?a[C].closed&&s(C):s(C)}),3e5),C=MsPortalFx.getUniqueId();return a[C]=window.open(n,"",u),a[C]?a[C]:(s(C),null)}}));