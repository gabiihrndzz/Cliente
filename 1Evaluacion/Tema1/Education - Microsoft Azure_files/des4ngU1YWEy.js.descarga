define("MsPortalImpl.Controls/Controls/Lists/List2/ListView.Plugins.ctl",["require","exports"],(function(t,e){"use strict";function i(t,e){return{name:t,dependencies:e||[],isEnabled:e=>e&&e[t],moduleId:`MsPortalImpl.Controls/Controls/Lists/List2/ListView.${i=t,i[0].toUpperCase()+i.slice(1)}.ctl`};var i}Object.defineProperty(e,"__esModule",{value:!0}),e.Registrations=void 0,e.Registrations=[i("focus"),i("selection"),i("contextMenu")]})),
define("MsPortalImpl.Controls/Controls/Lists/List2/ListView",["require","exports","MsPortalImpl/TsxStringMode/Tsx","MsPortalImpl/TsxStringMode/Tsx","Viva.Controls/Util/Viva.TemplateEngine","MsPortalImpl.Controls/Controls/Lists/Base/Controls.Lists.Base","MsPortalImpl.Controls/Controls/Lists/List2/ListView.Plugins.ctl","MsPortalImpl/UI/UI.BladeOpener","MsPortalImpl/UI/UI.LinkHandler","MsPortalImpl/Base/Base.Selectable2","MsPortalImpl/UI/Compositions/UI.Composition.Selectable2Registrar","MsPortalImpl/Base/JQueryHelper","FxInternal/Css","_generated/Less/MsPortalImpl.Controls/Controls/Lists/ListView.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.ListView1.css"],(function(t,e,i,s,a,l,n,r,o,c,d,m,p,f,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Widget=e.getItemWidget=void 0,(0,p.injectCss)(f,h);const u="fxc-listView";function g(t){return ko.dataFor(t)}e.getItemWidget=g;const x=MsPortalFx.getIdGenerator("fxc-listView-itemDescriptionId-"),w={text:i(s.KoIf,{condition:"$ctl._itemTypeDetector(onItemClick) === 1"},i("span",{class:["fxc-listView-itemcontent","fxs-portal-text"],"data-bind":{untrustedContent:"content",style:{"min-width":"$ctl.itemMinWidth"}}})),callback:i(s.KoIf,{condition:"$ctl._itemTypeDetector(onItemClick) === 2"},i("div",{class:"fxc-listView-itemcontent","data-bind":{text:"content",style:{"min-width":"$ctl.itemMinWidth"}}})),link:i(s.KoIf,{condition:"$ctl._itemTypeDetector(onItemClick) > 2"},i("a",{class:["fxc-listView-itemcontent","msportalfx-text-primary","fxs-portal-text"],href:"#","data-bind":{text:"content",attr:{tabindex:"$tabIndex"},style:{"min-width":"$ctl.itemMinWidth"}}}))},b=i("li",{class:["fxc-listView-item","fxs-portal-hover","azc-br-muted"],"data-bind":{attr:{"aria-label":"ariaLabel","aria-describedby":"ariaDescriptionId","aria-disabled":"$disabled",role:"$ctl._ariaItemRole",title:"ariaLabel"},css:{"fxc-disabled":"$disabled","fxc-gallery-autofit":"$vm.galleryView && $vm.galleryView.autofit() && !$vm.galleryView.wrap()","fxc-gallery-not-autofit":"$vm.galleryView && (!$vm.galleryView.autofit() || ($vm.galleryView.autofit() && $vm.galleryView.wrap()))","fxc-gallery-border":"$vm.galleryView && $vm.galleryView.showBorder"},keyedCss:{listviewItem:"cssClass"}}},i(s.KoTemplate,{templateKey:"multiSelectCheckboxTemplate"}),i(s.KoTemplate,{templateKey:"content"}),i("span",{class:["fxs-display-none"],"aria-hidden":"true","data-bind":{text:"ariaDescription",attr:{id:"ariaDescriptionId"}}})),I=i(s.Root,null,i("ul",{class:"fxc-listView-list","data-bind":{attr:{"aria-label":"data.ariaLabel","aria-disabled":"$disabled","aria-busy":"$ctl._ariaBusy",role:"$ctl._ariaRole"},keyedCss:{listviewList:"data.cssClass"},css:{"fxc-disabled":"$disabled","fxc-gallery-wrap":"data.galleryView && data.galleryView.wrap","fxc-gallery-nowrap":"data.galleryView && !data.galleryView.wrap()"}}},i(s.KoIf,{condition:"data.loading"},i("div",{class:["fxc-listView-loading","fxs-portal-bg-txt-br"],"data-bind":{untrustedContent:"data.loadingMessage"}})),i(s.KoIfNot,{condition:"data.loading"},i(s.KoIf,{condition:"data.noData"},i("div",{class:"fxc-listView-empty","data-bind":{attr:{role:"$ctl._ariaItemRole"},untrustedContent:"data.noDataMessage"}})),i(s.KoIfNot,{condition:"data.noData"},i(s.KoForEach,{items:"$ctl._items"},i(s.KoTemplate,{options:"{ name: 'itemTemplate', context: context }"})))))),y=i(s.Root,null,i(s.KoWith,{data:"item"},w.text,w.callback,w.link)),C=i("div",{class:["fxc-listView-itemcontent"],"data-bind":{untrustedHtml:{html:"$vm.itemTemplate",data:"item.viewModel"},style:{"min-width":"$ctl.itemMinWidth"}}}),V=i("div",{class:["fxc-listView-itemcontent"],"data-bind":{untrustedContent:"item.content",style:{"min-width":"$ctl.itemMinWidth"}}});class v extends l.Widget{constructor(t,e,i){super(t,e,i),this._ariaRole="list",this._ariaItemRole="listitem";const s=this.ltm;this.viewModel=e,this.templateEngine=new a.HtmlTemplateEngine,this.templateEngine.setTemplate({itemTemplate:b}),this.itemMinWidth=ko.pureComputed((()=>`${ko.unwrap(e.itemMinWidth)}px`)),this._ariaBusy=ko.pureComputed((()=>e.loading()?"true":null)),this._deferredCreate=Promise.withResolvers(),this.loadPlugins(n.Registrations).then((i=>{switch(this.listTypeDetector(e)){case 1:this._items=e.internalItems.mapInto(s,((t,e)=>this.createListItemWidget(t,e))),this.templateEngine.setTemplate({content:y});break;case 2:this._items=e.internalItems.mapInto(s,((t,e)=>this.createListItemWidget(t,e))),this.templateEngine.setTemplate({content:C});break;case 3:this._items=e.computedItems.mapInto(s,((t,e)=>this.createListItemWidget(t,e))),this.templateEngine.setTemplate({content:V})}this._deferredCreate.resolve(i),this.triggerPlugins("afterSetTemplates"),t.addClass(u).addClass("azc-fabric").append(I),this.options.galleryView&&t.addClass("fxc-listView-gallery"),this._bindDescendants()}),(t=>{this._deferredCreate.reject(t)})).then((()=>{this.afterAttachEvents(),this.triggerPlugins("afterAttachEvents")}))}dispose(){this._cleanElement(u,"azc-fabric","fxc-listView-gallery"),super.dispose()}_itemTypeDetector(t){const e=ko.unwrap(t),i=typeof e;if("function"===i)return 2;if("object"===i){if(e.hasOwnProperty("uri"))return 3;if(e.hasOwnProperty("bladeReference"))return 4;if(e.hasOwnProperty("resourceId"))return 5}return 1}listTypeDetector(t){return t.hasOwnProperty("itemTemplate")?2:t.hasOwnProperty("computedItems")?3:1}afterAttachEvents(){this.attachEvent(this.element,"click",".fxc-listView-item:not(.fxc-disabled)",((t,e)=>{const i=$(e.target).closest(".fxc-listView-item"),s=g(i[0]);this.performActivation(e,i,s)})),this.attachEvent(this.element,"keydown.fxcExecution",".fxc-listView-item:not(.fxc-disabled)",((t,e)=>{const i=$(e.target).closest(".fxc-listView-item"),s=g(i[0]);if(13===e.which)e.target===e.currentTarget&&this.performActivation(e,i,s)}))}performActivation(t,e,i){const s=i.item,a=s.onItemClick;s.selectable||MsPortalFx.extend(s,{selectable:(0,d.getSelectableWithClickHandler)(this._diContainer,s,e,a)});const l={openBlade:(t,e)=>{s.selectable&&this._diContainer.get(r.BladeOpener).openBlade(t,{selectable:s.selectable,telemetryName:e})}};let n;if(function(t){return"function"==typeof t}(a)){const t=t=>{try{return a({target:(0,c.getOrCreateCachedFxElement)(t.target)}),!0}catch(t){console.log(t)}};n=t}else n=a;const m=o.getUriAndHandler(this.ltm,this._diContainer,n,!0);m.uriPromise?m.uriPromise().then((()=>{m.handler(t,l)})):m.handler(t,l)}findPreviousElement(t){const e=m.filterVisible(this.element[0],"li.fxc-listView-item:not(.fxc-disabled)");let i;if(t)for(i=e.length-1;i>=0;i--)if(t===e[i]&&i>0)return e[i-1];return e[e.length-1]}findNextElement(t){const e=m.filterVisible(this.element[0],"li.fxc-listView-item:not(.fxc-disabled)");let i;if(t)for(i=0;i<e.length;i++)if(t===e[i]&&i<e.length-1)return e[i+1];return e[0]}createListItemWidget(t,e){const i={item:e,ariaDescription:e.ariaDescription,ariaDescriptionId:ko.pureComputed((()=>e.ariaDescription()?x().toString():null)),ariaLabel:e.ariaLabel,disabled:e.disabled,cssClass:e.cssClass,context:{$disabled:e.disabled}};return this.triggerPlugins("extendListItemWidget",t,e,i),i}}e.Widget=v}));